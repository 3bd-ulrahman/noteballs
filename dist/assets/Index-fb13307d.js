import{d as A,n as E,i as D,r as b,w as O,a as q,t as k,b as B,c as P,e as x,f as T,m as z,u as K,o as Y,g as v,h,j as U,k as g,l as u,p as _,q as X,s as G,v as J,x as I,y as C,z as H,A as R,B as Q,C as j,D as M,F as Z,E as ee}from"./index-b994ffcc.js";import{_ as te}from"./AddEditNote-57d44f23.js";import{u as oe}from"./useWatchCharacters-f5a5ea67.js";function y(e){var t;const o=k(e);return(t=o==null?void 0:o.$el)!=null?t:o}const F=T?window:void 0;function N(...e){let t,o,s,n;if(typeof e[0]=="string"||Array.isArray(e[0])?([o,s,n]=e,t=F):[t,o,s,n]=e,!t)return E;Array.isArray(o)||(o=[o]),Array.isArray(s)||(s=[s]);const l=[],r=()=>{l.forEach(m=>m()),l.length=0},c=(m,p,a,i)=>(m.addEventListener(p,a,i),()=>m.removeEventListener(p,a,i)),d=O(()=>[y(t),k(n)],([m,p])=>{if(r(),!m)return;const a=q(p)?{...p}:p;l.push(...o.flatMap(i=>s.map(f=>c(m,i,f,a))))},{immediate:!0,flush:"post"}),$=()=>{d(),r()};return B($),$}let S=!1;function W(e,t,o={}){const{window:s=F,ignore:n=[],capture:l=!0,detectIframe:r=!1}=o;if(!s)return E;D&&!S&&(S=!0,Array.from(s.document.body.children).forEach(a=>a.addEventListener("click",E)),s.document.documentElement.addEventListener("click",E));let c=!0;const d=a=>n.some(i=>{if(typeof i=="string")return Array.from(s.document.querySelectorAll(i)).some(f=>f===a.target||a.composedPath().includes(f));{const f=y(i);return f&&(a.target===f||a.composedPath().includes(f))}}),m=[N(s,"click",a=>{const i=y(e);if(!(!i||i===a.target||a.composedPath().includes(i))){if(a.detail===0&&(c=!d(a)),!c){c=!0;return}t(a)}},{passive:!0,capture:l}),N(s,"pointerdown",a=>{const i=y(e);c=!d(a)&&!!(i&&!a.composedPath().includes(i))},{passive:!0}),r&&N(s,"blur",a=>{setTimeout(()=>{var i;const f=y(e);((i=s.document.activeElement)==null?void 0:i.tagName)==="IFRAME"&&!(f!=null&&f.contains(s.document.activeElement))&&t(a)},0)})].filter(Boolean);return()=>m.forEach(a=>a())}const se={[A.mounted](e,t){const o=!t.modifiers.bubble;if(typeof t.value=="function")e.__onClickOutside_stop=W(e,t.value,{capture:o});else{const[s,n]=t.value;e.__onClickOutside_stop=W(e,s,Object.assign({capture:o},n))}},[A.unmounted](e){e.__onClickOutside_stop()}};function L(e){return typeof Window<"u"&&e instanceof Window?e.document.documentElement:typeof Document<"u"&&e instanceof Document?e.documentElement:e}function V(e){const t=window.getComputedStyle(e);if(t.overflowX==="scroll"||t.overflowY==="scroll"||t.overflowX==="auto"&&e.clientWidth<e.scrollWidth||t.overflowY==="auto"&&e.clientHeight<e.scrollHeight)return!0;{const o=e.parentNode;return!o||o.tagName==="BODY"?!1:V(o)}}function ne(e){const t=e||window.event,o=t.target;return V(o)?!1:t.touches.length>1?!0:(t.preventDefault&&t.preventDefault(),!1)}const w=new WeakMap;function re(e,t=!1){const o=b(t);let s=null;O(P(e),r=>{const c=L(k(r));if(c){const d=c;w.get(d)||w.set(d,d.style.overflow),o.value&&(d.style.overflow="hidden")}},{immediate:!0});const n=()=>{const r=L(k(e));!r||o.value||(D&&(s=N(r,"touchmove",c=>{ne(c)},{passive:!1})),r.style.overflow="hidden",o.value=!0)},l=()=>{var r;const c=L(k(e));!c||!o.value||(D&&(s==null||s()),c.style.overflow=(r=w.get(c))!=null?r:"",w.delete(c),o.value=!1)};return B(l),x({get(){return o.value},set(r){r?n():l()}})}function ae(){let e=!1;const t=b(!1);return(o,s)=>{if(t.value=s.value,e)return;e=!0;const n=re(o,s.value);O(t,l=>n.value=l)}}ae();const le={class:"modal is-active p-4"},ce=u("div",{class:"modal-background"},null,-1),ie={class:"modal-card"},ue={class:"modal-card-head"},de=u("p",{class:"modal-card-title"},"Delete Note?",-1),fe=u("section",{class:"modal-card-body"}," Are you sure you want to delete this note? ",-1),me={class:"modal-card-foot is-justify-content-flex-end"},ve={__name:"ModalDeleteNote",props:z({noteId:{type:String,required:!0}},{modals:{},modalsModifiers:{}}),emits:["update:modals"],setup(e){const t=K(e,"modals");function o(){t.value=!1}return Y(()=>{const s=n=>{n.key==="Escape"&&(o(),document.removeEventListener("keyup",s))};document.addEventListener("keyup",s)}),(s,n)=>(v(),h("div",le,[ce,U((v(),h("div",ie,[u("header",ue,[de,u("button",{class:"delete","aria-label":"close",onClick:n[0]||(n[0]=l=>t.value=!1)})]),fe,u("footer",me,[u("button",{class:"button",onClick:n[1]||(n[1]=l=>t.value=!1)},"Cancel"),u("button",{class:"button is-danger",onClick:n[2]||(n[2]=l=>g(_)().destroy(e.noteId))}," Delete ")])])),[[g(se),o]])]))}},pe={class:"card mb-4"},he={class:"card-content"},_e={class:"content"},ye={class:"columns is-mobile has-text-grey-light mt-2"},ke={class:"column"},ge={class:"column has-text-right"},we={class:"card-footer"},Ee={__name:"Note",props:{note:{required:!0,type:Object}},setup(e){const t=e,o=x(()=>{let l=parseInt(t.note.date);return X(l,"DD MMM YYYY H:mm").value}),s=x(()=>t.note.content.length),n=G({deleteNote:!1});return(l,r)=>{const c=J("RouterLink");return v(),h("div",pe,[u("div",he,[u("div",_e,[I(C(e.note.content)+" ",1),u("div",ye,[u("small",ke,C(o.value),1),u("small",ge,C(s.value)+" characters ",1)])])]),u("footer",we,[H(c,{to:`notes/update/${e.note.id}`,class:"card-footer-item"},{default:R(()=>[I(" Edit ")]),_:1},8,["to"]),u("a",{onClick:r[0]||(r[0]=Q(d=>n.deleteNote=!0,["prevent"])),href:"#",class:"card-footer-item"}," Delete ")]),n.deleteNote?(v(),j(ve,{key:0,modals:n.deleteNote,"onUpdate:modals":r[1]||(r[1]=d=>n.deleteNote=d),noteId:e.note.id},null,8,["modals","noteId"])):M("",!0)])}}},Ne={class:"notes"},be=["disabled"],$e={key:0,class:"progress is-large is-success",max:"100"},Ce={key:1,class:"is-size-4 has-text-centered has-text-grey-light is-family-monospace pt-6"},Me={__name:"Index",setup(e){const t=b(""),o=b(null),s=()=>{_().store(t.value),t.value="",o.value.focusTextarea()};return oe(t),Y(()=>{const n=l=>{l.key==="Enter"&&s()};document.addEventListener("keyup",n)}),(n,l)=>(v(),h("div",Ne,[H(te,{note:t.value,"onUpdate:note":l[1]||(l[1]=r=>t.value=r),placeholder:"Add a new note",ref_key:"addEditNoteRef",ref:o},{buttons:R(()=>[u("button",{onClick:l[0]||(l[0]=r=>s()),disabled:t.value.length<10,class:"button is-link has-background-success"}," Add New Note ",8,be)]),_:1},8,["note"]),g(_)().notesLoaded?M("",!0):(v(),h("progress",$e)),(v(!0),h(Z,null,ee(g(_)().notes,r=>(v(),j(Ee,{key:r.id,note:r},null,8,["note"]))),128)),g(_)().notes.length?M("",!0):(v(),h("div",Ce," no notes here yet... "))]))}};export{Me as default};
