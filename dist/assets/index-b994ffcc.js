(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function fc(e,t){const n=new Set(e.split(","));return t?r=>n.has(r.toLowerCase()):r=>n.has(r)}const gt={},ir=[],he=()=>{},Ym=()=>!1,Gi=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),dc=e=>e.startsWith("onUpdate:"),Lt=Object.assign,pc=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Xm=Object.prototype.hasOwnProperty,st=(e,t)=>Xm.call(e,t),H=Array.isArray,or=e=>Wi(e)==="[object Map]",Zh=e=>Wi(e)==="[object Set]",Q=e=>typeof e=="function",xt=e=>typeof e=="string",Pr=e=>typeof e=="symbol",Et=e=>e!==null&&typeof e=="object",tf=e=>(Et(e)||Q(e))&&Q(e.then)&&Q(e.catch),ef=Object.prototype.toString,Wi=e=>ef.call(e),Jm=e=>Wi(e).slice(8,-1),nf=e=>Wi(e)==="[object Object]",mc=e=>xt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Wr=fc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Qi=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Zm=/-(\w)/g,Ae=Qi(e=>e.replace(Zm,(t,n)=>n?n.toUpperCase():"")),tg=/\B([A-Z])/g,$n=Qi(e=>e.replace(tg,"-$1").toLowerCase()),Yi=Qi(e=>e.charAt(0).toUpperCase()+e.slice(1)),Bo=Qi(e=>e?`on${Yi(e)}`:""),Ue=(e,t)=>!Object.is(e,t),fi=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},Ti=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},ma=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Gl;const rf=()=>Gl||(Gl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function gc(e){if(H(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=xt(r)?sg(r):gc(r);if(s)for(const i in s)t[i]=s[i]}return t}else if(xt(e)||Et(e))return e}const eg=/;(?![^(]*\))/g,ng=/:([^]+)/,rg=/\/\*[^]*?\*\//g;function sg(e){const t={};return e.replace(rg,"").split(eg).forEach(n=>{if(n){const r=n.split(ng);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function ls(e){let t="";if(xt(e))t=e;else if(H(e))for(let n=0;n<e.length;n++){const r=ls(e[n]);r&&(t+=r+" ")}else if(Et(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const ig="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",og=fc(ig);function sf(e){return!!e||e===""}const rR=e=>xt(e)?e:e==null?"":H(e)||Et(e)&&(e.toString===ef||!Q(e.toString))?JSON.stringify(e,of,2):String(e),of=(e,t)=>t&&t.__v_isRef?of(e,t.value):or(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,s],i)=>(n[$o(r,i)+" =>"]=s,n),{})}:Zh(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>$o(n))}:Pr(t)?$o(t):Et(t)&&!H(t)&&!nf(t)?String(t):t,$o=(e,t="")=>{var n;return Pr(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let le;class af{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=le,!t&&le&&(this.index=(le.scopes||(le.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=le;try{return le=this,t()}finally{le=n}}}on(){le=this}off(){le=this.parent}stop(t){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function cf(e){return new af(e)}function ag(e,t=le){t&&t.active&&t.effects.push(e)}function _c(){return le}function lf(e){le&&le.cleanups.push(e)}let Nn;class yc{constructor(t,n,r,s){this.fn=t,this.trigger=n,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,ag(this,s)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,jn();for(let t=0;t<this._depsLength;t++){const n=this.deps[t];if(n.computed&&(cg(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),qn()}return this._dirtyLevel>=4}set dirty(t){this._dirtyLevel=t?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=on,n=Nn;try{return on=!0,Nn=this,this._runnings++,Wl(this),this.fn()}finally{Ql(this),this._runnings--,Nn=n,on=t}}stop(){var t;this.active&&(Wl(this),Ql(this),(t=this.onStop)==null||t.call(this),this.active=!1)}}function cg(e){return e.value}function Wl(e){e._trackId++,e._depsLength=0}function Ql(e){if(e.deps.length>e._depsLength){for(let t=e._depsLength;t<e.deps.length;t++)uf(e.deps[t],e);e.deps.length=e._depsLength}}function uf(e,t){const n=e.get(t);n!==void 0&&t._trackId!==n&&(e.delete(t),e.size===0&&e.cleanup())}let on=!0,ga=0;const hf=[];function jn(){hf.push(on),on=!1}function qn(){const e=hf.pop();on=e===void 0?!0:e}function vc(){ga++}function Ec(){for(ga--;!ga&&_a.length;)_a.shift()()}function ff(e,t,n){if(t.get(e)!==e._trackId){t.set(e,e._trackId);const r=e.deps[e._depsLength];r!==t?(r&&uf(r,e),e.deps[e._depsLength++]=t):e._depsLength++}}const _a=[];function df(e,t,n){vc();for(const r of e.keys()){let s;r._dirtyLevel<t&&(s??(s=e.get(r)===r._trackId))&&(r._shouldSchedule||(r._shouldSchedule=r._dirtyLevel===0),r._dirtyLevel=t),r._shouldSchedule&&(s??(s=e.get(r)===r._trackId))&&(r.trigger(),(!r._runnings||r.allowRecurse)&&r._dirtyLevel!==2&&(r._shouldSchedule=!1,r.scheduler&&_a.push(r.scheduler)))}Ec()}const pf=(e,t)=>{const n=new Map;return n.cleanup=e,n.computed=t,n},wi=new WeakMap,On=Symbol(""),ya=Symbol("");function oe(e,t,n){if(on&&Nn){let r=wi.get(e);r||wi.set(e,r=new Map);let s=r.get(n);s||r.set(n,s=pf(()=>r.delete(n))),ff(Nn,s)}}function ze(e,t,n,r,s,i){const o=wi.get(e);if(!o)return;let a=[];if(t==="clear")a=[...o.values()];else if(n==="length"&&H(e)){const c=Number(r);o.forEach((l,u)=>{(u==="length"||!Pr(u)&&u>=c)&&a.push(l)})}else switch(n!==void 0&&a.push(o.get(n)),t){case"add":H(e)?mc(n)&&a.push(o.get("length")):(a.push(o.get(On)),or(e)&&a.push(o.get(ya)));break;case"delete":H(e)||(a.push(o.get(On)),or(e)&&a.push(o.get(ya)));break;case"set":or(e)&&a.push(o.get(On));break}vc();for(const c of a)c&&df(c,4);Ec()}function lg(e,t){var n;return(n=wi.get(e))==null?void 0:n.get(t)}const ug=fc("__proto__,__v_isRef,__isVue"),mf=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Pr)),Yl=hg();function hg(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=ot(this);for(let i=0,o=this.length;i<o;i++)oe(r,"get",i+"");const s=r[t](...n);return s===-1||s===!1?r[t](...n.map(ot)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){jn(),vc();const r=ot(this)[t].apply(this,n);return Ec(),qn(),r}}),e}function fg(e){const t=ot(this);return oe(t,"has",e),t.hasOwnProperty(e)}class gf{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?Rg:Ef:i?vf:yf).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const o=H(t);if(!s){if(o&&st(Yl,n))return Reflect.get(Yl,n,r);if(n==="hasOwnProperty")return fg}const a=Reflect.get(t,n,r);return(Pr(n)?mf.has(n):ug(n))||(s||oe(t,"get",n),i)?a:Vt(a)?o&&mc(n)?a:a.value:Et(a)?s?Ic(a):Ns(a):a}}class _f extends gf{constructor(t=!1){super(!1,t)}set(t,n,r,s){let i=t[n];if(!this._isShallow){const c=pr(i);if(!Ii(r)&&!pr(r)&&(i=ot(i),r=ot(r)),!H(t)&&Vt(i)&&!Vt(r))return c?!1:(i.value=r,!0)}const o=H(t)&&mc(n)?Number(n)<t.length:st(t,n),a=Reflect.set(t,n,r,s);return t===ot(s)&&(o?Ue(r,i)&&ze(t,"set",n,r):ze(t,"add",n,r)),a}deleteProperty(t,n){const r=st(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&r&&ze(t,"delete",n,void 0),s}has(t,n){const r=Reflect.has(t,n);return(!Pr(n)||!mf.has(n))&&oe(t,"has",n),r}ownKeys(t){return oe(t,"iterate",H(t)?"length":On),Reflect.ownKeys(t)}}class dg extends gf{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const pg=new _f,mg=new dg,gg=new _f(!0),Tc=e=>e,Xi=e=>Reflect.getPrototypeOf(e);function Xs(e,t,n=!1,r=!1){e=e.__v_raw;const s=ot(e),i=ot(t);n||(Ue(t,i)&&oe(s,"get",t),oe(s,"get",i));const{has:o}=Xi(s),a=r?Tc:n?Rc:us;if(o.call(s,t))return a(e.get(t));if(o.call(s,i))return a(e.get(i));e!==s&&e.get(t)}function Js(e,t=!1){const n=this.__v_raw,r=ot(n),s=ot(e);return t||(Ue(e,s)&&oe(r,"has",e),oe(r,"has",s)),e===s?n.has(e):n.has(e)||n.has(s)}function Zs(e,t=!1){return e=e.__v_raw,!t&&oe(ot(e),"iterate",On),Reflect.get(e,"size",e)}function Xl(e){e=ot(e);const t=ot(this);return Xi(t).has.call(t,e)||(t.add(e),ze(t,"add",e,e)),this}function Jl(e,t){t=ot(t);const n=ot(this),{has:r,get:s}=Xi(n);let i=r.call(n,e);i||(e=ot(e),i=r.call(n,e));const o=s.call(n,e);return n.set(e,t),i?Ue(t,o)&&ze(n,"set",e,t):ze(n,"add",e,t),this}function Zl(e){const t=ot(this),{has:n,get:r}=Xi(t);let s=n.call(t,e);s||(e=ot(e),s=n.call(t,e)),r&&r.call(t,e);const i=t.delete(e);return s&&ze(t,"delete",e,void 0),i}function tu(){const e=ot(this),t=e.size!==0,n=e.clear();return t&&ze(e,"clear",void 0,void 0),n}function ti(e,t){return function(r,s){const i=this,o=i.__v_raw,a=ot(o),c=t?Tc:e?Rc:us;return!e&&oe(a,"iterate",On),o.forEach((l,u)=>r.call(s,c(l),c(u),i))}}function ei(e,t,n){return function(...r){const s=this.__v_raw,i=ot(s),o=or(i),a=e==="entries"||e===Symbol.iterator&&o,c=e==="keys"&&o,l=s[e](...r),u=n?Tc:t?Rc:us;return!t&&oe(i,"iterate",c?ya:On),{next(){const{value:h,done:f}=l.next();return f?{value:h,done:f}:{value:a?[u(h[0]),u(h[1])]:u(h),done:f}},[Symbol.iterator](){return this}}}}function Xe(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function _g(){const e={get(i){return Xs(this,i)},get size(){return Zs(this)},has:Js,add:Xl,set:Jl,delete:Zl,clear:tu,forEach:ti(!1,!1)},t={get(i){return Xs(this,i,!1,!0)},get size(){return Zs(this)},has:Js,add:Xl,set:Jl,delete:Zl,clear:tu,forEach:ti(!1,!0)},n={get(i){return Xs(this,i,!0)},get size(){return Zs(this,!0)},has(i){return Js.call(this,i,!0)},add:Xe("add"),set:Xe("set"),delete:Xe("delete"),clear:Xe("clear"),forEach:ti(!0,!1)},r={get(i){return Xs(this,i,!0,!0)},get size(){return Zs(this,!0)},has(i){return Js.call(this,i,!0)},add:Xe("add"),set:Xe("set"),delete:Xe("delete"),clear:Xe("clear"),forEach:ti(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{e[i]=ei(i,!1,!1),n[i]=ei(i,!0,!1),t[i]=ei(i,!1,!0),r[i]=ei(i,!0,!0)}),[e,n,t,r]}const[yg,vg,Eg,Tg]=_g();function wc(e,t){const n=t?e?Tg:Eg:e?vg:yg;return(r,s,i)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(st(n,s)&&s in r?n:r,s,i)}const wg={get:wc(!1,!1)},Ig={get:wc(!1,!0)},Ag={get:wc(!0,!1)},yf=new WeakMap,vf=new WeakMap,Ef=new WeakMap,Rg=new WeakMap;function Sg(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Pg(e){return e.__v_skip||!Object.isExtensible(e)?0:Sg(Jm(e))}function Ns(e){return pr(e)?e:Ac(e,!1,pg,wg,yf)}function Tf(e){return Ac(e,!1,gg,Ig,vf)}function Ic(e){return Ac(e,!0,mg,Ag,Ef)}function Ac(e,t,n,r,s){if(!Et(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=s.get(e);if(i)return i;const o=Pg(e);if(o===0)return e;const a=new Proxy(e,o===2?r:n);return s.set(e,a),a}function an(e){return pr(e)?an(e.__v_raw):!!(e&&e.__v_isReactive)}function pr(e){return!!(e&&e.__v_isReadonly)}function Ii(e){return!!(e&&e.__v_isShallow)}function wf(e){return an(e)||pr(e)}function ot(e){const t=e&&e.__v_raw;return t?ot(t):e}function Ji(e){return Object.isExtensible(e)&&Ti(e,"__v_skip",!0),e}const us=e=>Et(e)?Ns(e):e,Rc=e=>Et(e)?Ic(e):e;class If{constructor(t,n,r,s){this.getter=t,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new yc(()=>t(this._value),()=>Qr(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=r}get value(){const t=ot(this);return(!t._cacheable||t.effect.dirty)&&Ue(t._value,t._value=t.effect.run())&&Qr(t,4),Sc(t),t.effect._dirtyLevel>=2&&Qr(t,2),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function Cg(e,t,n=!1){let r,s;const i=Q(e);return i?(r=e,s=he):(r=e.get,s=e.set),new If(r,s,i||!s,n)}function Sc(e){var t;on&&Nn&&(e=ot(e),ff(Nn,(t=e.dep)!=null?t:e.dep=pf(()=>e.dep=void 0,e instanceof If?e:void 0)))}function Qr(e,t=4,n){e=ot(e);const r=e.dep;r&&df(r,t)}function Vt(e){return!!(e&&e.__v_isRef===!0)}function ke(e){return Af(e,!1)}function bg(e){return Af(e,!0)}function Af(e,t){return Vt(e)?e:new Vg(e,t)}class Vg{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:ot(t),this._value=n?t:us(t)}get value(){return Sc(this),this._value}set value(t){const n=this.__v_isShallow||Ii(t)||pr(t);t=n?t:ot(t),Ue(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:us(t),Qr(this,4))}}function Mn(e){return Vt(e)?e.value:e}const Dg={get:(e,t,n)=>Mn(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return Vt(s)&&!Vt(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function Rf(e){return an(e)?e:new Proxy(e,Dg)}class xg{constructor(t){this.dep=void 0,this.__v_isRef=!0;const{get:n,set:r}=t(()=>Sc(this),()=>Qr(this));this._get=n,this._set=r}get value(){return this._get()}set value(t){this._set(t)}}function Sf(e){return new xg(e)}function Ng(e){const t=H(e)?new Array(e.length):{};for(const n in e)t[n]=Pf(e,n);return t}class Og{constructor(t,n,r){this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return lg(ot(this._object),this._key)}}class Mg{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function kg(e,t,n){return Vt(e)?e:Q(e)?new Mg(e):Et(e)&&arguments.length>1?Pf(e,t,n):ke(e)}function Pf(e,t,n){const r=e[t];return Vt(r)?r:new Og(e,t,n)}/**
* @vue/runtime-core v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function cn(e,t,n,r){try{return r?e(...r):e()}catch(s){Zi(s,t,n)}}function we(e,t,n,r){if(Q(e)){const i=cn(e,t,n,r);return i&&tf(i)&&i.catch(o=>{Zi(o,t,n)}),i}const s=[];for(let i=0;i<e.length;i++)s.push(we(e[i],t,n,r));return s}function Zi(e,t,n,r=!0){const s=t?t.vnode:null;if(t){let i=t.parent;const o=t.proxy,a=`https://vuejs.org/error-reference/#runtime-${n}`;for(;i;){const l=i.ec;if(l){for(let u=0;u<l.length;u++)if(l[u](e,o,a)===!1)return}i=i.parent}const c=t.appContext.config.errorHandler;if(c){cn(c,null,10,[e,o,a]);return}}Lg(e,n,s,r)}function Lg(e,t,n,r=!0){console.error(e)}let hs=!1,va=!1;const Yt=[];let xe=0;const ar=[];let tn=null,Sn=0;const Cf=Promise.resolve();let Pc=null;function Cc(e){const t=Pc||Cf;return e?t.then(this?e.bind(this):e):t}function Fg(e){let t=xe+1,n=Yt.length;for(;t<n;){const r=t+n>>>1,s=Yt[r],i=fs(s);i<e||i===e&&s.pre?t=r+1:n=r}return t}function bc(e){(!Yt.length||!Yt.includes(e,hs&&e.allowRecurse?xe+1:xe))&&(e.id==null?Yt.push(e):Yt.splice(Fg(e.id),0,e),bf())}function bf(){!hs&&!va&&(va=!0,Pc=Cf.then(Df))}function Ug(e){const t=Yt.indexOf(e);t>xe&&Yt.splice(t,1)}function Bg(e){H(e)?ar.push(...e):(!tn||!tn.includes(e,e.allowRecurse?Sn+1:Sn))&&ar.push(e),bf()}function eu(e,t,n=hs?xe+1:0){for(;n<Yt.length;n++){const r=Yt[n];if(r&&r.pre){if(e&&r.id!==e.uid)continue;Yt.splice(n,1),n--,r()}}}function Vf(e){if(ar.length){const t=[...new Set(ar)].sort((n,r)=>fs(n)-fs(r));if(ar.length=0,tn){tn.push(...t);return}for(tn=t,Sn=0;Sn<tn.length;Sn++)tn[Sn]();tn=null,Sn=0}}const fs=e=>e.id==null?1/0:e.id,$g=(e,t)=>{const n=fs(e)-fs(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function Df(e){va=!1,hs=!0,Yt.sort($g);const t=he;try{for(xe=0;xe<Yt.length;xe++){const n=Yt[xe];n&&n.active!==!1&&cn(n,null,14)}}finally{xe=0,Yt.length=0,Vf(),hs=!1,Pc=null,(Yt.length||ar.length)&&Df()}}function jg(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||gt;let s=n;const i=t.startsWith("update:"),o=i&&t.slice(7);if(o&&o in r){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:f}=r[u]||gt;f&&(s=n.map(p=>xt(p)?p.trim():p)),h&&(s=n.map(ma))}let a,c=r[a=Bo(t)]||r[a=Bo(Ae(t))];!c&&i&&(c=r[a=Bo($n(t))]),c&&we(c,e,6,s);const l=r[a+"Once"];if(l){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,we(l,e,6,s)}}function xf(e,t,n=!1){const r=t.emitsCache,s=r.get(e);if(s!==void 0)return s;const i=e.emits;let o={},a=!1;if(!Q(e)){const c=l=>{const u=xf(l,t,!0);u&&(a=!0,Lt(o,u))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!i&&!a?(Et(e)&&r.set(e,null),null):(H(i)?i.forEach(c=>o[c]=null):Lt(o,i),Et(e)&&r.set(e,o),o)}function to(e,t){return!e||!Gi(t)?!1:(t=t.slice(2).replace(/Once$/,""),st(e,t[0].toLowerCase()+t.slice(1))||st(e,$n(t))||st(e,t))}let bt=null,Nf=null;function Ai(e){const t=bt;return bt=e,Nf=e&&e.type.__scopeId||null,t}function Ea(e,t=bt,n){if(!t||e._n)return e;const r=(...s)=>{r._d&&hu(-1);const i=Ai(t);let o;try{o=e(...s)}finally{Ai(i),r._d&&hu(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function jo(e){const{type:t,vnode:n,proxy:r,withProxy:s,props:i,propsOptions:[o],slots:a,attrs:c,emit:l,render:u,renderCache:h,data:f,setupState:p,ctx:_,inheritAttrs:A}=e;let I,P;const L=Ai(e);try{if(n.shapeFlag&4){const X=s||r,J=X;I=De(u.call(J,X,h,i,p,f,_)),P=c}else{const X=t;I=De(X.length>1?X(i,{attrs:c,slots:a,emit:l}):X(i,null)),P=t.props?c:qg(c)}}catch(X){Jr.length=0,Zi(X,e,1),I=kt(pn)}let U=I;if(P&&A!==!1){const X=Object.keys(P),{shapeFlag:J}=U;X.length&&J&7&&(o&&X.some(dc)&&(P=Hg(P,o)),U=mr(U,P))}return n.dirs&&(U=mr(U),U.dirs=U.dirs?U.dirs.concat(n.dirs):n.dirs),n.transition&&(U.transition=n.transition),I=U,Ai(L),I}const qg=e=>{let t;for(const n in e)(n==="class"||n==="style"||Gi(n))&&((t||(t={}))[n]=e[n]);return t},Hg=(e,t)=>{const n={};for(const r in e)(!dc(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function Kg(e,t,n){const{props:r,children:s,component:i}=e,{props:o,children:a,patchFlag:c}=t,l=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?nu(r,o,l):!!o;if(c&8){const u=t.dynamicProps;for(let h=0;h<u.length;h++){const f=u[h];if(o[f]!==r[f]&&!to(l,f))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?nu(r,o,l):!0:!!o;return!1}function nu(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(t[i]!==e[i]&&!to(n,i))return!0}return!1}function zg({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const Of="components",Gg="directives";function Mf(e,t){return kf(Of,e,!0,t)||e}const Wg=Symbol.for("v-ndc");function sR(e){return kf(Gg,e)}function kf(e,t,n=!0,r=!1){const s=bt||Mt;if(s){const i=s.type;if(e===Of){const a=q_(i,!1);if(a&&(a===t||a===Ae(t)||a===Yi(Ae(t))))return i}const o=ru(s[e]||i[e],t)||ru(s.appContext[e],t);return!o&&r?i:o}}function ru(e,t){return e&&(e[t]||e[Ae(t)]||e[Yi(Ae(t))])}const Qg=e=>e.__isSuspense;function Yg(e,t){t&&t.pendingBranch?H(e)?t.effects.push(...e):t.effects.push(e):Bg(e)}const Xg=Symbol.for("v-scx"),Jg=()=>ve(Xg);function Zg(e,t){return Vc(e,null,{flush:"sync"})}const ni={};function cr(e,t,n){return Vc(e,t,n)}function Vc(e,t,{immediate:n,deep:r,flush:s,once:i,onTrack:o,onTrigger:a}=gt){if(t&&i){const q=t;t=(...mt)=>{q(...mt),J()}}const c=Mt,l=q=>r===!0?q:Cn(q,r===!1?1:void 0);let u,h=!1,f=!1;if(Vt(e)?(u=()=>e.value,h=Ii(e)):an(e)?(u=()=>l(e),h=!0):H(e)?(f=!0,h=e.some(q=>an(q)||Ii(q)),u=()=>e.map(q=>{if(Vt(q))return q.value;if(an(q))return l(q);if(Q(q))return cn(q,c,2)})):Q(e)?t?u=()=>cn(e,c,2):u=()=>(p&&p(),we(e,c,3,[_])):u=he,t&&r){const q=u;u=()=>Cn(q())}let p,_=q=>{p=U.onStop=()=>{cn(q,c,4),p=U.onStop=void 0}},A;if(io)if(_=he,t?n&&we(t,c,3,[u(),f?[]:void 0,_]):u(),s==="sync"){const q=Jg();A=q.__watcherHandles||(q.__watcherHandles=[])}else return he;let I=f?new Array(e.length).fill(ni):ni;const P=()=>{if(!(!U.active||!U.dirty))if(t){const q=U.run();(r||h||(f?q.some((mt,Z)=>Ue(mt,I[Z])):Ue(q,I)))&&(p&&p(),we(t,c,3,[q,I===ni?void 0:f&&I[0]===ni?[]:I,_]),I=q)}else U.run()};P.allowRecurse=!!t;let L;s==="sync"?L=P:s==="post"?L=()=>re(P,c&&c.suspense):(P.pre=!0,c&&(P.id=c.uid),L=()=>bc(P));const U=new yc(u,he,L),X=_c(),J=()=>{U.stop(),X&&pc(X.effects,U)};return t?n?P():I=U.run():s==="post"?re(U.run.bind(U),c&&c.suspense):U.run(),A&&A.push(J),J}function t_(e,t,n){const r=this.proxy,s=xt(e)?e.includes(".")?Lf(r,e):()=>r[e]:e.bind(r,r);let i;Q(t)?i=t:(i=t.handler,n=t);const o=Os(this),a=Vc(s,i.bind(r),n);return o(),a}function Lf(e,t){const n=t.split(".");return()=>{let r=e;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function Cn(e,t,n=0,r){if(!Et(e)||e.__v_skip)return e;if(t&&t>0){if(n>=t)return e;n++}if(r=r||new Set,r.has(e))return e;if(r.add(e),Vt(e))Cn(e.value,t,n,r);else if(H(e))for(let s=0;s<e.length;s++)Cn(e[s],t,n,r);else if(Zh(e)||or(e))e.forEach(s=>{Cn(s,t,n,r)});else if(nf(e))for(const s in e)Cn(e[s],t,n,r);return e}function iR(e,t){if(bt===null)return e;const n=oo(bt)||bt.proxy,r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[i,o,a,c=gt]=t[s];i&&(Q(i)&&(i={mounted:i,updated:i}),i.deep&&Cn(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:c}))}return e}function wn(e,t,n,r){const s=e.dirs,i=t&&t.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let c=a.dir[r];c&&(jn(),we(c,n,8,[e.el,a,e,t]),qn())}}/*! #__NO_SIDE_EFFECTS__ */function Ff(e,t){return Q(e)?(()=>Lt({name:e.name},t,{setup:e}))():e}const Yr=e=>!!e.type.__asyncLoader,Uf=e=>e.type.__isKeepAlive;function e_(e,t){Bf(e,"a",t)}function n_(e,t){Bf(e,"da",t)}function Bf(e,t,n=Mt){const r=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(eo(t,r,n),n){let s=n.parent;for(;s&&s.parent;)Uf(s.parent.vnode)&&r_(r,t,n,s),s=s.parent}}function r_(e,t,n,r){const s=eo(t,e,r,!0);jf(()=>{pc(r[t],s)},n)}function eo(e,t,n=Mt,r=!1){if(n){const s=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...o)=>{if(n.isUnmounted)return;jn();const a=Os(n),c=we(t,n,e,o);return a(),qn(),c});return r?s.unshift(i):s.push(i),i}}const Qe=e=>(t,n=Mt)=>(!io||e==="sp")&&eo(e,(...r)=>t(...r),n),s_=Qe("bm"),$f=Qe("m"),i_=Qe("bu"),o_=Qe("u"),a_=Qe("bum"),jf=Qe("um"),c_=Qe("sp"),l_=Qe("rtg"),u_=Qe("rtc");function h_(e,t=Mt){eo("ec",e,t)}function oR(e,t,n,r){let s;const i=n&&n[r];if(H(e)||xt(e)){s=new Array(e.length);for(let o=0,a=e.length;o<a;o++)s[o]=t(e[o],o,void 0,i&&i[o])}else if(typeof e=="number"){s=new Array(e);for(let o=0;o<e;o++)s[o]=t(o+1,o,void 0,i&&i[o])}else if(Et(e))if(e[Symbol.iterator])s=Array.from(e,(o,a)=>t(o,a,void 0,i&&i[a]));else{const o=Object.keys(e);s=new Array(o.length);for(let a=0,c=o.length;a<c;a++){const l=o[a];s[a]=t(e[l],l,a,i&&i[a])}}else s=[];return n&&(n[r]=s),s}function aR(e,t,n={},r,s){if(bt.isCE||bt.parent&&Yr(bt.parent)&&bt.parent.isCE)return t!=="default"&&(n.name=t),kt("slot",n,r&&r());let i=e[t];i&&i._c&&(i._d=!1),ro();const o=i&&qf(i(n)),a=ed(ge,{key:n.key||o&&o.key||`_${t}`},o||(r?r():[]),o&&e._===1?64:-2);return!s&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),i&&i._c&&(i._d=!0),a}function qf(e){return e.some(t=>Pi(t)?!(t.type===pn||t.type===ge&&!qf(t.children)):!0)?e:null}const Ta=e=>e?rd(e)?oo(e)||e.proxy:Ta(e.parent):null,Xr=Lt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ta(e.parent),$root:e=>Ta(e.root),$emit:e=>e.emit,$options:e=>Dc(e),$forceUpdate:e=>e.f||(e.f=()=>{e.effect.dirty=!0,bc(e.update)}),$nextTick:e=>e.n||(e.n=Cc.bind(e.proxy)),$watch:e=>t_.bind(e)}),qo=(e,t)=>e!==gt&&!e.__isScriptSetup&&st(e,t),f_={get({_:e},t){const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:c}=e;let l;if(t[0]!=="$"){const p=o[t];if(p!==void 0)switch(p){case 1:return r[t];case 2:return s[t];case 4:return n[t];case 3:return i[t]}else{if(qo(r,t))return o[t]=1,r[t];if(s!==gt&&st(s,t))return o[t]=2,s[t];if((l=e.propsOptions[0])&&st(l,t))return o[t]=3,i[t];if(n!==gt&&st(n,t))return o[t]=4,n[t];wa&&(o[t]=0)}}const u=Xr[t];let h,f;if(u)return t==="$attrs"&&oe(e,"get",t),u(e);if((h=a.__cssModules)&&(h=h[t]))return h;if(n!==gt&&st(n,t))return o[t]=4,n[t];if(f=c.config.globalProperties,st(f,t))return f[t]},set({_:e},t,n){const{data:r,setupState:s,ctx:i}=e;return qo(s,t)?(s[t]=n,!0):r!==gt&&st(r,t)?(r[t]=n,!0):st(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!n[o]||e!==gt&&st(e,o)||qo(t,o)||(a=i[0])&&st(a,o)||st(r,o)||st(Xr,o)||st(s.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:st(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Ri(e){return H(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}function cR(e,t){return!e||!t?e||t:H(e)&&H(t)?e.concat(t):Lt({},Ri(e),Ri(t))}let wa=!0;function d_(e){const t=Dc(e),n=e.proxy,r=e.ctx;wa=!1,t.beforeCreate&&su(t.beforeCreate,e,"bc");const{data:s,computed:i,methods:o,watch:a,provide:c,inject:l,created:u,beforeMount:h,mounted:f,beforeUpdate:p,updated:_,activated:A,deactivated:I,beforeDestroy:P,beforeUnmount:L,destroyed:U,unmounted:X,render:J,renderTracked:q,renderTriggered:mt,errorCaptured:Z,serverPrefetch:tt,expose:Tt,inheritAttrs:Kt,components:ae,directives:pe,filters:Tn}=t;if(l&&p_(l,r,null),o)for(const dt in o){const lt=o[dt];Q(lt)&&(r[dt]=lt.bind(n))}if(s){const dt=s.call(n,n);Et(dt)&&(e.data=Ns(dt))}if(wa=!0,i)for(const dt in i){const lt=i[dt],qe=Q(lt)?lt.bind(n,n):Q(lt.get)?lt.get.bind(n,n):he,Ye=!Q(lt)&&Q(lt.set)?lt.set.bind(n):he,Ce=ue({get:qe,set:Ye});Object.defineProperty(r,dt,{enumerable:!0,configurable:!0,get:()=>Ce.value,set:ne=>Ce.value=ne})}if(a)for(const dt in a)Hf(a[dt],r,n,dt);if(c){const dt=Q(c)?c.call(n):c;Reflect.ownKeys(dt).forEach(lt=>{di(lt,dt[lt])})}u&&su(u,e,"c");function at(dt,lt){H(lt)?lt.forEach(qe=>dt(qe.bind(n))):lt&&dt(lt.bind(n))}if(at(s_,h),at($f,f),at(i_,p),at(o_,_),at(e_,A),at(n_,I),at(h_,Z),at(u_,q),at(l_,mt),at(a_,L),at(jf,X),at(c_,tt),H(Tt))if(Tt.length){const dt=e.exposed||(e.exposed={});Tt.forEach(lt=>{Object.defineProperty(dt,lt,{get:()=>n[lt],set:qe=>n[lt]=qe})})}else e.exposed||(e.exposed={});J&&e.render===he&&(e.render=J),Kt!=null&&(e.inheritAttrs=Kt),ae&&(e.components=ae),pe&&(e.directives=pe)}function p_(e,t,n=he){H(e)&&(e=Ia(e));for(const r in e){const s=e[r];let i;Et(s)?"default"in s?i=ve(s.from||r,s.default,!0):i=ve(s.from||r):i=ve(s),Vt(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):t[r]=i}}function su(e,t,n){we(H(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function Hf(e,t,n,r){const s=r.includes(".")?Lf(n,r):()=>n[r];if(xt(e)){const i=t[e];Q(i)&&cr(s,i)}else if(Q(e))cr(s,e.bind(n));else if(Et(e))if(H(e))e.forEach(i=>Hf(i,t,n,r));else{const i=Q(e.handler)?e.handler.bind(n):t[e.handler];Q(i)&&cr(s,i,e)}}function Dc(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=e.appContext,a=i.get(t);let c;return a?c=a:!s.length&&!n&&!r?c=t:(c={},s.length&&s.forEach(l=>Si(c,l,o,!0)),Si(c,t,o)),Et(t)&&i.set(t,c),c}function Si(e,t,n,r=!1){const{mixins:s,extends:i}=t;i&&Si(e,i,n,!0),s&&s.forEach(o=>Si(e,o,n,!0));for(const o in t)if(!(r&&o==="expose")){const a=m_[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const m_={data:iu,props:ou,emits:ou,methods:$r,computed:$r,beforeCreate:te,created:te,beforeMount:te,mounted:te,beforeUpdate:te,updated:te,beforeDestroy:te,beforeUnmount:te,destroyed:te,unmounted:te,activated:te,deactivated:te,errorCaptured:te,serverPrefetch:te,components:$r,directives:$r,watch:__,provide:iu,inject:g_};function iu(e,t){return t?e?function(){return Lt(Q(e)?e.call(this,this):e,Q(t)?t.call(this,this):t)}:t:e}function g_(e,t){return $r(Ia(e),Ia(t))}function Ia(e){if(H(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function te(e,t){return e?[...new Set([].concat(e,t))]:t}function $r(e,t){return e?Lt(Object.create(null),e,t):t}function ou(e,t){return e?H(e)&&H(t)?[...new Set([...e,...t])]:Lt(Object.create(null),Ri(e),Ri(t??{})):t}function __(e,t){if(!e)return t;if(!t)return e;const n=Lt(Object.create(null),e);for(const r in t)n[r]=te(e[r],t[r]);return n}function Kf(){return{app:null,config:{isNativeTag:Ym,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let y_=0;function v_(e,t){return function(r,s=null){Q(r)||(r=Lt({},r)),s!=null&&!Et(s)&&(s=null);const i=Kf(),o=new WeakSet;let a=!1;const c=i.app={_uid:y_++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:K_,get config(){return i.config},set config(l){},use(l,...u){return o.has(l)||(l&&Q(l.install)?(o.add(l),l.install(c,...u)):Q(l)&&(o.add(l),l(c,...u))),c},mixin(l){return i.mixins.includes(l)||i.mixins.push(l),c},component(l,u){return u?(i.components[l]=u,c):i.components[l]},directive(l,u){return u?(i.directives[l]=u,c):i.directives[l]},mount(l,u,h){if(!a){const f=kt(r,s);return f.appContext=i,h===!0?h="svg":h===!1&&(h=void 0),u&&t?t(f,l):e(f,l,h),a=!0,c._container=l,l.__vue_app__=c,oo(f.component)||f.component.proxy}},unmount(){a&&(e(null,c._container),delete c._container.__vue_app__)},provide(l,u){return i.provides[l]=u,c},runWithContext(l){const u=lr;lr=c;try{return l()}finally{lr=u}}};return c}}let lr=null;function di(e,t){if(Mt){let n=Mt.provides;const r=Mt.parent&&Mt.parent.provides;r===n&&(n=Mt.provides=Object.create(r)),n[e]=t}}function ve(e,t,n=!1){const r=Mt||bt;if(r||lr){const s=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:lr._context.provides;if(s&&e in s)return s[e];if(arguments.length>1)return n&&Q(t)?t.call(r&&r.proxy):t}}function E_(){return!!(Mt||bt||lr)}function T_(e,t,n,r=!1){const s={},i={};Ti(i,so,1),e.propsDefaults=Object.create(null),zf(e,t,s,i);for(const o in e.propsOptions[0])o in s||(s[o]=void 0);n?e.props=r?s:Tf(s):e.type.props?e.props=s:e.props=i,e.attrs=i}function w_(e,t,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=e,a=ot(s),[c]=e.propsOptions;let l=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=e.vnode.dynamicProps;for(let h=0;h<u.length;h++){let f=u[h];if(to(e.emitsOptions,f))continue;const p=t[f];if(c)if(st(i,f))p!==i[f]&&(i[f]=p,l=!0);else{const _=Ae(f);s[_]=Aa(c,a,_,p,e,!1)}else p!==i[f]&&(i[f]=p,l=!0)}}}else{zf(e,t,s,i)&&(l=!0);let u;for(const h in a)(!t||!st(t,h)&&((u=$n(h))===h||!st(t,u)))&&(c?n&&(n[h]!==void 0||n[u]!==void 0)&&(s[h]=Aa(c,a,h,void 0,e,!0)):delete s[h]);if(i!==a)for(const h in i)(!t||!st(t,h))&&(delete i[h],l=!0)}l&&ze(e,"set","$attrs")}function zf(e,t,n,r){const[s,i]=e.propsOptions;let o=!1,a;if(t)for(let c in t){if(Wr(c))continue;const l=t[c];let u;s&&st(s,u=Ae(c))?!i||!i.includes(u)?n[u]=l:(a||(a={}))[u]=l:to(e.emitsOptions,c)||(!(c in r)||l!==r[c])&&(r[c]=l,o=!0)}if(i){const c=ot(n),l=a||gt;for(let u=0;u<i.length;u++){const h=i[u];n[h]=Aa(s,c,h,l[h],e,!st(l,h))}}return o}function Aa(e,t,n,r,s,i){const o=e[n];if(o!=null){const a=st(o,"default");if(a&&r===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&Q(c)){const{propsDefaults:l}=s;if(n in l)r=l[n];else{const u=Os(s);r=l[n]=c.call(null,t),u()}}else r=c}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===$n(n))&&(r=!0))}return r}function Gf(e,t,n=!1){const r=t.propsCache,s=r.get(e);if(s)return s;const i=e.props,o={},a=[];let c=!1;if(!Q(e)){const u=h=>{c=!0;const[f,p]=Gf(h,t,!0);Lt(o,f),p&&a.push(...p)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!i&&!c)return Et(e)&&r.set(e,ir),ir;if(H(i))for(let u=0;u<i.length;u++){const h=Ae(i[u]);au(h)&&(o[h]=gt)}else if(i)for(const u in i){const h=Ae(u);if(au(h)){const f=i[u],p=o[h]=H(f)||Q(f)?{type:f}:Lt({},f);if(p){const _=uu(Boolean,p.type),A=uu(String,p.type);p[0]=_>-1,p[1]=A<0||_<A,(_>-1||st(p,"default"))&&a.push(h)}}}const l=[o,a];return Et(e)&&r.set(e,l),l}function au(e){return e[0]!=="$"&&!Wr(e)}function cu(e){return e===null?"null":typeof e=="function"?e.name||"":typeof e=="object"&&e.constructor&&e.constructor.name||""}function lu(e,t){return cu(e)===cu(t)}function uu(e,t){return H(t)?t.findIndex(n=>lu(n,e)):Q(t)&&lu(t,e)?0:-1}const Wf=e=>e[0]==="_"||e==="$stable",xc=e=>H(e)?e.map(De):[De(e)],I_=(e,t,n)=>{if(t._n)return t;const r=Ea((...s)=>xc(t(...s)),n);return r._c=!1,r},Qf=(e,t,n)=>{const r=e._ctx;for(const s in e){if(Wf(s))continue;const i=e[s];if(Q(i))t[s]=I_(s,i,r);else if(i!=null){const o=xc(i);t[s]=()=>o}}},Yf=(e,t)=>{const n=xc(t);e.slots.default=()=>n},A_=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=ot(t),Ti(t,"_",n)):Qf(t,e.slots={})}else e.slots={},t&&Yf(e,t);Ti(e.slots,so,1)},R_=(e,t,n)=>{const{vnode:r,slots:s}=e;let i=!0,o=gt;if(r.shapeFlag&32){const a=t._;a?n&&a===1?i=!1:(Lt(s,t),!n&&a===1&&delete s._):(i=!t.$stable,Qf(t,s)),o=t}else t&&(Yf(e,t),o={default:1});if(i)for(const a in s)!Wf(a)&&o[a]==null&&delete s[a]};function Ra(e,t,n,r,s=!1){if(H(e)){e.forEach((f,p)=>Ra(f,t&&(H(t)?t[p]:t),n,r,s));return}if(Yr(r)&&!s)return;const i=r.shapeFlag&4?oo(r.component)||r.component.proxy:r.el,o=s?null:i,{i:a,r:c}=e,l=t&&t.r,u=a.refs===gt?a.refs={}:a.refs,h=a.setupState;if(l!=null&&l!==c&&(xt(l)?(u[l]=null,st(h,l)&&(h[l]=null)):Vt(l)&&(l.value=null)),Q(c))cn(c,a,12,[o,u]);else{const f=xt(c),p=Vt(c);if(f||p){const _=()=>{if(e.f){const A=f?st(h,c)?h[c]:u[c]:c.value;s?H(A)&&pc(A,i):H(A)?A.includes(i)||A.push(i):f?(u[c]=[i],st(h,c)&&(h[c]=u[c])):(c.value=[i],e.k&&(u[e.k]=c.value))}else f?(u[c]=o,st(h,c)&&(h[c]=o)):p&&(c.value=o,e.k&&(u[e.k]=o))};o?(_.id=-1,re(_,n)):_()}}}const re=Yg;function S_(e){return P_(e)}function P_(e,t){const n=rf();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:c,setText:l,setElementText:u,parentNode:h,nextSibling:f,setScopeId:p=he,insertStaticContent:_}=e,A=(d,m,g,T=null,y=null,C=null,N=void 0,S=null,b=!!m.dynamicChildren)=>{if(d===m)return;d&&!kr(d,m)&&(T=v(d),ne(d,y,C,!0),d=null),m.patchFlag===-2&&(b=!1,m.dynamicChildren=null);const{type:R,ref:k,shapeFlag:j}=m;switch(R){case no:I(d,m,g,T);break;case pn:P(d,m,g,T);break;case Ko:d==null&&L(m,g,T,N);break;case ge:ae(d,m,g,T,y,C,N,S,b);break;default:j&1?J(d,m,g,T,y,C,N,S,b):j&6?pe(d,m,g,T,y,C,N,S,b):(j&64||j&128)&&R.process(d,m,g,T,y,C,N,S,b,F)}k!=null&&y&&Ra(k,d&&d.ref,C,m||d,!m)},I=(d,m,g,T)=>{if(d==null)r(m.el=a(m.children),g,T);else{const y=m.el=d.el;m.children!==d.children&&l(y,m.children)}},P=(d,m,g,T)=>{d==null?r(m.el=c(m.children||""),g,T):m.el=d.el},L=(d,m,g,T)=>{[d.el,d.anchor]=_(d.children,m,g,T,d.el,d.anchor)},U=({el:d,anchor:m},g,T)=>{let y;for(;d&&d!==m;)y=f(d),r(d,g,T),d=y;r(m,g,T)},X=({el:d,anchor:m})=>{let g;for(;d&&d!==m;)g=f(d),s(d),d=g;s(m)},J=(d,m,g,T,y,C,N,S,b)=>{m.type==="svg"?N="svg":m.type==="math"&&(N="mathml"),d==null?q(m,g,T,y,C,N,S,b):tt(d,m,y,C,N,S,b)},q=(d,m,g,T,y,C,N,S)=>{let b,R;const{props:k,shapeFlag:j,transition:B,dirs:G}=d;if(b=d.el=o(d.type,C,k&&k.is,k),j&8?u(b,d.children):j&16&&Z(d.children,b,null,T,y,Ho(d,C),N,S),G&&wn(d,null,T,"created"),mt(b,d,d.scopeId,N,T),k){for(const pt in k)pt!=="value"&&!Wr(pt)&&i(b,pt,null,k[pt],C,d.children,T,y,zt);"value"in k&&i(b,"value",null,k.value,C),(R=k.onVnodeBeforeMount)&&Ve(R,T,d)}G&&wn(d,null,T,"beforeMount");const et=C_(y,B);et&&B.beforeEnter(b),r(b,m,g),((R=k&&k.onVnodeMounted)||et||G)&&re(()=>{R&&Ve(R,T,d),et&&B.enter(b),G&&wn(d,null,T,"mounted")},y)},mt=(d,m,g,T,y)=>{if(g&&p(d,g),T)for(let C=0;C<T.length;C++)p(d,T[C]);if(y){let C=y.subTree;if(m===C){const N=y.vnode;mt(d,N,N.scopeId,N.slotScopeIds,y.parent)}}},Z=(d,m,g,T,y,C,N,S,b=0)=>{for(let R=b;R<d.length;R++){const k=d[R]=S?en(d[R]):De(d[R]);A(null,k,m,g,T,y,C,N,S)}},tt=(d,m,g,T,y,C,N)=>{const S=m.el=d.el;let{patchFlag:b,dynamicChildren:R,dirs:k}=m;b|=d.patchFlag&16;const j=d.props||gt,B=m.props||gt;let G;if(g&&In(g,!1),(G=B.onVnodeBeforeUpdate)&&Ve(G,g,m,d),k&&wn(m,d,g,"beforeUpdate"),g&&In(g,!0),R?Tt(d.dynamicChildren,R,S,g,T,Ho(m,y),C):N||lt(d,m,S,null,g,T,Ho(m,y),C,!1),b>0){if(b&16)Kt(S,m,j,B,g,T,y);else if(b&2&&j.class!==B.class&&i(S,"class",null,B.class,y),b&4&&i(S,"style",j.style,B.style,y),b&8){const et=m.dynamicProps;for(let pt=0;pt<et.length;pt++){const It=et[pt],Nt=j[It],Ee=B[It];(Ee!==Nt||It==="value")&&i(S,It,Nt,Ee,y,d.children,g,T,zt)}}b&1&&d.children!==m.children&&u(S,m.children)}else!N&&R==null&&Kt(S,m,j,B,g,T,y);((G=B.onVnodeUpdated)||k)&&re(()=>{G&&Ve(G,g,m,d),k&&wn(m,d,g,"updated")},T)},Tt=(d,m,g,T,y,C,N)=>{for(let S=0;S<m.length;S++){const b=d[S],R=m[S],k=b.el&&(b.type===ge||!kr(b,R)||b.shapeFlag&70)?h(b.el):g;A(b,R,k,null,T,y,C,N,!0)}},Kt=(d,m,g,T,y,C,N)=>{if(g!==T){if(g!==gt)for(const S in g)!Wr(S)&&!(S in T)&&i(d,S,g[S],null,N,m.children,y,C,zt);for(const S in T){if(Wr(S))continue;const b=T[S],R=g[S];b!==R&&S!=="value"&&i(d,S,R,b,N,m.children,y,C,zt)}"value"in T&&i(d,"value",g.value,T.value,N)}},ae=(d,m,g,T,y,C,N,S,b)=>{const R=m.el=d?d.el:a(""),k=m.anchor=d?d.anchor:a("");let{patchFlag:j,dynamicChildren:B,slotScopeIds:G}=m;G&&(S=S?S.concat(G):G),d==null?(r(R,g,T),r(k,g,T),Z(m.children||[],g,k,y,C,N,S,b)):j>0&&j&64&&B&&d.dynamicChildren?(Tt(d.dynamicChildren,B,g,y,C,N,S),(m.key!=null||y&&m===y.subTree)&&Xf(d,m,!0)):lt(d,m,g,k,y,C,N,S,b)},pe=(d,m,g,T,y,C,N,S,b)=>{m.slotScopeIds=S,d==null?m.shapeFlag&512?y.ctx.activate(m,g,T,N,b):Tn(m,g,T,y,C,N,b):me(d,m,b)},Tn=(d,m,g,T,y,C,N)=>{const S=d.component=L_(d,T,y);if(Uf(d)&&(S.ctx.renderer=F),U_(S),S.asyncDep){if(y&&y.registerDep(S,at),!d.el){const b=S.subTree=kt(pn);P(null,b,m,g)}}else at(S,d,m,g,y,C,N)},me=(d,m,g)=>{const T=m.component=d.component;if(Kg(d,m,g))if(T.asyncDep&&!T.asyncResolved){dt(T,m,g);return}else T.next=m,Ug(T.update),T.effect.dirty=!0,T.update();else m.el=d.el,T.vnode=m},at=(d,m,g,T,y,C,N)=>{const S=()=>{if(d.isMounted){let{next:k,bu:j,u:B,parent:G,vnode:et}=d;{const Yn=Jf(d);if(Yn){k&&(k.el=et.el,dt(d,k,N)),Yn.asyncDep.then(()=>{d.isUnmounted||S()});return}}let pt=k,It;In(d,!1),k?(k.el=et.el,dt(d,k,N)):k=et,j&&fi(j),(It=k.props&&k.props.onVnodeBeforeUpdate)&&Ve(It,G,k,et),In(d,!0);const Nt=jo(d),Ee=d.subTree;d.subTree=Nt,A(Ee,Nt,h(Ee.el),v(Ee),d,y,C),k.el=Nt.el,pt===null&&zg(d,Nt.el),B&&re(B,y),(It=k.props&&k.props.onVnodeUpdated)&&re(()=>Ve(It,G,k,et),y)}else{let k;const{el:j,props:B}=m,{bm:G,m:et,parent:pt}=d,It=Yr(m);if(In(d,!1),G&&fi(G),!It&&(k=B&&B.onVnodeBeforeMount)&&Ve(k,pt,m),In(d,!0),j&&wt){const Nt=()=>{d.subTree=jo(d),wt(j,d.subTree,d,y,null)};It?m.type.__asyncLoader().then(()=>!d.isUnmounted&&Nt()):Nt()}else{const Nt=d.subTree=jo(d);A(null,Nt,g,T,d,y,C),m.el=Nt.el}if(et&&re(et,y),!It&&(k=B&&B.onVnodeMounted)){const Nt=m;re(()=>Ve(k,pt,Nt),y)}(m.shapeFlag&256||pt&&Yr(pt.vnode)&&pt.vnode.shapeFlag&256)&&d.a&&re(d.a,y),d.isMounted=!0,m=g=T=null}},b=d.effect=new yc(S,he,()=>bc(R),d.scope),R=d.update=()=>{b.dirty&&b.run()};R.id=d.uid,In(d,!0),R()},dt=(d,m,g)=>{m.component=d;const T=d.vnode.props;d.vnode=m,d.next=null,w_(d,m.props,T,g),R_(d,m.children,g),jn(),eu(d),qn()},lt=(d,m,g,T,y,C,N,S,b=!1)=>{const R=d&&d.children,k=d?d.shapeFlag:0,j=m.children,{patchFlag:B,shapeFlag:G}=m;if(B>0){if(B&128){Ye(R,j,g,T,y,C,N,S,b);return}else if(B&256){qe(R,j,g,T,y,C,N,S,b);return}}G&8?(k&16&&zt(R,y,C),j!==R&&u(g,j)):k&16?G&16?Ye(R,j,g,T,y,C,N,S,b):zt(R,y,C,!0):(k&8&&u(g,""),G&16&&Z(j,g,T,y,C,N,S,b))},qe=(d,m,g,T,y,C,N,S,b)=>{d=d||ir,m=m||ir;const R=d.length,k=m.length,j=Math.min(R,k);let B;for(B=0;B<j;B++){const G=m[B]=b?en(m[B]):De(m[B]);A(d[B],G,g,null,y,C,N,S,b)}R>k?zt(d,y,C,!0,!1,j):Z(m,g,T,y,C,N,S,b,j)},Ye=(d,m,g,T,y,C,N,S,b)=>{let R=0;const k=m.length;let j=d.length-1,B=k-1;for(;R<=j&&R<=B;){const G=d[R],et=m[R]=b?en(m[R]):De(m[R]);if(kr(G,et))A(G,et,g,null,y,C,N,S,b);else break;R++}for(;R<=j&&R<=B;){const G=d[j],et=m[B]=b?en(m[B]):De(m[B]);if(kr(G,et))A(G,et,g,null,y,C,N,S,b);else break;j--,B--}if(R>j){if(R<=B){const G=B+1,et=G<k?m[G].el:T;for(;R<=B;)A(null,m[R]=b?en(m[R]):De(m[R]),g,et,y,C,N,S,b),R++}}else if(R>B)for(;R<=j;)ne(d[R],y,C,!0),R++;else{const G=R,et=R,pt=new Map;for(R=et;R<=B;R++){const ce=m[R]=b?en(m[R]):De(m[R]);ce.key!=null&&pt.set(ce.key,R)}let It,Nt=0;const Ee=B-et+1;let Yn=!1,Hl=0;const Mr=new Array(Ee);for(R=0;R<Ee;R++)Mr[R]=0;for(R=G;R<=j;R++){const ce=d[R];if(Nt>=Ee){ne(ce,y,C,!0);continue}let be;if(ce.key!=null)be=pt.get(ce.key);else for(It=et;It<=B;It++)if(Mr[It-et]===0&&kr(ce,m[It])){be=It;break}be===void 0?ne(ce,y,C,!0):(Mr[be-et]=R+1,be>=Hl?Hl=be:Yn=!0,A(ce,m[be],g,null,y,C,N,S,b),Nt++)}const Kl=Yn?b_(Mr):ir;for(It=Kl.length-1,R=Ee-1;R>=0;R--){const ce=et+R,be=m[ce],zl=ce+1<k?m[ce+1].el:T;Mr[R]===0?A(null,be,g,zl,y,C,N,S,b):Yn&&(It<0||R!==Kl[It]?Ce(be,g,zl,2):It--)}}},Ce=(d,m,g,T,y=null)=>{const{el:C,type:N,transition:S,children:b,shapeFlag:R}=d;if(R&6){Ce(d.component.subTree,m,g,T);return}if(R&128){d.suspense.move(m,g,T);return}if(R&64){N.move(d,m,g,F);return}if(N===ge){r(C,m,g);for(let j=0;j<b.length;j++)Ce(b[j],m,g,T);r(d.anchor,m,g);return}if(N===Ko){U(d,m,g);return}if(T!==2&&R&1&&S)if(T===0)S.beforeEnter(C),r(C,m,g),re(()=>S.enter(C),y);else{const{leave:j,delayLeave:B,afterLeave:G}=S,et=()=>r(C,m,g),pt=()=>{j(C,()=>{et(),G&&G()})};B?B(C,et,pt):pt()}else r(C,m,g)},ne=(d,m,g,T=!1,y=!1)=>{const{type:C,props:N,ref:S,children:b,dynamicChildren:R,shapeFlag:k,patchFlag:j,dirs:B}=d;if(S!=null&&Ra(S,null,g,d,!0),k&256){m.ctx.deactivate(d);return}const G=k&1&&B,et=!Yr(d);let pt;if(et&&(pt=N&&N.onVnodeBeforeUnmount)&&Ve(pt,m,d),k&6)Ys(d.component,g,T);else{if(k&128){d.suspense.unmount(g,T);return}G&&wn(d,null,m,"beforeUnmount"),k&64?d.type.remove(d,m,g,y,F,T):R&&(C!==ge||j>0&&j&64)?zt(R,m,g,!1,!0):(C===ge&&j&384||!y&&k&16)&&zt(b,m,g),T&&Wn(d)}(et&&(pt=N&&N.onVnodeUnmounted)||G)&&re(()=>{pt&&Ve(pt,m,d),G&&wn(d,null,m,"unmounted")},g)},Wn=d=>{const{type:m,el:g,anchor:T,transition:y}=d;if(m===ge){Qn(g,T);return}if(m===Ko){X(d);return}const C=()=>{s(g),y&&!y.persisted&&y.afterLeave&&y.afterLeave()};if(d.shapeFlag&1&&y&&!y.persisted){const{leave:N,delayLeave:S}=y,b=()=>N(g,C);S?S(d.el,C,b):b()}else C()},Qn=(d,m)=>{let g;for(;d!==m;)g=f(d),s(d),d=g;s(m)},Ys=(d,m,g)=>{const{bum:T,scope:y,update:C,subTree:N,um:S}=d;T&&fi(T),y.stop(),C&&(C.active=!1,ne(N,d,m,g)),S&&re(S,m),re(()=>{d.isUnmounted=!0},m),m&&m.pendingBranch&&!m.isUnmounted&&d.asyncDep&&!d.asyncResolved&&d.suspenseId===m.pendingId&&(m.deps--,m.deps===0&&m.resolve())},zt=(d,m,g,T=!1,y=!1,C=0)=>{for(let N=C;N<d.length;N++)ne(d[N],m,g,T,y)},v=d=>d.shapeFlag&6?v(d.component.subTree):d.shapeFlag&128?d.suspense.next():f(d.anchor||d.el);let M=!1;const x=(d,m,g)=>{d==null?m._vnode&&ne(m._vnode,null,null,!0):A(m._vnode||null,d,m,null,null,null,g),M||(M=!0,eu(),Vf(),M=!1),m._vnode=d},F={p:A,um:ne,m:Ce,r:Wn,mt:Tn,mc:Z,pc:lt,pbc:Tt,n:v,o:e};let ut,wt;return t&&([ut,wt]=t(F)),{render:x,hydrate:ut,createApp:v_(x,ut)}}function Ho({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function In({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function C_(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Xf(e,t,n=!1){const r=e.children,s=t.children;if(H(r)&&H(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=en(s[i]),a.el=o.el),n||Xf(o,a)),a.type===no&&(a.el=o.el)}}function b_(e){const t=e.slice(),n=[0];let r,s,i,o,a;const c=e.length;for(r=0;r<c;r++){const l=e[r];if(l!==0){if(s=n[n.length-1],e[s]<l){t[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,e[n[a]]<l?i=a+1:o=a;l<e[n[i]]&&(i>0&&(t[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=t[o];return n}function Jf(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Jf(t)}const V_=e=>e.__isTeleport,ge=Symbol.for("v-fgt"),no=Symbol.for("v-txt"),pn=Symbol.for("v-cmt"),Ko=Symbol.for("v-stc"),Jr=[];let Te=null;function ro(e=!1){Jr.push(Te=e?null:[])}function D_(){Jr.pop(),Te=Jr[Jr.length-1]||null}let ds=1;function hu(e){ds+=e}function Zf(e){return e.dynamicChildren=ds>0?Te||ir:null,D_(),ds>0&&Te&&Te.push(e),e}function td(e,t,n,r,s,i){return Zf(_e(e,t,n,r,s,i,!0))}function ed(e,t,n,r,s){return Zf(kt(e,t,n,r,s,!0))}function Pi(e){return e?e.__v_isVNode===!0:!1}function kr(e,t){return e.type===t.type&&e.key===t.key}const so="__vInternal",nd=({key:e})=>e??null,pi=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?xt(e)||Vt(e)||Q(e)?{i:bt,r:e,k:t,f:!!n}:e:null);function _e(e,t=null,n=null,r=0,s=null,i=e===ge?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&nd(t),ref:t&&pi(t),scopeId:Nf,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:bt};return a?(Nc(c,n),i&128&&e.normalize(c)):n&&(c.shapeFlag|=xt(n)?8:16),ds>0&&!o&&Te&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Te.push(c),c}const kt=x_;function x_(e,t=null,n=null,r=0,s=null,i=!1){if((!e||e===Wg)&&(e=pn),Pi(e)){const a=mr(e,t,!0);return n&&Nc(a,n),ds>0&&!i&&Te&&(a.shapeFlag&6?Te[Te.indexOf(e)]=a:Te.push(a)),a.patchFlag|=-2,a}if(H_(e)&&(e=e.__vccOpts),t){t=N_(t);let{class:a,style:c}=t;a&&!xt(a)&&(t.class=ls(a)),Et(c)&&(wf(c)&&!H(c)&&(c=Lt({},c)),t.style=gc(c))}const o=xt(e)?1:Qg(e)?128:V_(e)?64:Et(e)?4:Q(e)?2:0;return _e(e,t,n,r,s,o,i,!0)}function N_(e){return e?wf(e)||so in e?Lt({},e):e:null}function mr(e,t,n=!1){const{props:r,ref:s,patchFlag:i,children:o}=e,a=t?O_(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&nd(a),ref:t&&t.ref?n&&s?H(s)?s.concat(pi(t)):[s,pi(t)]:pi(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ge?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&mr(e.ssContent),ssFallback:e.ssFallback&&mr(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function Sa(e=" ",t=0){return kt(no,null,e,t)}function lR(e="",t=!1){return t?(ro(),ed(pn,null,e)):kt(pn,null,e)}function De(e){return e==null||typeof e=="boolean"?kt(pn):H(e)?kt(ge,null,e.slice()):typeof e=="object"?en(e):kt(no,null,String(e))}function en(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:mr(e)}function Nc(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(H(t))n=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),Nc(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!(so in t)?t._ctx=bt:s===3&&bt&&(bt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Q(t)?(t={default:t,_ctx:bt},n=32):(t=String(t),r&64?(n=16,t=[Sa(t)]):n=8);e.children=t,e.shapeFlag|=n}function O_(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=ls([t.class,r.class]));else if(s==="style")t.style=gc([t.style,r.style]);else if(Gi(s)){const i=t[s],o=r[s];o&&i!==o&&!(H(i)&&i.includes(o))&&(t[s]=i?[].concat(i,o):o)}else s!==""&&(t[s]=r[s])}return t}function Ve(e,t,n,r=null){we(e,t,7,[n,r])}const M_=Kf();let k_=0;function L_(e,t,n){const r=e.type,s=(t?t.appContext:e.appContext)||M_,i={uid:k_++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new af(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Gf(r,s),emitsOptions:xf(r,s),emit:null,emitted:null,propsDefaults:gt,inheritAttrs:r.inheritAttrs,ctx:gt,data:gt,props:gt,attrs:gt,slots:gt,refs:gt,setupState:gt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=jg.bind(null,i),e.ce&&e.ce(i),i}let Mt=null;const F_=()=>Mt||bt;let Ci,Pa;{const e=rf(),t=(n,r)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};Ci=t("__VUE_INSTANCE_SETTERS__",n=>Mt=n),Pa=t("__VUE_SSR_SETTERS__",n=>io=n)}const Os=e=>{const t=Mt;return Ci(e),e.scope.on(),()=>{e.scope.off(),Ci(t)}},fu=()=>{Mt&&Mt.scope.off(),Ci(null)};function rd(e){return e.vnode.shapeFlag&4}let io=!1;function U_(e,t=!1){t&&Pa(t);const{props:n,children:r}=e.vnode,s=rd(e);T_(e,n,s,t),A_(e,r);const i=s?B_(e,t):void 0;return t&&Pa(!1),i}function B_(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=Ji(new Proxy(e.ctx,f_));const{setup:r}=n;if(r){const s=e.setupContext=r.length>1?j_(e):null,i=Os(e);jn();const o=cn(r,e,0,[e.props,s]);if(qn(),i(),tf(o)){if(o.then(fu,fu),t)return o.then(a=>{du(e,a,t)}).catch(a=>{Zi(a,e,0)});e.asyncDep=o}else du(e,o,t)}else sd(e,t)}function du(e,t,n){Q(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Et(t)&&(e.setupState=Rf(t)),sd(e,n)}let pu;function sd(e,t,n){const r=e.type;if(!e.render){if(!t&&pu&&!r.render){const s=r.template||Dc(e).template;if(s){const{isCustomElement:i,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:c}=r,l=Lt(Lt({isCustomElement:i,delimiters:a},o),c);r.render=pu(s,l)}}e.render=r.render||he}{const s=Os(e);jn();try{d_(e)}finally{qn(),s()}}}function $_(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,n){return oe(e,"get","$attrs"),t[n]}}))}function j_(e){const t=n=>{e.exposed=n||{}};return{get attrs(){return $_(e)},slots:e.slots,emit:e.emit,expose:t}}function oo(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Rf(Ji(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Xr)return Xr[n](e)},has(t,n){return n in t||n in Xr}}))}function q_(e,t=!0){return Q(e)?e.displayName||e.name:e.name||t&&e.__name}function H_(e){return Q(e)&&"__vccOpts"in e}const ue=(e,t)=>Cg(e,t,io);function uR(e,t,n=gt){const r=F_(),s=Ae(t),i=$n(t),o=Sf((c,l)=>{let u;return Zg(()=>{const h=e[t];Ue(u,h)&&(u=h,l())}),{get(){return c(),n.get?n.get(u):u},set(h){const f=r.vnode.props;!(f&&(t in f||s in f||i in f)&&(`onUpdate:${t}`in f||`onUpdate:${s}`in f||`onUpdate:${i}`in f))&&Ue(h,u)&&(u=h,l()),r.emit(`update:${t}`,n.set?n.set(h):h)}}}),a=t==="modelValue"?"modelModifiers":`${t}Modifiers`;return o[Symbol.iterator]=()=>{let c=0;return{next(){return c<2?{value:c++?e[a]||{}:o,done:!1}:{done:!0}}}},o}function id(e,t,n){const r=arguments.length;return r===2?Et(t)&&!H(t)?Pi(t)?kt(e,null,[t]):kt(e,t):kt(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Pi(n)&&(n=[n]),kt(e,t,n))}const K_="3.4.21";/**
* @vue/runtime-dom v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const z_="http://www.w3.org/2000/svg",G_="http://www.w3.org/1998/Math/MathML",nn=typeof document<"u"?document:null,mu=nn&&nn.createElement("template"),W_={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s=t==="svg"?nn.createElementNS(z_,e):t==="mathml"?nn.createElementNS(G_,e):nn.createElement(e,n?{is:n}:void 0);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>nn.createTextNode(e),createComment:e=>nn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>nn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,i){const o=n?n.previousSibling:t.lastChild;if(s&&(s===i||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{mu.innerHTML=r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e;const a=mu.content;if(r==="svg"||r==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Q_=Symbol("_vtc");function Y_(e,t,n){const r=e[Q_];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const gu=Symbol("_vod"),X_=Symbol("_vsh"),J_=Symbol(""),Z_=/(^|;)\s*display\s*:/;function ty(e,t,n){const r=e.style,s=xt(n);let i=!1;if(n&&!s){if(t)if(xt(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&mi(r,a,"")}else for(const o in t)n[o]==null&&mi(r,o,"");for(const o in n)o==="display"&&(i=!0),mi(r,o,n[o])}else if(s){if(t!==n){const o=r[J_];o&&(n+=";"+o),r.cssText=n,i=Z_.test(n)}}else t&&e.removeAttribute("style");gu in e&&(e[gu]=i?r.display:"",e[X_]&&(r.display="none"))}const _u=/\s*!important$/;function mi(e,t,n){if(H(n))n.forEach(r=>mi(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=ey(e,t);_u.test(n)?e.setProperty($n(r),n.replace(_u,""),"important"):e[r]=n}}const yu=["Webkit","Moz","ms"],zo={};function ey(e,t){const n=zo[t];if(n)return n;let r=Ae(t);if(r!=="filter"&&r in e)return zo[t]=r;r=Yi(r);for(let s=0;s<yu.length;s++){const i=yu[s]+r;if(i in e)return zo[t]=i}return t}const vu="http://www.w3.org/1999/xlink";function ny(e,t,n,r,s){if(r&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(vu,t.slice(6,t.length)):e.setAttributeNS(vu,t,n);else{const i=og(t);n==null||i&&!sf(n)?e.removeAttribute(t):e.setAttribute(t,i?"":n)}}function ry(e,t,n,r,s,i,o){if(t==="innerHTML"||t==="textContent"){r&&o(r,s,i),e[t]=n??"";return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const l=a==="OPTION"?e.getAttribute("value")||"":e.value,u=n??"";(l!==u||!("_value"in e))&&(e.value=u),n==null&&e.removeAttribute(t),e._value=n;return}let c=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=sf(n):n==null&&l==="string"?(n="",c=!0):l==="number"&&(n=0,c=!0)}try{e[t]=n}catch{}c&&e.removeAttribute(t)}function Zn(e,t,n,r){e.addEventListener(t,n,r)}function sy(e,t,n,r){e.removeEventListener(t,n,r)}const Eu=Symbol("_vei");function iy(e,t,n,r,s=null){const i=e[Eu]||(e[Eu]={}),o=i[t];if(r&&o)o.value=r;else{const[a,c]=oy(t);if(r){const l=i[t]=ly(r,s);Zn(e,a,l,c)}else o&&(sy(e,a,o,c),i[t]=void 0)}}const Tu=/(?:Once|Passive|Capture)$/;function oy(e){let t;if(Tu.test(e)){t={};let r;for(;r=e.match(Tu);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):$n(e.slice(2)),t]}let Go=0;const ay=Promise.resolve(),cy=()=>Go||(ay.then(()=>Go=0),Go=Date.now());function ly(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;we(uy(r,n.value),t,5,[r])};return n.value=e,n.attached=cy(),n}function uy(e,t){if(H(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const wu=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,hy=(e,t,n,r,s,i,o,a,c)=>{const l=s==="svg";t==="class"?Y_(e,r,l):t==="style"?ty(e,n,r):Gi(t)?dc(t)||iy(e,t,n,r,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):fy(e,t,r,l))?ry(e,t,r,i,o,a,c):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),ny(e,t,r,l))};function fy(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&wu(t)&&Q(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return wu(t)&&xt(n)?!1:t in e}const Iu=e=>{const t=e.props["onUpdate:modelValue"]||!1;return H(t)?n=>fi(t,n):t};function dy(e){e.target.composing=!0}function Au(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Wo=Symbol("_assign"),hR={created(e,{modifiers:{lazy:t,trim:n,number:r}},s){e[Wo]=Iu(s);const i=r||s.props&&s.props.type==="number";Zn(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;n&&(a=a.trim()),i&&(a=ma(a)),e[Wo](a)}),n&&Zn(e,"change",()=>{e.value=e.value.trim()}),t||(Zn(e,"compositionstart",dy),Zn(e,"compositionend",Au),Zn(e,"change",Au))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:r,number:s}},i){if(e[Wo]=Iu(i),e.composing)return;const o=s||e.type==="number"?ma(e.value):e.value,a=t??"";o!==a&&(document.activeElement===e&&e.type!=="range"&&(n||r&&e.value.trim()===a)||(e.value=a))}},py=["ctrl","shift","alt","meta"],my={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>py.some(n=>e[`${n}Key`]&&!t.includes(n))},gy=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join(".");return n[r]||(n[r]=(s,...i)=>{for(let o=0;o<t.length;o++){const a=my[t[o]];if(a&&a(s,t))return}return e(s,...i)})},_y=Lt({patchProp:hy},W_);let Ru;function yy(){return Ru||(Ru=S_(_y))}const vy=(...e)=>{const t=yy().createApp(...e),{mount:n}=t;return t.mount=r=>{const s=Ty(r);if(!s)return;const i=t._component;!Q(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.innerHTML="";const o=n(s,!1,Ey(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},t};function Ey(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Ty(e){return xt(e)?document.querySelector(e):e}var wy=!1;/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let od;const ao=e=>od=e,ad=Symbol();function Ca(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Zr;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Zr||(Zr={}));function Iy(){const e=cf(!0),t=e.run(()=>ke({}));let n=[],r=[];const s=Ji({install(i){ao(s),s._a=i,i.provide(ad,s),i.config.globalProperties.$pinia=s,r.forEach(o=>n.push(o)),r=[]},use(i){return!this._a&&!wy?r.push(i):n.push(i),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return s}const cd=()=>{};function Su(e,t,n,r=cd){e.push(t);const s=()=>{const i=e.indexOf(t);i>-1&&(e.splice(i,1),r())};return!n&&_c()&&lf(s),s}function Xn(e,...t){e.slice().forEach(n=>{n(...t)})}const Ay=e=>e();function ba(e,t){e instanceof Map&&t instanceof Map&&t.forEach((n,r)=>e.set(r,n)),e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],s=e[n];Ca(s)&&Ca(r)&&e.hasOwnProperty(n)&&!Vt(r)&&!an(r)?e[n]=ba(s,r):e[n]=r}return e}const Ry=Symbol();function Sy(e){return!Ca(e)||!e.hasOwnProperty(Ry)}const{assign:Ze}=Object;function Py(e){return!!(Vt(e)&&e.effect)}function Cy(e,t,n,r){const{state:s,actions:i,getters:o}=t,a=n.state.value[e];let c;function l(){a||(n.state.value[e]=s?s():{});const u=Ng(n.state.value[e]);return Ze(u,i,Object.keys(o||{}).reduce((h,f)=>(h[f]=Ji(ue(()=>{ao(n);const p=n._s.get(e);return o[f].call(p,p)})),h),{}))}return c=ld(e,l,t,n,r,!0),c}function ld(e,t,n={},r,s,i){let o;const a=Ze({actions:{}},n),c={deep:!0};let l,u,h=[],f=[],p;const _=r.state.value[e];!i&&!_&&(r.state.value[e]={}),ke({});let A;function I(Z){let tt;l=u=!1,typeof Z=="function"?(Z(r.state.value[e]),tt={type:Zr.patchFunction,storeId:e,events:p}):(ba(r.state.value[e],Z),tt={type:Zr.patchObject,payload:Z,storeId:e,events:p});const Tt=A=Symbol();Cc().then(()=>{A===Tt&&(l=!0)}),u=!0,Xn(h,tt,r.state.value[e])}const P=i?function(){const{state:tt}=n,Tt=tt?tt():{};this.$patch(Kt=>{Ze(Kt,Tt)})}:cd;function L(){o.stop(),h=[],f=[],r._s.delete(e)}function U(Z,tt){return function(){ao(r);const Tt=Array.from(arguments),Kt=[],ae=[];function pe(at){Kt.push(at)}function Tn(at){ae.push(at)}Xn(f,{args:Tt,name:Z,store:J,after:pe,onError:Tn});let me;try{me=tt.apply(this&&this.$id===e?this:J,Tt)}catch(at){throw Xn(ae,at),at}return me instanceof Promise?me.then(at=>(Xn(Kt,at),at)).catch(at=>(Xn(ae,at),Promise.reject(at))):(Xn(Kt,me),me)}}const X={_p:r,$id:e,$onAction:Su.bind(null,f),$patch:I,$reset:P,$subscribe(Z,tt={}){const Tt=Su(h,Z,tt.detached,()=>Kt()),Kt=o.run(()=>cr(()=>r.state.value[e],ae=>{(tt.flush==="sync"?u:l)&&Z({storeId:e,type:Zr.direct,events:p},ae)},Ze({},c,tt)));return Tt},$dispose:L},J=Ns(X);r._s.set(e,J);const mt=(r._a&&r._a.runWithContext||Ay)(()=>r._e.run(()=>(o=cf()).run(t)));for(const Z in mt){const tt=mt[Z];if(Vt(tt)&&!Py(tt)||an(tt))i||(_&&Sy(tt)&&(Vt(tt)?tt.value=_[Z]:ba(tt,_[Z])),r.state.value[e][Z]=tt);else if(typeof tt=="function"){const Tt=U(Z,tt);mt[Z]=Tt,a.actions[Z]=tt}}return Ze(J,mt),Ze(ot(J),mt),Object.defineProperty(J,"$state",{get:()=>r.state.value[e],set:Z=>{I(tt=>{Ze(tt,Z)})}}),r._p.forEach(Z=>{Ze(J,o.run(()=>Z({store:J,app:r._a,pinia:r,options:a})))}),_&&i&&n.hydrate&&n.hydrate(J.$state,_),l=!0,u=!0,J}function by(e,t,n){let r,s;const i=typeof t=="function";typeof e=="string"?(r=e,s=i?n:t):(s=e,r=e.id);function o(a,c){const l=E_();return a=a||(l?ve(ad,null):null),a&&ao(a),a=od,a._s.has(r)||(i?ld(r,t,s,a):Cy(r,s,a)),a._s.get(r)}return o.$id=r,o}function Vy(e){return _c()?(lf(e),!0):!1}function bi(e){return typeof e=="function"?e():Mn(e)}const ud=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Dy=Object.prototype.toString,xy=e=>Dy.call(e)==="[object Object]",ts=()=>{},Ny=Oy();function Oy(){var e,t;return ud&&((e=window==null?void 0:window.navigator)==null?void 0:e.userAgent)&&(/iP(ad|hone|od)/.test(window.navigator.userAgent)||((t=window==null?void 0:window.navigator)==null?void 0:t.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}const fR={mounted:"mounted",updated:"updated",unmounted:"unmounted"};function dR(...e){if(e.length!==1)return kg(...e);const t=e[0];return typeof t=="function"?Ic(Sf(()=>({get:t,set:ts}))):ke(t)}const My=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,ky=/[YMDHhms]o|\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a{1,2}|A{1,2}|m{1,2}|s{1,2}|Z{1,2}|SSS/g;function Ly(e,t,n,r){let s=e<12?"AM":"PM";return r&&(s=s.split("").reduce((i,o)=>i+=`${o}.`,"")),n?s.toLowerCase():s}function An(e){const t=["th","st","nd","rd"],n=e%100;return e+(t[(n-20)%10]||t[n]||t[0])}function Fy(e,t,n={}){var r;const s=e.getFullYear(),i=e.getMonth(),o=e.getDate(),a=e.getHours(),c=e.getMinutes(),l=e.getSeconds(),u=e.getMilliseconds(),h=e.getDay(),f=(r=n.customMeridiem)!=null?r:Ly,p={Yo:()=>An(s),YY:()=>String(s).slice(-2),YYYY:()=>s,M:()=>i+1,Mo:()=>An(i+1),MM:()=>`${i+1}`.padStart(2,"0"),MMM:()=>e.toLocaleDateString(n.locales,{month:"short"}),MMMM:()=>e.toLocaleDateString(n.locales,{month:"long"}),D:()=>String(o),Do:()=>An(o),DD:()=>`${o}`.padStart(2,"0"),H:()=>String(a),Ho:()=>An(a),HH:()=>`${a}`.padStart(2,"0"),h:()=>`${a%12||12}`.padStart(1,"0"),ho:()=>An(a%12||12),hh:()=>`${a%12||12}`.padStart(2,"0"),m:()=>String(c),mo:()=>An(c),mm:()=>`${c}`.padStart(2,"0"),s:()=>String(l),so:()=>An(l),ss:()=>`${l}`.padStart(2,"0"),SSS:()=>`${u}`.padStart(3,"0"),d:()=>h,dd:()=>e.toLocaleDateString(n.locales,{weekday:"narrow"}),ddd:()=>e.toLocaleDateString(n.locales,{weekday:"short"}),dddd:()=>e.toLocaleDateString(n.locales,{weekday:"long"}),A:()=>f(a,c),AA:()=>f(a,c,!1,!0),a:()=>f(a,c,!0),aa:()=>f(a,c,!0,!0)};return t.replace(ky,(_,A)=>{var I,P;return(P=A??((I=p[_])==null?void 0:I.call(p)))!=null?P:_})}function Uy(e){if(e===null)return new Date(Number.NaN);if(e===void 0)return new Date;if(e instanceof Date)return new Date(e);if(typeof e=="string"&&!/Z$/i.test(e)){const t=e.match(My);if(t){const n=t[2]-1||0,r=(t[7]||"0").substring(0,3);return new Date(t[1],n,t[3]||1,t[4]||0,t[5]||0,t[6]||0,r)}}return new Date(e)}function pR(e,t="HH:mm:ss",n={}){return ue(()=>Fy(Uy(bi(e)),bi(t),n))}function jr(e){var t;const n=bi(e);return(t=n==null?void 0:n.$el)!=null?t:n}const hd=ud?window:void 0;function Qo(...e){let t,n,r,s;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,r,s]=e,t=hd):[t,n,r,s]=e,!t)return ts;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const i=[],o=()=>{i.forEach(u=>u()),i.length=0},a=(u,h,f,p)=>(u.addEventListener(h,f,p),()=>u.removeEventListener(h,f,p)),c=cr(()=>[jr(t),bi(s)],([u,h])=>{if(o(),!u)return;const f=xy(h)?{...h}:h;i.push(...n.flatMap(p=>r.map(_=>a(u,p,_,f))))},{immediate:!0,flush:"post"}),l=()=>{c(),o()};return Vy(l),l}let Pu=!1;function By(e,t,n={}){const{window:r=hd,ignore:s=[],capture:i=!0,detectIframe:o=!1}=n;if(!r)return ts;Ny&&!Pu&&(Pu=!0,Array.from(r.document.body.children).forEach(f=>f.addEventListener("click",ts)),r.document.documentElement.addEventListener("click",ts));let a=!0;const c=f=>s.some(p=>{if(typeof p=="string")return Array.from(r.document.querySelectorAll(p)).some(_=>_===f.target||f.composedPath().includes(_));{const _=jr(p);return _&&(f.target===_||f.composedPath().includes(_))}}),u=[Qo(r,"click",f=>{const p=jr(e);if(!(!p||p===f.target||f.composedPath().includes(p))){if(f.detail===0&&(a=!c(f)),!a){a=!0;return}t(f)}},{passive:!0,capture:i}),Qo(r,"pointerdown",f=>{const p=jr(e);a=!c(f)&&!!(p&&!f.composedPath().includes(p))},{passive:!0}),o&&Qo(r,"blur",f=>{setTimeout(()=>{var p;const _=jr(e);((p=r.document.activeElement)==null?void 0:p.tagName)==="IFRAME"&&!(_!=null&&_.contains(r.document.activeElement))&&t(f)},0)})].filter(Boolean);return()=>u.forEach(f=>f())}const $y={class:"navbar is-success",role:"navigation","aria-label":"main navigation"},jy={class:"container is-max-desktop px-2"},qy=_e("div",{class:"navbar-item is-size-4 is-family-monospace"}," Noteballs ",-1),Hy=_e("span",{"aria-hidden":"true"},null,-1),Ky=_e("span",{"aria-hidden":"true"},null,-1),zy=_e("span",{"aria-hidden":"true"},null,-1),Gy=[Hy,Ky,zy],Wy={class:"navbar-end"},Qy={__name:"NavBar",setup(e){const t=ke(!1),n=ke(null),r=ke(null);return By(n,s=>{t.value=!1},{ignore:[r]}),(s,i)=>{const o=Mf("RouterLink");return ro(),td("nav",$y,[_e("div",jy,[_e("div",{class:"navbar-brand",ref_key:"navbarBurgerRef",ref:r},[qy,_e("a",{onClick:i[0]||(i[0]=gy(a=>t.value=!t.value,["prevent"])),class:ls([{"is-active":t.value},"navbar-burger"]),role:"button","aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample",ref_key:"navbarBurgerRef",ref:r},Gy,2)],512),_e("div",{class:ls([{"is-active":t.value},"navbar-menu"]),id:"navbarBasicExample",ref_key:"navbarMenuRef",ref:n},[_e("div",Wy,[kt(o,{to:"/notes","active-class":"is-active",onClick:i[1]||(i[1]=a=>t.value=!1),class:"navbar-item"},{default:Ea(()=>[Sa(" Notes ")]),_:1}),kt(o,{to:"/stats","active-class":"is-active",onClick:i[2]||(i[2]=a=>t.value=!1),class:"navbar-item"},{default:Ea(()=>[Sa(" Stats ")]),_:1})])],2)])])}}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fd=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},Yy=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=e[n++],o=e[n++],a=e[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{const i=e[n++],o=e[n++];t[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return t.join("")},dd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const i=e[s],o=s+1<e.length,a=o?e[s+1]:0,c=s+2<e.length,l=c?e[s+2]:0,u=i>>2,h=(i&3)<<4|a>>4;let f=(a&15)<<2|l>>6,p=l&63;c||(p=64,o||(f=64)),r.push(n[u],n[h],n[f],n[p])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(fd(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Yy(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const i=n[e.charAt(s++)],a=s<e.length?n[e.charAt(s)]:0;++s;const l=s<e.length?n[e.charAt(s)]:64;++s;const h=s<e.length?n[e.charAt(s)]:64;if(++s,i==null||a==null||l==null||h==null)throw new Xy;const f=i<<2|a>>4;if(r.push(f),l!==64){const p=a<<4&240|l>>2;if(r.push(p),h!==64){const _=l<<6&192|h;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Xy extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Jy=function(e){const t=fd(e);return dd.encodeByteArray(t,!0)},Vi=function(e){return Jy(e).replace(/\./g,"")},Zy=function(e){try{return dd.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev=()=>tv().__FIREBASE_DEFAULTS__,nv=()=>{if(typeof process>"u"||typeof process.env>"u")return;const e={}.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},rv=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&Zy(e[1]);return t&&JSON.parse(t)},Oc=()=>{try{return ev()||nv()||rv()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},sv=e=>{var t,n;return(n=(t=Oc())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},iv=e=>{const t=sv(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},pd=()=>{var e;return(e=Oc())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function av(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",s=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e),a="";return[Vi(JSON.stringify(n)),Vi(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Di(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cv(){var e;const t=(e=Oc())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lv(){return!cv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function md(){try{return typeof indexedDB=="object"}catch{return!1}}function uv(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;t(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv="FirebaseError";class Cr extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=hv,Object.setPrototypeOf(this,Cr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gd.prototype.create)}}class gd{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},s=`${this.service}/${t}`,i=this.errors[t],o=i?fv(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Cr(s,a,r)}}function fv(e,t){return e.replace(dv,(n,r)=>{const s=t[r];return s!=null?String(s):`<${r}?>`})}const dv=/\{\$([^}]+)}/g;function Va(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const i=e[s],o=t[s];if(Cu(i)&&Cu(o)){if(!Va(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Cu(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(e){return e&&e._delegate?e._delegate:e}class ps{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new ov;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(gv(t))try{this.getOrInitializeService({instanceIdentifier:Rn})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(t=Rn){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Rn){return this.instances.has(t)}getOptions(t=Rn){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(t,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(t),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&t(o,s),()=>{i.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:mv(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Rn){return this.component?this.component.multipleInstances?t:Rn:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mv(e){return e===Rn?void 0:e}function gv(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new pv(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(it||(it={}));const yv={debug:it.DEBUG,verbose:it.VERBOSE,info:it.INFO,warn:it.WARN,error:it.ERROR,silent:it.SILENT},vv=it.INFO,Ev={[it.DEBUG]:"log",[it.VERBOSE]:"log",[it.INFO]:"info",[it.WARN]:"warn",[it.ERROR]:"error"},Tv=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),s=Ev[t];if(s)console[s](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class _d{constructor(t){this.name=t,this._logLevel=vv,this._logHandler=Tv,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in it))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?yv[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,it.DEBUG,...t),this._logHandler(this,it.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,it.VERBOSE,...t),this._logHandler(this,it.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,it.INFO,...t),this._logHandler(this,it.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,it.WARN,...t),this._logHandler(this,it.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,it.ERROR,...t),this._logHandler(this,it.ERROR,...t)}}const wv=(e,t)=>t.some(n=>e instanceof n);let bu,Vu;function Iv(){return bu||(bu=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Av(){return Vu||(Vu=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const yd=new WeakMap,Da=new WeakMap,vd=new WeakMap,Yo=new WeakMap,Mc=new WeakMap;function Rv(e){const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{n(ln(e.result)),s()},o=()=>{r(e.error),s()};e.addEventListener("success",i),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&yd.set(n,e)}).catch(()=>{}),Mc.set(t,e),t}function Sv(e){if(Da.has(e))return;const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});Da.set(e,t)}let xa={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Da.get(e);if(t==="objectStoreNames")return e.objectStoreNames||vd.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ln(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Pv(e){xa=e(xa)}function Cv(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(Xo(this),t,...n);return vd.set(r,t.sort?t.sort():[t]),ln(r)}:Av().includes(e)?function(...t){return e.apply(Xo(this),t),ln(yd.get(this))}:function(...t){return ln(e.apply(Xo(this),t))}}function bv(e){return typeof e=="function"?Cv(e):(e instanceof IDBTransaction&&Sv(e),wv(e,Iv())?new Proxy(e,xa):e)}function ln(e){if(e instanceof IDBRequest)return Rv(e);if(Yo.has(e))return Yo.get(e);const t=bv(e);return t!==e&&(Yo.set(e,t),Mc.set(t,e)),t}const Xo=e=>Mc.get(e);function Vv(e,t,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(e,t),a=ln(o);return r&&o.addEventListener("upgradeneeded",c=>{r(ln(o.result),c.oldVersion,c.newVersion,ln(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",l=>s(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const Dv=["get","getKey","getAll","getAllKeys","count"],xv=["put","add","delete","clear"],Jo=new Map;function Du(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Jo.get(t))return Jo.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=xv.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Dv.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),s&&c.done]))[0]};return Jo.set(t,i),i}Pv(e=>({...e,get:(t,n,r)=>Du(t,n)||e.get(t,n,r),has:(t,n)=>!!Du(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Ov(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Ov(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Na="@firebase/app",xu="0.9.29";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ln=new _d("@firebase/app"),Mv="@firebase/app-compat",kv="@firebase/analytics-compat",Lv="@firebase/analytics",Fv="@firebase/app-check-compat",Uv="@firebase/app-check",Bv="@firebase/auth",$v="@firebase/auth-compat",jv="@firebase/database",qv="@firebase/database-compat",Hv="@firebase/functions",Kv="@firebase/functions-compat",zv="@firebase/installations",Gv="@firebase/installations-compat",Wv="@firebase/messaging",Qv="@firebase/messaging-compat",Yv="@firebase/performance",Xv="@firebase/performance-compat",Jv="@firebase/remote-config",Zv="@firebase/remote-config-compat",tE="@firebase/storage",eE="@firebase/storage-compat",nE="@firebase/firestore",rE="@firebase/firestore-compat",sE="firebase",iE="10.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa="[DEFAULT]",oE={[Na]:"fire-core",[Mv]:"fire-core-compat",[Lv]:"fire-analytics",[kv]:"fire-analytics-compat",[Uv]:"fire-app-check",[Fv]:"fire-app-check-compat",[Bv]:"fire-auth",[$v]:"fire-auth-compat",[jv]:"fire-rtdb",[qv]:"fire-rtdb-compat",[Hv]:"fire-fn",[Kv]:"fire-fn-compat",[zv]:"fire-iid",[Gv]:"fire-iid-compat",[Wv]:"fire-fcm",[Qv]:"fire-fcm-compat",[Yv]:"fire-perf",[Xv]:"fire-perf-compat",[Jv]:"fire-rc",[Zv]:"fire-rc-compat",[tE]:"fire-gcs",[eE]:"fire-gcs-compat",[nE]:"fire-fst",[rE]:"fire-fst-compat","fire-js":"fire-js",[sE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi=new Map,Ma=new Map;function aE(e,t){try{e.container.addComponent(t)}catch(n){Ln.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Ni(e){const t=e.name;if(Ma.has(t))return Ln.debug(`There were multiple attempts to register component ${t}.`),!1;Ma.set(t,e);for(const n of xi.values())aE(n,e);return!0}function cE(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},un=new gd("app","Firebase",lE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ps("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw un.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE=iE;function Ed(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:Oa,automaticDataCollectionEnabled:!1},t),s=r.name;if(typeof s!="string"||!s)throw un.create("bad-app-name",{appName:String(s)});if(n||(n=pd()),!n)throw un.create("no-options");const i=xi.get(s);if(i){if(Va(n,i.options)&&Va(r,i.config))return i;throw un.create("duplicate-app",{appName:s})}const o=new _v(s);for(const c of Ma.values())o.addComponent(c);const a=new uE(n,r,o);return xi.set(s,a),a}function fE(e=Oa){const t=xi.get(e);if(!t&&e===Oa&&pd())return Ed();if(!t)throw un.create("no-app",{appName:e});return t}function ur(e,t,n){var r;let s=(r=oE[e])!==null&&r!==void 0?r:e;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=t.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${t}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ln.warn(a.join(" "));return}Ni(new ps(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE="firebase-heartbeat-database",pE=1,ms="firebase-heartbeat-store";let Zo=null;function Td(){return Zo||(Zo=Vv(dE,pE,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(ms)}catch(n){console.warn(n)}}}}).catch(e=>{throw un.create("idb-open",{originalErrorMessage:e.message})})),Zo}async function mE(e){try{const n=(await Td()).transaction(ms),r=await n.objectStore(ms).get(wd(e));return await n.done,r}catch(t){if(t instanceof Cr)Ln.warn(t.message);else{const n=un.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Ln.warn(n.message)}}}async function Nu(e,t){try{const r=(await Td()).transaction(ms,"readwrite");await r.objectStore(ms).put(t,wd(e)),await r.done}catch(n){if(n instanceof Cr)Ln.warn(n.message);else{const r=un.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ln.warn(r.message)}}}function wd(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE=1024,_E=30*24*60*60*1e3;class yE{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new EE(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Ou();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=_E}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Ou(),{heartbeatsToSend:r,unsentEntries:s}=vE(this._heartbeatsCache.heartbeats),i=Vi(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Ou(){return new Date().toISOString().substring(0,10)}function vE(e,t=gE){const n=[];let r=e.slice();for(const s of e){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Mu(n)>t){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Mu(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class EE{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return md()?uv().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await mE(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Nu(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Nu(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function Mu(e){return Vi(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TE(e){Ni(new ps("platform-logger",t=>new Nv(t),"PRIVATE")),Ni(new ps("heartbeat",t=>new yE(t),"PRIVATE")),ur(Na,xu,e),ur(Na,xu,"esm2017"),ur("fire-js","")}TE("");var wE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},D,kc=kc||{},z=wE||self;function co(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function Ms(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function IE(e){return Object.prototype.hasOwnProperty.call(e,ta)&&e[ta]||(e[ta]=++AE)}var ta="closure_uid_"+(1e9*Math.random()>>>0),AE=0;function RE(e,t,n){return e.call.apply(e.bind,arguments)}function SE(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),e.apply(t,s)}}return function(){return e.apply(t,arguments)}}function Xt(e,t,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Xt=RE:Xt=SE,Xt.apply(null,arguments)}function ri(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),e.apply(this,r)}}function Ut(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return t.prototype[s].apply(r,o)}}function yn(){this.s=this.s,this.o=this.o}var PE=0;yn.prototype.s=!1;yn.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),PE!=0)&&IE(this)};yn.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Id=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Lc(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function ku(e,t){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(co(r)){const s=e.length||0,i=r.length||0;e.length=s+i;for(let o=0;o<i;o++)e[s+o]=r[o]}else e.push(r)}}function Jt(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Jt.prototype.h=function(){this.defaultPrevented=!0};var CE=function(){if(!z.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const n=()=>{};z.addEventListener("test",n,t),z.removeEventListener("test",n,t)}catch{}return e}();function gs(e){return/^[\s\xa0]*$/.test(e)}function lo(){var e=z.navigator;return e&&(e=e.userAgent)?e:""}function Ne(e){return lo().indexOf(e)!=-1}function Fc(e){return Fc[" "](e),e}Fc[" "]=function(){};function bE(e,t){var n=TT;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}var VE=Ne("Opera"),gr=Ne("Trident")||Ne("MSIE"),Ad=Ne("Edge"),ka=Ad||gr,Rd=Ne("Gecko")&&!(lo().toLowerCase().indexOf("webkit")!=-1&&!Ne("Edge"))&&!(Ne("Trident")||Ne("MSIE"))&&!Ne("Edge"),DE=lo().toLowerCase().indexOf("webkit")!=-1&&!Ne("Edge");function Sd(){var e=z.document;return e?e.documentMode:void 0}var La;t:{var ea="",na=function(){var e=lo();if(Rd)return/rv:([^\);]+)(\)|;)/.exec(e);if(Ad)return/Edge\/([\d\.]+)/.exec(e);if(gr)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(DE)return/WebKit\/(\S+)/.exec(e);if(VE)return/(?:Version)[ \/]?(\S+)/.exec(e)}();if(na&&(ea=na?na[1]:""),gr){var ra=Sd();if(ra!=null&&ra>parseFloat(ea)){La=String(ra);break t}}La=ea}var Fa;if(z.document&&gr){var Lu=Sd();Fa=Lu||parseInt(La,10)||void 0}else Fa=void 0;var xE=Fa;function _s(e,t){if(Jt.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Rd){t:{try{Fc(t.nodeName);var s=!0;break t}catch{}s=!1}s||(t=null)}}else n=="mouseover"?t=e.fromElement:n=="mouseout"&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:NE[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&_s.$.h.call(this)}}Ut(_s,Jt);var NE={2:"touch",3:"pen",4:"mouse"};_s.prototype.h=function(){_s.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ks="closure_listenable_"+(1e6*Math.random()|0),OE=0;function ME(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=s,this.key=++OE,this.fa=this.ia=!1}function uo(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Uc(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function kE(e,t){for(const n in e)t.call(void 0,e[n],n,e)}function Pd(e){const t={};for(const n in e)t[n]=e[n];return t}const Fu="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Cd(e,t){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)e[n]=r[n];for(let i=0;i<Fu.length;i++)n=Fu[i],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function ho(e){this.src=e,this.g={},this.h=0}ho.prototype.add=function(e,t,n,r,s){var i=e.toString();e=this.g[i],e||(e=this.g[i]=[],this.h++);var o=Ba(e,t,r,s);return-1<o?(t=e[o],n||(t.ia=!1)):(t=new ME(t,this.src,i,!!r,s),t.ia=n,e.push(t)),t};function Ua(e,t){var n=t.type;if(n in e.g){var r=e.g[n],s=Id(r,t),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(uo(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function Ba(e,t,n,r){for(var s=0;s<e.length;++s){var i=e[s];if(!i.fa&&i.listener==t&&i.capture==!!n&&i.la==r)return s}return-1}var Bc="closure_lm_"+(1e6*Math.random()|0),sa={};function bd(e,t,n,r,s){if(r&&r.once)return Dd(e,t,n,r,s);if(Array.isArray(t)){for(var i=0;i<t.length;i++)bd(e,t[i],n,r,s);return null}return n=qc(n),e&&e[ks]?e.O(t,n,Ms(r)?!!r.capture:!!r,s):Vd(e,t,n,!1,r,s)}function Vd(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");var o=Ms(s)?!!s.capture:!!s,a=jc(e);if(a||(e[Bc]=a=new ho(e)),n=a.add(t,n,r,o,i),n.proxy)return n;if(r=LE(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)CE||(s=o),s===void 0&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(Nd(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function LE(){function e(n){return t.call(e.src,e.listener,n)}const t=FE;return e}function Dd(e,t,n,r,s){if(Array.isArray(t)){for(var i=0;i<t.length;i++)Dd(e,t[i],n,r,s);return null}return n=qc(n),e&&e[ks]?e.P(t,n,Ms(r)?!!r.capture:!!r,s):Vd(e,t,n,!0,r,s)}function xd(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)xd(e,t[i],n,r,s);else r=Ms(r)?!!r.capture:!!r,n=qc(n),e&&e[ks]?(e=e.i,t=String(t).toString(),t in e.g&&(i=e.g[t],n=Ba(i,n,r,s),-1<n&&(uo(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete e.g[t],e.h--)))):e&&(e=jc(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Ba(t,n,r,s)),(n=-1<e?t[e]:null)&&$c(n))}function $c(e){if(typeof e!="number"&&e&&!e.fa){var t=e.src;if(t&&t[ks])Ua(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Nd(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=jc(t))?(Ua(n,e),n.h==0&&(n.src=null,t[Bc]=null)):uo(e)}}}function Nd(e){return e in sa?sa[e]:sa[e]="on"+e}function FE(e,t){if(e.fa)e=!0;else{t=new _s(t,this);var n=e.listener,r=e.la||e.src;e.ia&&$c(e),e=n.call(r,t)}return e}function jc(e){return e=e[Bc],e instanceof ho?e:null}var ia="__closure_events_fn_"+(1e9*Math.random()>>>0);function qc(e){return typeof e=="function"?e:(e[ia]||(e[ia]=function(t){return e.handleEvent(t)}),e[ia])}function Ft(){yn.call(this),this.i=new ho(this),this.S=this,this.J=null}Ut(Ft,yn);Ft.prototype[ks]=!0;Ft.prototype.removeEventListener=function(e,t,n,r){xd(this,e,t,n,r)};function qt(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,typeof t=="string")t=new Jt(t,e);else if(t instanceof Jt)t.target=t.target||e;else{var s=t;t=new Jt(r,e),Cd(t,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=t.g=n[i];s=si(o,r,!0,t)&&s}if(o=t.g=e,s=si(o,r,!0,t)&&s,s=si(o,r,!1,t)&&s,n)for(i=0;i<n.length;i++)o=t.g=n[i],s=si(o,r,!1,t)&&s}Ft.prototype.N=function(){if(Ft.$.N.call(this),this.i){var e=this.i,t;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)uo(n[r]);delete e.g[t],e.h--}}this.J=null};Ft.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)};Ft.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};function si(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var s=!0,i=0;i<t.length;++i){var o=t[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&Ua(e.i,o),s=a.call(c,r)!==!1&&s}}return s&&!r.defaultPrevented}var Hc=z.JSON.stringify;class UE{constructor(t,n){this.i=t,this.j=n,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}function BE(){var e=Kc;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class $E{constructor(){this.h=this.g=null}add(t,n){const r=Od.get();r.set(t,n),this.h?this.h.next=r:this.g=r,this.h=r}}var Od=new UE(()=>new jE,e=>e.reset());class jE{constructor(){this.next=this.g=this.h=null}set(t,n){this.h=t,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function qE(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function HE(e){z.setTimeout(()=>{throw e},0)}let ys,vs=!1,Kc=new $E,Md=()=>{const e=z.Promise.resolve(void 0);ys=()=>{e.then(KE)}};var KE=()=>{for(var e;e=BE();){try{e.h.call(e.g)}catch(n){HE(n)}var t=Od;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}vs=!1};function fo(e,t){Ft.call(this),this.h=e||1,this.g=t||z,this.j=Xt(this.qb,this),this.l=Date.now()}Ut(fo,Ft);D=fo.prototype;D.ga=!1;D.T=null;D.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),qt(this,"tick"),this.ga&&(zc(this),this.start()))}};D.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function zc(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}D.N=function(){fo.$.N.call(this),zc(this),delete this.g};function Gc(e,t,n){if(typeof e=="function")n&&(e=Xt(e,n));else if(e&&typeof e.handleEvent=="function")e=Xt(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:z.setTimeout(e,t||0)}function kd(e){e.g=Gc(()=>{e.g=null,e.i&&(e.i=!1,kd(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}class zE extends yn{constructor(t,n){super(),this.m=t,this.j=n,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:kd(this)}N(){super.N(),this.g&&(z.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Es(e){yn.call(this),this.h=e,this.g={}}Ut(Es,yn);var Uu=[];function Ld(e,t,n,r){Array.isArray(n)||(n&&(Uu[0]=n.toString()),n=Uu);for(var s=0;s<n.length;s++){var i=bd(t,n[s],r||e.handleEvent,!1,e.h||e);if(!i)break;e.g[i.key]=i}}function Fd(e){Uc(e.g,function(t,n){this.g.hasOwnProperty(n)&&$c(t)},e),e.g={}}Es.prototype.N=function(){Es.$.N.call(this),Fd(this)};Es.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function po(){this.g=!0}po.prototype.Ea=function(){this.g=!1};function GE(e,t,n,r,s,i){e.info(function(){if(e.g)if(i)for(var o="",a=i.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+l+"&"):o+(u+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+`
`+n+`
`+o})}function WE(e,t,n,r,s,i,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+`
`+n+`
`+i+" "+o})}function sr(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+YE(e,n)+(r?" "+r:"")})}function QE(e,t){e.info(function(){return"TIMEOUT: "+t})}po.prototype.info=function(){};function YE(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return Hc(n)}catch{return t}}var Hn={},Bu=null;function mo(){return Bu=Bu||new Ft}Hn.Ta="serverreachability";function Ud(e){Jt.call(this,Hn.Ta,e)}Ut(Ud,Jt);function Ts(e){const t=mo();qt(t,new Ud(t))}Hn.STAT_EVENT="statevent";function Bd(e,t){Jt.call(this,Hn.STAT_EVENT,e),this.stat=t}Ut(Bd,Jt);function ee(e){const t=mo();qt(t,new Bd(t,e))}Hn.Ua="timingevent";function $d(e,t){Jt.call(this,Hn.Ua,e),this.size=t}Ut($d,Jt);function Ls(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return z.setTimeout(function(){e()},t)}var go={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},jd={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Wc(){}Wc.prototype.h=null;function $u(e){return e.h||(e.h=e.i())}function qd(){}var Fs={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Qc(){Jt.call(this,"d")}Ut(Qc,Jt);function Yc(){Jt.call(this,"c")}Ut(Yc,Jt);var $a;function _o(){}Ut(_o,Wc);_o.prototype.g=function(){return new XMLHttpRequest};_o.prototype.i=function(){return{}};$a=new _o;function Us(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Es(this),this.P=XE,e=ka?125:void 0,this.V=new fo(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Hd}function Hd(){this.i=null,this.g="",this.h=!1}var XE=45e3,Kd={},ja={};D=Us.prototype;D.setTimeout=function(e){this.P=e};function qa(e,t,n){e.L=1,e.A=vo(Ge(t)),e.u=n,e.S=!0,zd(e,null)}function zd(e,t){e.G=Date.now(),Bs(e),e.B=Ge(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),tp(n.i,"t",r),e.o=0,n=e.l.J,e.h=new Hd,e.g=Tp(e.l,n?t:null,!e.u),0<e.O&&(e.M=new zE(Xt(e.Pa,e,e.g),e.O)),Ld(e.U,e.g,"readystatechange",e.nb),t=e.I?Pd(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),Ts(),GE(e.j,e.v,e.B,e.m,e.W,e.u)}D.nb=function(e){e=e.target;const t=this.M;t&&Oe(e)==3?t.l():this.Pa(e)};D.Pa=function(e){try{if(e==this.g)t:{const u=Oe(this.g);var t=this.g.Ia();const h=this.g.da();if(!(3>u)&&(u!=3||ka||this.g&&(this.h.h||this.g.ja()||Ku(this.g)))){this.J||u!=4||t==7||(t==8||0>=h?Ts(3):Ts(2)),yo(this);var n=this.g.da();this.ca=n;e:if(Gd(this)){var r=Ku(this.g);e="";var s=r.length,i=Oe(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){bn(this),es(this);var o="";break e}this.h.i=new z.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:i&&t==s-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,WE(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){e:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!gs(a)){var l=a;break e}}l=null}if(n=l)sr(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ha(this,n);else{this.i=!1,this.s=3,ee(12),bn(this),es(this);break t}}this.S?(Wd(this,u,o),ka&&this.i&&u==3&&(Ld(this.U,this.V,"tick",this.mb),this.V.start())):(sr(this.j,this.m,o,null),Ha(this,o)),u==4&&bn(this),this.i&&!this.J&&(u==4?_p(this.l,this):(this.i=!1,Bs(this)))}else yT(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,ee(12)):(this.s=0,ee(13)),bn(this),es(this)}}}catch{}finally{}};function Gd(e){return e.g?e.v=="GET"&&e.L!=2&&e.l.Ha:!1}function Wd(e,t,n){let r=!0,s;for(;!e.J&&e.o<n.length;)if(s=JE(e,n),s==ja){t==4&&(e.s=4,ee(14),r=!1),sr(e.j,e.m,null,"[Incomplete Response]");break}else if(s==Kd){e.s=4,ee(15),sr(e.j,e.m,n,"[Invalid Chunk]"),r=!1;break}else sr(e.j,e.m,s,null),Ha(e,s);Gd(e)&&e.o!=0&&(e.h.g=e.h.g.slice(e.o),e.o=0),t!=4||n.length!=0||e.h.h||(e.s=1,ee(16),r=!1),e.i=e.i&&r,r?0<n.length&&!e.ba&&(e.ba=!0,t=e.l,t.g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),nl(t),t.M=!0,ee(11))):(sr(e.j,e.m,n,"[Invalid Chunked Response]"),bn(e),es(e))}D.mb=function(){if(this.g){var e=Oe(this.g),t=this.g.ja();this.o<t.length&&(yo(this),Wd(this,e,t),this.i&&e!=4&&Bs(this))}};function JE(e,t){var n=e.o,r=t.indexOf(`
`,n);return r==-1?ja:(n=Number(t.substring(n,r)),isNaN(n)?Kd:(r+=1,r+n>t.length?ja:(t=t.slice(r,r+n),e.o=r+n,t)))}D.cancel=function(){this.J=!0,bn(this)};function Bs(e){e.Y=Date.now()+e.P,Qd(e,e.P)}function Qd(e,t){if(e.C!=null)throw Error("WatchDog timer not null");e.C=Ls(Xt(e.lb,e),t)}function yo(e){e.C&&(z.clearTimeout(e.C),e.C=null)}D.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(QE(this.j,this.B),this.L!=2&&(Ts(),ee(17)),bn(this),this.s=2,es(this)):Qd(this,this.Y-e)};function es(e){e.l.H==0||e.J||_p(e.l,e)}function bn(e){yo(e);var t=e.M;t&&typeof t.sa=="function"&&t.sa(),e.M=null,zc(e.V),Fd(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Ha(e,t){try{var n=e.l;if(n.H!=0&&(n.g==e||Ka(n.i,e))){if(!e.K&&Ka(n.i,e)&&n.H==3){try{var r=n.Ja.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){t:if(!n.u){if(n.g)if(n.g.G+3e3<e.G)ki(n),Io(n);else break t;el(n),ee(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=Ls(Xt(n.ib,n),6e3));if(1>=rp(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Vn(n,11)}else if((e.K||n.g==e)&&ki(n),!gs(t))for(s=n.Ja.g.parse(t),t=0;t<s.length;t++){let l=s[t];if(n.V=l[0],l=l[1],n.H==2)if(l[0]=="c"){n.K=l[1],n.pa=l[2];const u=l[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));const h=l[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const f=l[5];f!=null&&typeof f=="number"&&0<f&&(r=1.5*f,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const p=e.g;if(p){const _=p.g?p.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_){var i=r.i;i.g||_.indexOf("spdy")==-1&&_.indexOf("quic")==-1&&_.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(Xc(i,i.h),i.h=null))}if(r.F){const A=p.g?p.g.getResponseHeader("X-HTTP-Session-Id"):null;A&&(r.Da=A,yt(r.I,r.F,A))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=e;if(r.wa=Ep(r,r.J?r.pa:null,r.Y),o.K){sp(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.C&&(yo(a),Bs(a)),r.g=o}else mp(r);0<n.j.length&&Ao(n)}else l[0]!="stop"&&l[0]!="close"||Vn(n,7);else n.H==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?Vn(n,7):tl(n):l[0]!="noop"&&n.h&&n.h.Aa(l),n.A=0)}}Ts(4)}catch{}}function ZE(e){if(e.Z&&typeof e.Z=="function")return e.Z();if(typeof Map<"u"&&e instanceof Map||typeof Set<"u"&&e instanceof Set)return Array.from(e.values());if(typeof e=="string")return e.split("");if(co(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}t=[],n=0;for(r in e)t[n++]=e[r];return t}function tT(e){if(e.ta&&typeof e.ta=="function")return e.ta();if(!e.Z||typeof e.Z!="function"){if(typeof Map<"u"&&e instanceof Map)return Array.from(e.keys());if(!(typeof Set<"u"&&e instanceof Set)){if(co(e)||typeof e=="string"){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}function Yd(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if(co(e)||typeof e=="string")Array.prototype.forEach.call(e,t,void 0);else for(var n=tT(e),r=ZE(e),s=r.length,i=0;i<s;i++)t.call(void 0,r[i],n&&n[i],e)}var Xd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function eT(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var i=e[n].substring(0,r);s=e[n].substring(r+1)}else i=e[n];t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function kn(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof kn){this.h=e.h,Oi(this,e.j),this.s=e.s,this.g=e.g,Mi(this,e.m),this.l=e.l;var t=e.i,n=new ws;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ju(this,n),this.o=e.o}else e&&(t=String(e).match(Xd))?(this.h=!1,Oi(this,t[1]||"",!0),this.s=qr(t[2]||""),this.g=qr(t[3]||"",!0),Mi(this,t[4]),this.l=qr(t[5]||"",!0),ju(this,t[6]||"",!0),this.o=qr(t[7]||"")):(this.h=!1,this.i=new ws(null,this.h))}kn.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Hr(t,qu,!0),":");var n=this.g;return(n||t=="file")&&(e.push("//"),(t=this.s)&&e.push(Hr(t,qu,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&e.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&e.push("/"),e.push(Hr(n,n.charAt(0)=="/"?sT:rT,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Hr(n,oT)),e.join("")};function Ge(e){return new kn(e)}function Oi(e,t,n){e.j=n?qr(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Mi(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function ju(e,t,n){t instanceof ws?(e.i=t,aT(e.i,e.h)):(n||(t=Hr(t,iT)),e.i=new ws(t,e.h))}function yt(e,t,n){e.i.set(t,n)}function vo(e){return yt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function qr(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Hr(e,t,n){return typeof e=="string"?(e=encodeURI(e).replace(t,nT),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function nT(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var qu=/[#\/\?@]/g,rT=/[#\?:]/g,sT=/[#\?]/g,iT=/[#\?@]/g,oT=/#/g;function ws(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function vn(e){e.g||(e.g=new Map,e.h=0,e.i&&eT(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}D=ws.prototype;D.add=function(e,t){vn(this),this.i=null,e=br(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function Jd(e,t){vn(e),t=br(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Zd(e,t){return vn(e),t=br(e,t),e.g.has(t)}D.forEach=function(e,t){vn(this),this.g.forEach(function(n,r){n.forEach(function(s){e.call(t,s,r,this)},this)},this)};D.ta=function(){vn(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let i=0;i<s.length;i++)n.push(t[r])}return n};D.Z=function(e){vn(this);let t=[];if(typeof e=="string")Zd(this,e)&&(t=t.concat(this.g.get(br(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t};D.set=function(e,t){return vn(this),this.i=null,e=br(this,e),Zd(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this};D.get=function(e,t){return e?(e=this.Z(e),0<e.length?String(e[0]):t):t};function tp(e,t,n){Jd(e,t),0<n.length&&(e.i=null,e.g.set(br(e,t),Lc(n)),e.h+=n.length)}D.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),e.push(s)}}return this.i=e.join("&")};function br(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function aT(e,t){t&&!e.j&&(vn(e),e.i=null,e.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(Jd(this,r),tp(this,s,n))},e)),e.j=t}var cT=class{constructor(e,t){this.g=e,this.map=t}};function ep(e){this.l=e||lT,z.PerformanceNavigationTiming?(e=z.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!(z.g&&z.g.Ka&&z.g.Ka()&&z.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var lT=10;function np(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function rp(e){return e.h?1:e.g?e.g.size:0}function Ka(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function Xc(e,t){e.g?e.g.add(t):e.h=t}function sp(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}ep.prototype.cancel=function(){if(this.i=ip(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const e of this.g.values())e.cancel();this.g.clear()}};function ip(e){if(e.h!=null)return e.i.concat(e.h.F);if(e.g!=null&&e.g.size!==0){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Lc(e.i)}var uT=class{stringify(e){return z.JSON.stringify(e,void 0)}parse(e){return z.JSON.parse(e,void 0)}};function hT(){this.g=new uT}function fT(e,t,n){const r=n||"";try{Yd(e,function(s,i){let o=s;Ms(s)&&(o=Hc(s)),t.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw t.push(r+"type="+encodeURIComponent("_badmap")),s}}function dT(e,t){const n=new po;if(z.Image){const r=new Image;r.onload=ri(ii,n,r,"TestLoadImage: loaded",!0,t),r.onerror=ri(ii,n,r,"TestLoadImage: error",!1,t),r.onabort=ri(ii,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=ri(ii,n,r,"TestLoadImage: timeout",!1,t),z.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function ii(e,t,n,r,s){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,s(r)}catch{}}function Eo(e){this.l=e.ec||null,this.j=e.ob||!1}Ut(Eo,Wc);Eo.prototype.g=function(){return new To(this.l,this.j)};Eo.prototype.i=function(e){return function(){return e}}({});function To(e,t){Ft.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Jc,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ut(To,Ft);var Jc=0;D=To.prototype;D.open=function(e,t){if(this.readyState!=Jc)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Is(this)};D.send=function(e){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||z).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))};D.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$s(this)),this.readyState=Jc};D.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Is(this)),this.g&&(this.readyState=3,Is(this),this.g)))if(this.responseType==="arraybuffer")e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof z.ReadableStream<"u"&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;op(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))};function op(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}D.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?$s(this):Is(this),this.readyState==3&&op(this)}};D.Za=function(e){this.g&&(this.response=this.responseText=e,$s(this))};D.Ya=function(e){this.g&&(this.response=e,$s(this))};D.ka=function(){this.g&&$s(this)};function $s(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Is(e)}D.setRequestHeader=function(e,t){this.v.append(e,t)};D.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""};D.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join(`\r
`)};function Is(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(To.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(e){this.m=e?"include":"same-origin"}});var pT=z.JSON.parse;function Rt(e){Ft.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=ap,this.L=this.M=!1}Ut(Rt,Ft);var ap="",mT=/^https?$/i,gT=["POST","PUT"];D=Rt.prototype;D.Oa=function(e){this.M=e};D.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():$a.g(),this.C=this.u?$u(this.u):$u($a),this.g.onreadystatechange=Xt(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(i){Hu(this,i);return}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=z.FormData&&e instanceof z.FormData,!(0<=Id(gT,t))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{up(this),0<this.B&&((this.L=_T(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Xt(this.ua,this)):this.A=Gc(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(i){Hu(this,i)}};function _T(e){return gr&&typeof e.timeout=="number"&&e.ontimeout!==void 0}D.ua=function(){typeof kc<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,qt(this,"timeout"),this.abort(8))};function Hu(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,cp(e),wo(e)}function cp(e){e.F||(e.F=!0,qt(e,"complete"),qt(e,"error"))}D.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,qt(this,"complete"),qt(this,"abort"),wo(this))};D.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),wo(this,!0)),Rt.$.N.call(this)};D.La=function(){this.s||(this.G||this.v||this.l?lp(this):this.kb())};D.kb=function(){lp(this)};function lp(e){if(e.h&&typeof kc<"u"&&(!e.C[1]||Oe(e)!=4||e.da()!=2)){if(e.v&&Oe(e)==4)Gc(e.La,0,e);else if(qt(e,"readystatechange"),Oe(e)==4){e.h=!1;try{const o=e.da();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break t;default:t=!1}var n;if(!(n=t)){var r;if(r=o===0){var s=String(e.I).match(Xd)[1]||null;!s&&z.self&&z.self.location&&(s=z.self.location.protocol.slice(0,-1)),r=!mT.test(s?s.toLowerCase():"")}n=r}if(n)qt(e,"complete"),qt(e,"success");else{e.m=6;try{var i=2<Oe(e)?e.g.statusText:""}catch{i=""}e.j=i+" ["+e.da()+"]",cp(e)}}finally{wo(e)}}}}function wo(e,t){if(e.g){up(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||qt(e,"ready");try{n.onreadystatechange=r}catch{}}}function up(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(z.clearTimeout(e.A),e.A=null)}D.isActive=function(){return!!this.g};function Oe(e){return e.g?e.g.readyState:0}D.da=function(){try{return 2<Oe(this)?this.g.status:-1}catch{return-1}};D.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};D.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),pT(t)}};function Ku(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case ap:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function yT(e){const t={};e=(e.g&&2<=Oe(e)&&e.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<e.length;r++){if(gs(e[r]))continue;var n=qE(e[r]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}kE(t,function(r){return r.join(", ")})}D.Ia=function(){return this.m};D.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function hp(e){let t="";return Uc(e,function(n,r){t+=r,t+=":",t+=n,t+=`\r
`}),t}function Zc(e,t,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=hp(n),typeof e=="string"?n!=null&&encodeURIComponent(String(n)):yt(e,t,n))}function Lr(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function fp(e){this.Ga=0,this.j=[],this.l=new po,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Lr("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Lr("baseRetryDelayMs",5e3,e),this.hb=Lr("retryDelaySeedMs",1e4,e),this.eb=Lr("forwardChannelMaxRetries",2,e),this.xa=Lr("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new ep(e&&e.concurrentRequestLimit),this.Ja=new hT,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}D=fp.prototype;D.ra=8;D.H=1;function tl(e){if(dp(e),e.H==3){var t=e.W++,n=Ge(e.I);if(yt(n,"SID",e.K),yt(n,"RID",t),yt(n,"TYPE","terminate"),js(e,n),t=new Us(e,e.l,t),t.L=2,t.A=vo(Ge(n)),n=!1,z.navigator&&z.navigator.sendBeacon)try{n=z.navigator.sendBeacon(t.A.toString(),"")}catch{}!n&&z.Image&&(new Image().src=t.A,n=!0),n||(t.g=Tp(t.l,null),t.g.ha(t.A)),t.G=Date.now(),Bs(t)}vp(e)}function Io(e){e.g&&(nl(e),e.g.cancel(),e.g=null)}function dp(e){Io(e),e.u&&(z.clearTimeout(e.u),e.u=null),ki(e),e.i.cancel(),e.m&&(typeof e.m=="number"&&z.clearTimeout(e.m),e.m=null)}function Ao(e){if(!np(e.i)&&!e.m){e.m=!0;var t=e.Na;ys||Md(),vs||(ys(),vs=!0),Kc.add(t,e),e.C=0}}function vT(e,t){return rp(e.i)>=e.i.j-(e.m?1:0)?!1:e.m?(e.j=t.F.concat(e.j),!0):e.H==1||e.H==2||e.C>=(e.cb?0:e.eb)?!1:(e.m=Ls(Xt(e.Na,e,t),yp(e,e.C)),e.C++,!0)}D.Na=function(e){if(this.m)if(this.m=null,this.H==1){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const s=new Us(this,this.l,e);let i=this.s;if(this.U&&(i?(i=Pd(i),Cd(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)t:{for(var t=0,n=0;n<this.j.length;n++){e:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break e}r=void 0}if(r===void 0)break;if(t+=r,4096<t){t=n;break t}if(t===4096||n===this.j.length-1){t=n+1;break t}}t=1e3}else t=1e3;t=pp(this,s,t),n=Ge(this.I),yt(n,"RID",e),yt(n,"CVER",22),this.F&&yt(n,"X-HTTP-Session-Id",this.F),js(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(hp(i)))+"&"+t:this.o&&Zc(n,this.o,i)),Xc(this.i,s),this.bb&&yt(n,"TYPE","init"),this.P?(yt(n,"$req",t),yt(n,"SID","null"),s.aa=!0,qa(s,n,null)):qa(s,n,t),this.H=2}}else this.H==3&&(e?zu(this,e):this.j.length==0||np(this.i)||zu(this))};function zu(e,t){var n;t?n=t.m:n=e.W++;const r=Ge(e.I);yt(r,"SID",e.K),yt(r,"RID",n),yt(r,"AID",e.V),js(e,r),e.o&&e.s&&Zc(r,e.o,e.s),n=new Us(e,e.l,n,e.C+1),e.o===null&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=pp(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Xc(e.i,n),qa(n,r,t)}function js(e,t){e.na&&Uc(e.na,function(n,r){yt(t,r,n)}),e.h&&Yd({},function(n,r){yt(t,r,n)})}function pp(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Xt(e.h.Va,e.h,e):null;t:{var s=e.j;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].g,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let c=0;c<n;c++){let l=s[c].g;const u=s[c].map;if(l-=i,0>l)i=Math.max(0,s[c].g-100),a=!1;else try{fT(u,o,"req"+l+"_")}catch{r&&r(u)}}if(a){r=o.join("&");break t}}}return e=e.j.splice(0,n),t.F=e,r}function mp(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;ys||Md(),vs||(ys(),vs=!0),Kc.add(t,e),e.A=0}}function el(e){return e.g||e.u||3<=e.A?!1:(e.ba++,e.u=Ls(Xt(e.Ma,e),yp(e,e.A)),e.A++,!0)}D.Ma=function(){if(this.u=null,gp(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Ls(Xt(this.jb,this),e)}};D.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ee(10),Io(this),gp(this))};function nl(e){e.B!=null&&(z.clearTimeout(e.B),e.B=null)}function gp(e){e.g=new Us(e,e.l,"rpc",e.ba),e.o===null&&(e.g.I=e.s),e.g.O=0;var t=Ge(e.wa);yt(t,"RID","rpc"),yt(t,"SID",e.K),yt(t,"AID",e.V),yt(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&yt(t,"TO",e.qa),yt(t,"TYPE","xmlhttp"),js(e,t),e.o&&e.s&&Zc(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=vo(Ge(t)),n.u=null,n.S=!0,zd(n,e)}D.ib=function(){this.v!=null&&(this.v=null,Io(this),el(this),ee(19))};function ki(e){e.v!=null&&(z.clearTimeout(e.v),e.v=null)}function _p(e,t){var n=null;if(e.g==t){ki(e),nl(e),e.g=null;var r=2}else if(Ka(e.i,t))n=t.F,sp(e.i,t),r=1;else return;if(e.H!=0){if(t.i)if(r==1){n=t.u?t.u.length:0,t=Date.now()-t.G;var s=e.C;r=mo(),qt(r,new $d(r,n)),Ao(e)}else mp(e);else if(s=t.s,s==3||s==0&&0<t.ca||!(r==1&&vT(e,t)||r==2&&el(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),s){case 1:Vn(e,5);break;case 4:Vn(e,10);break;case 3:Vn(e,6);break;default:Vn(e,2)}}}function yp(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Vn(e,t){if(e.l.info("Error code "+t),t==2){var n=null;e.h&&(n=null);var r=Xt(e.pb,e);n||(n=new kn("//www.google.com/images/cleardot.gif"),z.location&&z.location.protocol=="http"||Oi(n,"https"),vo(n)),dT(n.toString(),r)}else ee(2);e.H=0,e.h&&e.h.za(t),vp(e),dp(e)}D.pb=function(e){e?(this.l.info("Successfully pinged google.com"),ee(2)):(this.l.info("Failed to ping google.com"),ee(1))};function vp(e){if(e.H=0,e.ma=[],e.h){const t=ip(e.i);(t.length!=0||e.j.length!=0)&&(ku(e.ma,t),ku(e.ma,e.j),e.i.i.length=0,Lc(e.j),e.j.length=0),e.h.ya()}}function Ep(e,t,n){var r=n instanceof kn?Ge(n):new kn(n);if(r.g!="")t&&(r.g=t+"."+r.g),Mi(r,r.m);else{var s=z.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var i=new kn(null);r&&Oi(i,r),t&&(i.g=t),s&&Mi(i,s),n&&(i.l=n),r=i}return n=e.F,t=e.Da,n&&t&&yt(r,n,t),yt(r,"VER",e.ra),js(e,r),r}function Tp(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return t=e.Ha&&!e.va?new Rt(new Eo({ob:n})):new Rt(e.va),t.Oa(e.J),t}D.isActive=function(){return!!this.h&&this.h.isActive(this)};function wp(){}D=wp.prototype;D.Ba=function(){};D.Aa=function(){};D.za=function(){};D.ya=function(){};D.isActive=function(){return!0};D.Va=function(){};function Li(){if(gr&&!(10<=Number(xE)))throw Error("Environmental error: no available transport.")}Li.prototype.g=function(e,t){return new de(e,t)};function de(e,t){Ft.call(this),this.g=new fp(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!gs(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!gs(t)&&(this.g.F=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new Vr(this)}Ut(de,Ft);de.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;ee(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Ep(e,null,e.Y),Ao(e)};de.prototype.close=function(){tl(this.g)};de.prototype.u=function(e){var t=this.g;if(typeof e=="string"){var n={};n.__data__=e,e=n}else this.v&&(n={},n.__data__=Hc(e),e=n);t.j.push(new cT(t.fb++,e)),t.H==3&&Ao(t)};de.prototype.N=function(){this.g.h=null,delete this.j,tl(this.g),delete this.g,de.$.N.call(this)};function Ip(e){Qc.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){t:{for(const n in t){e=n;break t}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}Ut(Ip,Qc);function Ap(){Yc.call(this),this.status=1}Ut(Ap,Yc);function Vr(e){this.g=e}Ut(Vr,wp);Vr.prototype.Ba=function(){qt(this.g,"a")};Vr.prototype.Aa=function(e){qt(this.g,new Ip(e))};Vr.prototype.za=function(e){qt(this.g,new Ap)};Vr.prototype.ya=function(){qt(this.g,"b")};function ET(){this.blockSize=-1}function Re(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Ut(Re,ET);Re.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function oa(e,t,n){n||(n=0);var r=Array(16);if(typeof t=="string")for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var i=e.g[3],o=t+(i^n&(s^i))+r[0]+3614090360&4294967295;t=n+(o<<7&4294967295|o>>>25),o=i+(s^t&(n^s))+r[1]+3905402710&4294967295,i=t+(o<<12&4294967295|o>>>20),o=s+(n^i&(t^n))+r[2]+606105819&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(t^s&(i^t))+r[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(i^n&(s^i))+r[4]+4118548399&4294967295,t=n+(o<<7&4294967295|o>>>25),o=i+(s^t&(n^s))+r[5]+1200080426&4294967295,i=t+(o<<12&4294967295|o>>>20),o=s+(n^i&(t^n))+r[6]+2821735955&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(t^s&(i^t))+r[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(i^n&(s^i))+r[8]+1770035416&4294967295,t=n+(o<<7&4294967295|o>>>25),o=i+(s^t&(n^s))+r[9]+2336552879&4294967295,i=t+(o<<12&4294967295|o>>>20),o=s+(n^i&(t^n))+r[10]+4294925233&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(t^s&(i^t))+r[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(i^n&(s^i))+r[12]+1804603682&4294967295,t=n+(o<<7&4294967295|o>>>25),o=i+(s^t&(n^s))+r[13]+4254626195&4294967295,i=t+(o<<12&4294967295|o>>>20),o=s+(n^i&(t^n))+r[14]+2792965006&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(t^s&(i^t))+r[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(s^i&(n^s))+r[1]+4129170786&4294967295,t=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(t^n))+r[6]+3225465664&4294967295,i=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(i^t))+r[11]+643717713&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^t&(s^i))+r[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(s^i&(n^s))+r[5]+3593408605&4294967295,t=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(t^n))+r[10]+38016083&4294967295,i=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(i^t))+r[15]+3634488961&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^t&(s^i))+r[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(s^i&(n^s))+r[9]+568446438&4294967295,t=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(t^n))+r[14]+3275163606&4294967295,i=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(i^t))+r[3]+4107603335&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^t&(s^i))+r[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(s^i&(n^s))+r[13]+2850285829&4294967295,t=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(t^n))+r[2]+4243563512&4294967295,i=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(i^t))+r[7]+1735328473&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^t&(s^i))+r[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(n^s^i)+r[5]+4294588738&4294967295,t=n+(o<<4&4294967295|o>>>28),o=i+(t^n^s)+r[8]+2272392833&4294967295,i=t+(o<<11&4294967295|o>>>21),o=s+(i^t^n)+r[11]+1839030562&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^t)+r[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(n^s^i)+r[1]+2763975236&4294967295,t=n+(o<<4&4294967295|o>>>28),o=i+(t^n^s)+r[4]+1272893353&4294967295,i=t+(o<<11&4294967295|o>>>21),o=s+(i^t^n)+r[7]+4139469664&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^t)+r[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(n^s^i)+r[13]+681279174&4294967295,t=n+(o<<4&4294967295|o>>>28),o=i+(t^n^s)+r[0]+3936430074&4294967295,i=t+(o<<11&4294967295|o>>>21),o=s+(i^t^n)+r[3]+3572445317&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^t)+r[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(n^s^i)+r[9]+3654602809&4294967295,t=n+(o<<4&4294967295|o>>>28),o=i+(t^n^s)+r[12]+3873151461&4294967295,i=t+(o<<11&4294967295|o>>>21),o=s+(i^t^n)+r[15]+530742520&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^t)+r[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(s^(n|~i))+r[0]+4096336452&4294967295,t=n+(o<<6&4294967295|o>>>26),o=i+(n^(t|~s))+r[7]+1126891415&4294967295,i=t+(o<<10&4294967295|o>>>22),o=s+(t^(i|~n))+r[14]+2878612391&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~t))+r[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=t+(s^(n|~i))+r[12]+1700485571&4294967295,t=n+(o<<6&4294967295|o>>>26),o=i+(n^(t|~s))+r[3]+2399980690&4294967295,i=t+(o<<10&4294967295|o>>>22),o=s+(t^(i|~n))+r[10]+4293915773&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~t))+r[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=t+(s^(n|~i))+r[8]+1873313359&4294967295,t=n+(o<<6&4294967295|o>>>26),o=i+(n^(t|~s))+r[15]+4264355552&4294967295,i=t+(o<<10&4294967295|o>>>22),o=s+(t^(i|~n))+r[6]+2734768916&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~t))+r[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=t+(s^(n|~i))+r[4]+4149444226&4294967295,t=n+(o<<6&4294967295|o>>>26),o=i+(n^(t|~s))+r[11]+3174756917&4294967295,i=t+(o<<10&4294967295|o>>>22),o=s+(t^(i|~n))+r[2]+718787259&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+i&4294967295}Re.prototype.j=function(e,t){t===void 0&&(t=e.length);for(var n=t-this.blockSize,r=this.m,s=this.h,i=0;i<t;){if(s==0)for(;i<=n;)oa(this,e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<t;)if(r[s++]=e.charCodeAt(i++),s==this.blockSize){oa(this,r),s=0;break}}else for(;i<t;)if(r[s++]=e[i++],s==this.blockSize){oa(this,r),s=0;break}}this.h=s,this.i+=t};Re.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=n&255,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};function ft(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var i=e[s]|0;r&&i==t||(n[s]=i,r=!1)}this.g=n}var TT={};function rl(e){return-128<=e&&128>e?bE(e,function(t){return new ft([t|0],0>t?-1:0)}):new ft([e|0],0>e?-1:0)}function Me(e){if(isNaN(e)||!isFinite(e))return hr;if(0>e)return $t(Me(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=za;return new ft(t,0)}function Rp(e,t){if(e.length==0)throw Error("number format error: empty string");if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(e.charAt(0)=="-")return $t(Rp(e.substring(1),t));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Me(Math.pow(t,8)),r=hr,s=0;s<e.length;s+=8){var i=Math.min(8,e.length-s),o=parseInt(e.substring(s,s+i),t);8>i?(i=Me(Math.pow(t,i)),r=r.R(i).add(Me(o))):(r=r.R(n),r=r.add(Me(o)))}return r}var za=4294967296,hr=rl(0),Ga=rl(1),Gu=rl(16777216);D=ft.prototype;D.ea=function(){if(ye(this))return-$t(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:za+r)*t,t*=za}return e};D.toString=function(e){if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(Ke(this))return"0";if(ye(this))return"-"+$t(this).toString(e);for(var t=Me(Math.pow(e,6)),n=this,r="";;){var s=Ui(n,t).g;n=Fi(n,s.R(t));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(e);if(n=s,Ke(n))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};D.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h};function Ke(e){if(e.h!=0)return!1;for(var t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function ye(e){return e.h==-1}D.X=function(e){return e=Fi(this,e),ye(e)?-1:Ke(e)?0:1};function $t(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new ft(n,~e.h).add(Ga)}D.abs=function(){return ye(this)?$t(this):this};D.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,s=0;s<=t;s++){var i=r+(this.D(s)&65535)+(e.D(s)&65535),o=(i>>>16)+(this.D(s)>>>16)+(e.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new ft(n,n[n.length-1]&-2147483648?-1:0)};function Fi(e,t){return e.add($t(t))}D.R=function(e){if(Ke(this)||Ke(e))return hr;if(ye(this))return ye(e)?$t(this).R($t(e)):$t($t(this).R(e));if(ye(e))return $t(this.R($t(e)));if(0>this.X(Gu)&&0>e.X(Gu))return Me(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<e.g.length;s++){var i=this.D(r)>>>16,o=this.D(r)&65535,a=e.D(s)>>>16,c=e.D(s)&65535;n[2*r+2*s]+=o*c,oi(n,2*r+2*s),n[2*r+2*s+1]+=i*c,oi(n,2*r+2*s+1),n[2*r+2*s+1]+=o*a,oi(n,2*r+2*s+1),n[2*r+2*s+2]+=i*a,oi(n,2*r+2*s+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new ft(n,0)};function oi(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Fr(e,t){this.g=e,this.h=t}function Ui(e,t){if(Ke(t))throw Error("division by zero");if(Ke(e))return new Fr(hr,hr);if(ye(e))return t=Ui($t(e),t),new Fr($t(t.g),$t(t.h));if(ye(t))return t=Ui(e,$t(t)),new Fr($t(t.g),t.h);if(30<e.g.length){if(ye(e)||ye(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Ga,r=t;0>=r.X(e);)n=Wu(n),r=Wu(r);var s=Jn(n,1),i=Jn(r,1);for(r=Jn(r,2),n=Jn(n,2);!Ke(r);){var o=i.add(r);0>=o.X(e)&&(s=s.add(n),i=o),r=Jn(r,1),n=Jn(n,1)}return t=Fi(e,s.R(t)),new Fr(s,t)}for(s=hr;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=Me(n),o=i.R(t);ye(o)||0<o.X(e);)n-=r,i=Me(n),o=i.R(t);Ke(i)&&(i=Ga),s=s.add(i),e=Fi(e,o)}return new Fr(s,e)}D.gb=function(e){return Ui(this,e).h};D.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new ft(n,this.h&e.h)};D.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new ft(n,this.h|e.h)};D.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new ft(n,this.h^e.h)};function Wu(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new ft(n,e.h)}function Jn(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,s=[],i=0;i<r;i++)s[i]=0<t?e.D(i+n)>>>t|e.D(i+n+1)<<32-t:e.D(i+n);return new ft(s,e.h)}Li.prototype.createWebChannel=Li.prototype.g;de.prototype.send=de.prototype.u;de.prototype.open=de.prototype.m;de.prototype.close=de.prototype.close;go.NO_ERROR=0;go.TIMEOUT=8;go.HTTP_ERROR=6;jd.COMPLETE="complete";qd.EventType=Fs;Fs.OPEN="a";Fs.CLOSE="b";Fs.ERROR="c";Fs.MESSAGE="d";Ft.prototype.listen=Ft.prototype.O;Rt.prototype.listenOnce=Rt.prototype.P;Rt.prototype.getLastError=Rt.prototype.Sa;Rt.prototype.getLastErrorCode=Rt.prototype.Ia;Rt.prototype.getStatus=Rt.prototype.da;Rt.prototype.getResponseJson=Rt.prototype.Wa;Rt.prototype.getResponseText=Rt.prototype.ja;Rt.prototype.send=Rt.prototype.ha;Rt.prototype.setWithCredentials=Rt.prototype.Oa;Re.prototype.digest=Re.prototype.l;Re.prototype.reset=Re.prototype.reset;Re.prototype.update=Re.prototype.j;ft.prototype.add=ft.prototype.add;ft.prototype.multiply=ft.prototype.R;ft.prototype.modulo=ft.prototype.gb;ft.prototype.compare=ft.prototype.X;ft.prototype.toNumber=ft.prototype.ea;ft.prototype.toString=ft.prototype.toString;ft.prototype.getBits=ft.prototype.D;ft.fromNumber=Me;ft.fromString=Rp;var wT=function(){return new Li},IT=function(){return mo()},aa=go,AT=jd,RT=Hn,Qu={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},ai=qd,ST=Rt,PT=Re,fr=ft;const Yu="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Wt.UNAUTHENTICATED=new Wt(null),Wt.GOOGLE_CREDENTIALS=new Wt("google-credentials-uid"),Wt.FIRST_PARTY=new Wt("first-party-uid"),Wt.MOCK_USER=new Wt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dr="10.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fn=new _d("@firebase/firestore");function Ur(){return Fn.logLevel}function V(e,...t){if(Fn.logLevel<=it.DEBUG){const n=t.map(sl);Fn.debug(`Firestore (${Dr}): ${e}`,...n)}}function $e(e,...t){if(Fn.logLevel<=it.ERROR){const n=t.map(sl);Fn.error(`Firestore (${Dr}): ${e}`,...n)}}function _r(e,...t){if(Fn.logLevel<=it.WARN){const n=t.map(sl);Fn.warn(`Firestore (${Dr}): ${e}`,...n)}}function sl(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K(e="Unexpected state"){const t=`FIRESTORE (${Dr}) INTERNAL ASSERTION FAILED: `+e;throw $e(t),new Error(t)}function _t(e,t){e||K()}function Y(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class O extends Cr{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class CT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Wt.UNAUTHENTICATED))}shutdown(){}}class bT{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class VT{constructor(t){this.t=t,this.currentUser=Wt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new hn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new hn,t.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;t.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},a=c=>{V("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(V("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new hn)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(V("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_t(typeof r.accessToken=="string"),new Sp(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return _t(t===null||typeof t=="string"),new Wt(t)}}class DT{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=Wt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class xT{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new DT(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(Wt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class NT{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class OT{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=i=>{i.error!=null&&V("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,V("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{t.enqueueRetryable(()=>r(i))};const s=i=>{V("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):V("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(_t(typeof n.token=="string"),this.R=n.token,new NT(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MT(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const s=MT(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=t.charAt(s[i]%t.length))}return r}}function ct(e,t){return e<t?-1:e>t?1:0}function yr(e,t,n){return e.length===t.length&&e.every((r,s)=>n(r,t[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new O(E.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new O(E.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new O(E.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new O(E.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Dt.fromMillis(Date.now())}static fromDate(t){return Dt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new Dt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?ct(this.nanoseconds,t.nanoseconds):ct(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(t){this.timestamp=t}static fromTimestamp(t){return new W(t)}static min(){return new W(new Dt(0,0))}static max(){return new W(new Dt(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(t,n,r){n===void 0?n=0:n>t.length&&K(),r===void 0?r=t.length-n:r>t.length-n&&K(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return As.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof As?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let s=0;s<r;s++){const i=t.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class vt extends As{construct(t,n,r){return new vt(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new O(E.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new vt(n)}static emptyPath(){return new vt([])}}const kT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class jt extends As{construct(t,n,r){return new jt(t,n,r)}static isValidIdentifier(t){return kT.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),jt.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new jt(["__name__"])}static fromServerFormat(t){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new O(E.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<t.length;){const a=t[s];if(a==="\\"){if(s+1===t.length)throw new O(E.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new O(E.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=c,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new O(E.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new jt(n)}static emptyPath(){return new jt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(t){this.path=t}static fromPath(t){return new $(vt.fromString(t))}static fromName(t){return new $(vt.fromString(t).popFirst(5))}static empty(){return new $(vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&vt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return vt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new $(new vt(t.slice()))}}function LT(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=W.fromTimestamp(r===1e9?new Dt(n+1,0):new Dt(n,r));return new mn(s,$.empty(),t)}function FT(e){return new mn(e.readTime,e.key,-1)}class mn{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new mn(W.min(),$.empty(),-1)}static max(){return new mn(W.max(),$.empty(),-1)}}function UT(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=$.comparator(e.documentKey,t.documentKey),n!==0?n:ct(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $T{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qs(e){if(e.code!==E.FAILED_PRECONDITION||e.message!==BT)throw e;V("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&K(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new w((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(t,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof w?n:w.resolve(n)}catch(n){return w.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):w.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):w.reject(n)}static resolve(t){return new w((n,r)=>{n(t)})}static reject(t){return new w((n,r)=>{r(t)})}static waitFor(t){return new w((n,r)=>{let s=0,i=0,o=!1;t.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(t){let n=w.resolve(!1);for(const r of t)n=n.next(s=>s?w.resolve(s):r());return n}static forEach(t,n){const r=[];return t.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(t,n){return new w((r,s)=>{const i=t.length,o=new Array(i);let a=0;for(let c=0;c<i;c++){const l=c;n(t[l]).next(u=>{o[l]=u,++a,a===i&&r(o)},u=>s(u))}})}static doWhile(t,n){return new w((r,s)=>{const i=()=>{t()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(t,n){this.action=t,this.transaction=n,this.aborted=!1,this.V=new hn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new ns(t,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=ol(r.target.error);this.V.reject(new ns(t,s))}}static open(t,n,r,s){try{return new il(n,t.transaction(s,r))}catch(i){throw new ns(n,i)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(V("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const n=this.transaction.objectStore(t);return new qT(n)}}class Dn{constructor(t,n,r){this.name=t,this.version=n,this.p=r,Dn.S(Di())===12.2&&$e("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return V("SimpleDb","Removing database:",t),Pn(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!md())return!1;if(Dn.C())return!0;const t=Di(),n=Dn.S(t),r=0<n&&n<10,s=Dn.v(t),i=0<s&&s<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||i)}static C(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)===null||t===void 0?void 0:t.F)==="YES"}static M(t,n){return t.store(n)}static S(t){const n=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(t){const n=t.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async O(t){return this.db||(V("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new ns(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new O(E.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new O(E.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new ns(t,o))},s.onupgradeneeded=i=>{V("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.p.N(o,s.transaction,i.oldVersion,this.version).next(()=>{V("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=n=>this.L(n)),this.db}B(t){this.L=t,this.db&&(this.db.onversionchange=n=>t(n))}async runTransaction(t,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.O(t);const a=il.open(this.db,t,i?"readonly":"readwrite",r),c=s(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),w.reject(l))).toPromise();return c.catch(()=>{}),await a.m,c}catch(a){const c=a,l=c.name!=="FirebaseError"&&o<3;if(V("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}class jT{constructor(t){this.k=t,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(t){this.k=t}done(){this.q=!0}U(t){this.K=t}delete(){return Pn(this.k.delete())}}class ns extends O{constructor(t,n){super(E.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Hs(e){return e.name==="IndexedDbTransactionError"}class qT{constructor(t){this.store=t}put(t,n){let r;return n!==void 0?(V("SimpleDb","PUT",this.store.name,t,n),r=this.store.put(n,t)):(V("SimpleDb","PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),Pn(r)}add(t){return V("SimpleDb","ADD",this.store.name,t,t),Pn(this.store.add(t))}get(t){return Pn(this.store.get(t)).next(n=>(n===void 0&&(n=null),V("SimpleDb","GET",this.store.name,t,n),n))}delete(t){return V("SimpleDb","DELETE",this.store.name,t),Pn(this.store.delete(t))}count(){return V("SimpleDb","COUNT",this.store.name),Pn(this.store.count())}W(t,n){const r=this.options(t,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new w((o,a)=>{i.onerror=c=>{a(c.target.error)},i.onsuccess=c=>{o(c.target.result)}})}{const i=this.cursor(r),o=[];return this.G(i,(a,c)=>{o.push(c)}).next(()=>o)}}j(t,n){const r=this.store.getAll(t,n===null?void 0:n);return new w((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}H(t,n){V("SimpleDb","DELETE ALL",this.store.name);const r=this.options(t,n);r.J=!1;const s=this.cursor(r);return this.G(s,(i,o,a)=>a.delete())}Y(t,n){let r;n?r=t:(r={},n=t);const s=this.cursor(r);return this.G(s,n)}Z(t){const n=this.cursor({});return new w((r,s)=>{n.onerror=i=>{const o=ol(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?t(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(t,n){const r=[];return new w((s,i)=>{t.onerror=o=>{i(o.target.error)},t.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const c=new jT(a),l=n(a.primaryKey,a.value,c);if(l instanceof w){const u=l.catch(h=>(c.done(),w.reject(h)));r.push(u)}c.isDone?s():c.$===null?a.continue():a.continue(c.$)}}).next(()=>w.waitFor(r))}options(t,n){let r;return t!==void 0&&(typeof t=="string"?r=t:n=t),{index:r,range:n}}cursor(t){let n="next";if(t.reverse&&(n="prev"),t.index){const r=this.store.index(t.index);return t.J?r.openKeyCursor(t.range,n):r.openCursor(t.range,n)}return this.store.openCursor(t.range,n)}}function Pn(e){return new w((t,n)=>{e.onsuccess=r=>{const s=r.target.result;t(s)},e.onerror=r=>{const s=ol(r.target.error);n(s)}})}let Xu=!1;function ol(e){const t=Dn.S(Di());if(t>=12.2&&t<13){const n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){const r=new O("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Xu||(Xu=!0,setTimeout(()=>{throw r},0)),r}}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.se(r),this.oe=r=>n.writeSequenceNumber(r))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}al._e=-1;function Ro(e){return e==null}function Bi(e){return e===0&&1/e==-1/0}function HT(e){return typeof e=="number"&&Number.isInteger(e)&&!Bi(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ju(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Kn(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Cp(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(t,n){this.comparator=t,this.root=n||Bt.EMPTY}insert(t,n){return new At(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Bt.BLACK,null,null))}remove(t){return new At(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Bt.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(t,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new ci(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new ci(this.root,t,this.comparator,!1)}getReverseIterator(){return new ci(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new ci(this.root,t,this.comparator,!0)}}class ci{constructor(t,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=n?r(t.key,n):1,n&&s&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(i===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Bt{constructor(t,n,r,s,i){this.key=t,this.value=n,this.color=r??Bt.RED,this.left=s??Bt.EMPTY,this.right=i??Bt.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,s,i){return new Bt(t??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let s=this;const i=r(t,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(t,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Bt.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return Bt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw K();const t=this.left.check();if(t!==this.right.check())throw K();return t+(this.isRed()?0:1)}}Bt.EMPTY=null,Bt.RED=!0,Bt.BLACK=!1;Bt.EMPTY=new class{constructor(){this.size=0}get key(){throw K()}get value(){throw K()}get color(){throw K()}get left(){throw K()}get right(){throw K()}copy(t,n,r,s,i){return this}insert(t,n,r){return new Bt(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(t){this.comparator=t,this.data=new At(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Zu(this.data.getIterator())}getIteratorFrom(t){return new Zu(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof Ht)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Ht(this.comparator);return n.data=t,n}}class Zu{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(t){this.fields=t,t.sort(jt.comparator)}static empty(){return new fe([])}unionWith(t){let n=new Ht(jt.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new fe(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return yr(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new bp("Invalid base64 string: "+i):i}}(t);return new Zt(n)}static fromUint8Array(t){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(t);return new Zt(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ct(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Zt.EMPTY_BYTE_STRING=new Zt("");const KT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gn(e){if(_t(!!e),typeof e=="string"){let t=0;const n=KT.exec(e);if(_t(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Pt(e.seconds),nanos:Pt(e.nanos)}}function Pt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Un(e){return typeof e=="string"?Zt.fromBase64String(e):Zt.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cl(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function ll(e){const t=e.mapValue.fields.__previous_value__;return cl(t)?ll(t):t}function Rs(e){const t=gn(e.mapValue.fields.__local_write_time__.timestampValue);return new Dt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(t,n,r,s,i,o,a,c,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}}class Ss{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new Ss("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof Ss&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const li={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Bn(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?cl(e)?4:GT(e)?9007199254740991:10:K()}function je(e,t){if(e===t)return!0;const n=Bn(e);if(n!==Bn(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Rs(e).isEqual(Rs(t));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=gn(s.timestampValue),a=gn(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(s,i){return Un(s.bytesValue).isEqual(Un(i.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(s,i){return Pt(s.geoPointValue.latitude)===Pt(i.geoPointValue.latitude)&&Pt(s.geoPointValue.longitude)===Pt(i.geoPointValue.longitude)}(e,t);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Pt(s.integerValue)===Pt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Pt(s.doubleValue),a=Pt(i.doubleValue);return o===a?Bi(o)===Bi(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return yr(e.arrayValue.values||[],t.arrayValue.values||[],je);case 10:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(Ju(o)!==Ju(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!je(o[c],a[c])))return!1;return!0}(e,t);default:return K()}}function Ps(e,t){return(e.values||[]).find(n=>je(n,t))!==void 0}function vr(e,t){if(e===t)return 0;const n=Bn(e),r=Bn(t);if(n!==r)return ct(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ct(e.booleanValue,t.booleanValue);case 2:return function(i,o){const a=Pt(i.integerValue||i.doubleValue),c=Pt(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(e,t);case 3:return th(e.timestampValue,t.timestampValue);case 4:return th(Rs(e),Rs(t));case 5:return ct(e.stringValue,t.stringValue);case 6:return function(i,o){const a=Un(i),c=Un(o);return a.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(i,o){const a=i.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){const u=ct(a[l],c[l]);if(u!==0)return u}return ct(a.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(i,o){const a=ct(Pt(i.latitude),Pt(o.latitude));return a!==0?a:ct(Pt(i.longitude),Pt(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(i,o){const a=i.values||[],c=o.values||[];for(let l=0;l<a.length&&l<c.length;++l){const u=vr(a[l],c[l]);if(u)return u}return ct(a.length,c.length)}(e.arrayValue,t.arrayValue);case 10:return function(i,o){if(i===li.mapValue&&o===li.mapValue)return 0;if(i===li.mapValue)return 1;if(o===li.mapValue)return-1;const a=i.fields||{},c=Object.keys(a),l=o.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let h=0;h<c.length&&h<u.length;++h){const f=ct(c[h],u[h]);if(f!==0)return f;const p=vr(a[c[h]],l[u[h]]);if(p!==0)return p}return ct(c.length,u.length)}(e.mapValue,t.mapValue);default:throw K()}}function th(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return ct(e,t);const n=gn(e),r=gn(t),s=ct(n.seconds,r.seconds);return s!==0?s:ct(n.nanos,r.nanos)}function Er(e){return Wa(e)}function Wa(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=gn(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return Un(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return $.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Wa(i);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Wa(n.fields[o])}`;return s+"}"}(e.mapValue):K()}function eh(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Qa(e){return!!e&&"integerValue"in e}function ul(e){return!!e&&"arrayValue"in e}function nh(e){return!!e&&"nullValue"in e}function rh(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function gi(e){return!!e&&"mapValue"in e}function rs(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Kn(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=rs(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=rs(e.arrayValue.values[n]);return t}return Object.assign({},e)}function GT(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(t){this.value=t}static empty(){return new se({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!gi(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=rs(n)}setAll(t){let n=jt.emptyPath(),r={},s=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=rs(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(t){const n=this.field(t.popLast());gi(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return je(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let s=n.mapValue.fields[t.get(r)];gi(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,r){Kn(n,(s,i)=>t[s]=i);for(const s of r)delete t[s]}clone(){return new se(rs(this.value))}}function Vp(e){const t=[];return Kn(e.fields,(n,r)=>{const s=new jt([n]);if(gi(r)){const i=Vp(r.mapValue).fields;if(i.length===0)t.push(s);else for(const o of i)t.push(s.child(o))}else t.push(s)}),new fe(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(t,n,r,s,i,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(t){return new Qt(t,0,W.min(),W.min(),W.min(),se.empty(),0)}static newFoundDocument(t,n,r,s){return new Qt(t,1,n,W.min(),r,s,0)}static newNoDocument(t,n){return new Qt(t,2,n,W.min(),W.min(),se.empty(),0)}static newUnknownDocument(t,n){return new Qt(t,3,n,W.min(),W.min(),se.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(W.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=se.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=se.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=W.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Qt&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Qt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(t,n){this.position=t,this.inclusive=n}}function sh(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],o=e.position[s];if(i.field.isKeyField()?r=$.comparator($.fromName(o.referenceValue),n.key):r=vr(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function ih(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!je(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(t,n="asc"){this.field=t,this.dir=n}}function WT(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{}class Ct extends Dp{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new YT(t,n,r):n==="array-contains"?new ZT(t,r):n==="in"?new tw(t,r):n==="not-in"?new ew(t,r):n==="array-contains-any"?new nw(t,r):new Ct(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new XT(t,r):new JT(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(vr(n,this.value)):n!==null&&Bn(this.value)===Bn(n)&&this.matchesComparison(vr(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return K()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Se extends Dp{constructor(t,n){super(),this.filters=t,this.op=n,this.ue=null}static create(t,n){return new Se(t,n)}matches(t){return xp(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function xp(e){return e.op==="and"}function Np(e){return QT(e)&&xp(e)}function QT(e){for(const t of e.filters)if(t instanceof Se)return!1;return!0}function Ya(e){if(e instanceof Ct)return e.field.canonicalString()+e.op.toString()+Er(e.value);if(Np(e))return e.filters.map(t=>Ya(t)).join(",");{const t=e.filters.map(n=>Ya(n)).join(",");return`${e.op}(${t})`}}function Op(e,t){return e instanceof Ct?function(r,s){return s instanceof Ct&&r.op===s.op&&r.field.isEqual(s.field)&&je(r.value,s.value)}(e,t):e instanceof Se?function(r,s){return s instanceof Se&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&Op(o,s.filters[a]),!0):!1}(e,t):void K()}function Mp(e){return e instanceof Ct?function(n){return`${n.field.canonicalString()} ${n.op} ${Er(n.value)}`}(e):e instanceof Se?function(n){return n.op.toString()+" {"+n.getFilters().map(Mp).join(" ,")+"}"}(e):"Filter"}class YT extends Ct{constructor(t,n,r){super(t,n,r),this.key=$.fromName(r.referenceValue)}matches(t){const n=$.comparator(t.key,this.key);return this.matchesComparison(n)}}class XT extends Ct{constructor(t,n){super(t,"in",n),this.keys=kp("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class JT extends Ct{constructor(t,n){super(t,"not-in",n),this.keys=kp("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function kp(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>$.fromName(r.referenceValue))}class ZT extends Ct{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return ul(n)&&Ps(n.arrayValue,this.value)}}class tw extends Ct{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Ps(this.value.arrayValue,n)}}class ew extends Ct{constructor(t,n){super(t,"not-in",n)}matches(t){if(Ps(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!Ps(this.value.arrayValue,n)}}class nw extends Ct{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!ul(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ps(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(t,n=null,r=[],s=[],i=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ce=null}}function oh(e,t=null,n=[],r=[],s=null,i=null,o=null){return new rw(e,t,n,r,s,i,o)}function hl(e){const t=Y(e);if(t.ce===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>Ya(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Ro(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>Er(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>Er(r)).join(",")),t.ce=n}return t.ce}function fl(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!WT(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Op(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ih(e.startAt,t.startAt)&&ih(e.endAt,t.endAt)}function Xa(e){return $.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(t,n=null,r=[],s=[],i=null,o="F",a=null,c=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function sw(e,t,n,r,s,i,o,a){return new xr(e,t,n,r,s,i,o,a)}function dl(e){return new xr(e)}function ah(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Lp(e){return e.collectionGroup!==null}function ss(e){const t=Y(e);if(t.le===null){t.le=[];const n=new Set;for(const i of t.explicitOrderBy)t.le.push(i),n.add(i.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ht(jt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||t.le.push(new Cs(i,r))}),n.has(jt.keyField().canonicalString())||t.le.push(new Cs(jt.keyField(),r))}return t.le}function Le(e){const t=Y(e);return t.he||(t.he=iw(t,ss(e))),t.he}function iw(e,t){if(e.limitType==="F")return oh(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Cs(s.field,i)});const n=e.endAt?new $i(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new $i(e.startAt.position,e.startAt.inclusive):null;return oh(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Ja(e,t){const n=e.filters.concat([t]);return new xr(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Za(e,t,n){return new xr(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function So(e,t){return fl(Le(e),Le(t))&&e.limitType===t.limitType}function Fp(e){return`${hl(Le(e))}|lt:${e.limitType}`}function tr(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Mp(s)).join(", ")}]`),Ro(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Er(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Er(s)).join(",")),`Target(${r})`}(Le(e))}; limitType=${e.limitType})`}function Po(e,t){return t.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):$.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(e,t)&&function(r,s){for(const i of ss(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(e,t)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(e,t)&&function(r,s){return!(r.startAt&&!function(o,a,c){const l=sh(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,ss(r),s)||r.endAt&&!function(o,a,c){const l=sh(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,ss(r),s))}(e,t)}function ow(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Up(e){return(t,n)=>{let r=!1;for(const s of ss(e)){const i=aw(s,t,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function aw(e,t,n){const r=e.field.isKeyField()?$.comparator(t.key,n.key):function(i,o,a){const c=o.data.field(i),l=a.data.field(i);return c!==null&&l!==null?vr(c,l):K()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return K()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,t))return i}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),s=this.inner[r];if(s===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return void(s[i]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(t){Kn(this.inner,(n,r)=>{for(const[s,i]of r)t(s,i)})}isEmpty(){return Cp(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw=new At($.comparator);function We(){return cw}const Bp=new At($.comparator);function Kr(...e){let t=Bp;for(const n of e)t=t.insert(n.key,n);return t}function $p(e){let t=Bp;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function xn(){return is()}function jp(){return is()}function is(){return new Nr(e=>e.toString(),(e,t)=>e.isEqual(t))}const lw=new At($.comparator),uw=new Ht($.comparator);function nt(...e){let t=uw;for(const n of e)t=t.add(n);return t}const hw=new Ht(ct);function fw(){return hw}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qp(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bi(t)?"-0":t}}function Hp(e){return{integerValue:""+e}}function dw(e,t){return HT(t)?Hp(t):qp(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(){this._=void 0}}function pw(e,t,n){return e instanceof ji?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&cl(i)&&(i=ll(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,t):e instanceof bs?zp(e,t):e instanceof Vs?Gp(e,t):function(s,i){const o=Kp(s,i),a=ch(o)+ch(s.Ie);return Qa(o)&&Qa(s.Ie)?Hp(a):qp(s.serializer,a)}(e,t)}function mw(e,t,n){return e instanceof bs?zp(e,t):e instanceof Vs?Gp(e,t):n}function Kp(e,t){return e instanceof qi?function(r){return Qa(r)||function(i){return!!i&&"doubleValue"in i}(r)}(t)?t:{integerValue:0}:null}class ji extends Co{}class bs extends Co{constructor(t){super(),this.elements=t}}function zp(e,t){const n=Wp(t);for(const r of e.elements)n.some(s=>je(s,r))||n.push(r);return{arrayValue:{values:n}}}class Vs extends Co{constructor(t){super(),this.elements=t}}function Gp(e,t){let n=Wp(t);for(const r of e.elements)n=n.filter(s=>!je(s,r));return{arrayValue:{values:n}}}class qi extends Co{constructor(t,n){super(),this.serializer=t,this.Ie=n}}function ch(e){return Pt(e.integerValue||e.doubleValue)}function Wp(e){return ul(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function gw(e,t){return e.field.isEqual(t.field)&&function(r,s){return r instanceof bs&&s instanceof bs||r instanceof Vs&&s instanceof Vs?yr(r.elements,s.elements,je):r instanceof qi&&s instanceof qi?je(r.Ie,s.Ie):r instanceof ji&&s instanceof ji}(e.transform,t.transform)}class _w{constructor(t,n){this.version=t,this.transformResults=n}}class Ie{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Ie}static exists(t){return new Ie(void 0,t)}static updateTime(t){return new Ie(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function _i(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class bo{}function Qp(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new pl(e.key,Ie.none()):new Ks(e.key,e.data,Ie.none());{const n=e.data,r=se.empty();let s=new Ht(jt.comparator);for(let i of t.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new En(e.key,r,new fe(s.toArray()),Ie.none())}}function yw(e,t,n){e instanceof Ks?function(s,i,o){const a=s.value.clone(),c=uh(s.fieldTransforms,i,o.transformResults);a.setAll(c),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof En?function(s,i,o){if(!_i(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=uh(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(Yp(s)),c.setAll(a),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(e,t,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function os(e,t,n,r){return e instanceof Ks?function(i,o,a,c){if(!_i(i.precondition,o))return a;const l=i.value.clone(),u=hh(i.fieldTransforms,c,o);return l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof En?function(i,o,a,c){if(!_i(i.precondition,o))return a;const l=hh(i.fieldTransforms,c,o),u=o.data;return u.setAll(Yp(i)),u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(e,t,n,r):function(i,o,a){return _i(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function vw(e,t){let n=null;for(const r of e.fieldTransforms){const s=t.data.field(r.field),i=Kp(r.transform,s||null);i!=null&&(n===null&&(n=se.empty()),n.set(r.field,i))}return n||null}function lh(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&yr(r,s,(i,o)=>gw(i,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Ks extends bo{constructor(t,n,r,s=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class En extends bo{constructor(t,n,r,s,i=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Yp(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function uh(e,t,n){const r=new Map;_t(e.length===n.length);for(let s=0;s<n.length;s++){const i=e[s],o=i.transform,a=t.data.field(i.field);r.set(i.field,mw(o,a,n[s]))}return r}function hh(e,t,n){const r=new Map;for(const s of e){const i=s.transform,o=n.data.field(s.field);r.set(s.field,pw(i,o,t))}return r}class pl extends bo{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ew extends bo{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(t,n,r,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(t.key)&&yw(i,t,r[s])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=os(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=os(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=jp();return this.mutations.forEach(s=>{const i=t.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const c=Qp(o,a);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(W.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),nt())}isEqual(t){return this.batchId===t.batchId&&yr(this.mutations,t.mutations,(n,r)=>lh(n,r))&&yr(this.baseMutations,t.baseMutations,(n,r)=>lh(n,r))}}class ml{constructor(t,n,r,s){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(t,n,r){_t(t.mutations.length===r.length);let s=function(){return lw}();const i=t.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new ml(t,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var St,rt;function Aw(e){switch(e){default:return K();case E.CANCELLED:case E.UNKNOWN:case E.DEADLINE_EXCEEDED:case E.RESOURCE_EXHAUSTED:case E.INTERNAL:case E.UNAVAILABLE:case E.UNAUTHENTICATED:return!1;case E.INVALID_ARGUMENT:case E.NOT_FOUND:case E.ALREADY_EXISTS:case E.PERMISSION_DENIED:case E.FAILED_PRECONDITION:case E.ABORTED:case E.OUT_OF_RANGE:case E.UNIMPLEMENTED:case E.DATA_LOSS:return!0}}function Xp(e){if(e===void 0)return $e("GRPC error has no .code"),E.UNKNOWN;switch(e){case St.OK:return E.OK;case St.CANCELLED:return E.CANCELLED;case St.UNKNOWN:return E.UNKNOWN;case St.DEADLINE_EXCEEDED:return E.DEADLINE_EXCEEDED;case St.RESOURCE_EXHAUSTED:return E.RESOURCE_EXHAUSTED;case St.INTERNAL:return E.INTERNAL;case St.UNAVAILABLE:return E.UNAVAILABLE;case St.UNAUTHENTICATED:return E.UNAUTHENTICATED;case St.INVALID_ARGUMENT:return E.INVALID_ARGUMENT;case St.NOT_FOUND:return E.NOT_FOUND;case St.ALREADY_EXISTS:return E.ALREADY_EXISTS;case St.PERMISSION_DENIED:return E.PERMISSION_DENIED;case St.FAILED_PRECONDITION:return E.FAILED_PRECONDITION;case St.ABORTED:return E.ABORTED;case St.OUT_OF_RANGE:return E.OUT_OF_RANGE;case St.UNIMPLEMENTED:return E.UNIMPLEMENTED;case St.DATA_LOSS:return E.DATA_LOSS;default:return K()}}(rt=St||(St={}))[rt.OK=0]="OK",rt[rt.CANCELLED=1]="CANCELLED",rt[rt.UNKNOWN=2]="UNKNOWN",rt[rt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rt[rt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rt[rt.NOT_FOUND=5]="NOT_FOUND",rt[rt.ALREADY_EXISTS=6]="ALREADY_EXISTS",rt[rt.PERMISSION_DENIED=7]="PERMISSION_DENIED",rt[rt.UNAUTHENTICATED=16]="UNAUTHENTICATED",rt[rt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rt[rt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rt[rt.ABORTED=10]="ABORTED",rt[rt.OUT_OF_RANGE=11]="OUT_OF_RANGE",rt[rt.UNIMPLEMENTED=12]="UNIMPLEMENTED",rt[rt.INTERNAL=13]="INTERNAL",rt[rt.UNAVAILABLE=14]="UNAVAILABLE",rt[rt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rw(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw=new fr([4294967295,4294967295],0);function fh(e){const t=Rw().encode(e),n=new PT;return n.update(t),new Uint8Array(n.digest())}function dh(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new fr([n,r],0),new fr([s,i],0)]}class gl{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new zr(`Invalid padding: ${n}`);if(r<0)throw new zr(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new zr(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new zr(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*t.length-n,this.Ee=fr.fromNumber(this.Te)}de(t,n,r){let s=t.add(n.multiply(fr.fromNumber(r)));return s.compare(Sw)===1&&(s=new fr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Ee).toNumber()}Ae(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Te===0)return!1;const n=fh(t),[r,s]=dh(n);for(let i=0;i<this.hashCount;i++){const o=this.de(r,s,i);if(!this.Ae(o))return!1}return!0}static create(t,n,r){const s=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),o=new gl(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Te===0)return;const n=fh(t),[r,s]=dh(n);for(let i=0;i<this.hashCount;i++){const o=this.de(r,s,i);this.Re(o)}}Re(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class zr extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(t,n,r,s,i){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const s=new Map;return s.set(t,zs.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new Vo(W.min(),s,new At(ct),We(),nt())}}class zs{constructor(t,n,r,s,i){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new zs(r,n,nt(),nt(),nt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(t,n,r,s){this.Ve=t,this.removedTargetIds=n,this.key=r,this.me=s}}class Jp{constructor(t,n){this.targetId=t,this.fe=n}}class Zp{constructor(t,n,r=Zt.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=s}}class ph{constructor(){this.ge=0,this.pe=gh(),this.ye=Zt.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(t){t.approximateByteSize()>0&&(this.Se=!0,this.ye=t)}ve(){let t=nt(),n=nt(),r=nt();return this.pe.forEach((s,i)=>{switch(i){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:K()}}),new zs(this.ye,this.we,t,n,r)}Fe(){this.Se=!1,this.pe=gh()}Me(t,n){this.Se=!0,this.pe=this.pe.insert(t,n)}xe(t){this.Se=!0,this.pe=this.pe.remove(t)}Oe(){this.ge+=1}Ne(){this.ge-=1,_t(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class Pw{constructor(t){this.Be=t,this.ke=new Map,this.qe=We(),this.Qe=mh(),this.Ke=new At(ct)}$e(t){for(const n of t.Ve)t.me&&t.me.isFoundDocument()?this.Ue(n,t.me):this.We(n,t.key,t.me);for(const n of t.removedTargetIds)this.We(n,t.key,t.me)}Ge(t){this.forEachTarget(t,n=>{const r=this.ze(n);switch(t.state){case 0:this.je(n)&&r.Ce(t.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(t.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Le(),r.Ce(t.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(t.resumeToken));break;default:K()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ke.forEach((r,s)=>{this.je(s)&&n(s)})}Je(t){const n=t.targetId,r=t.fe.count,s=this.Ye(n);if(s){const i=s.target;if(Xa(i))if(r===0){const o=new $(i.path);this.We(n,o,Qt.newNoDocument(o,W.min()))}else _t(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(t),c=a?this.et(a,t,o):1;if(c!==0){this.He(n);const l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,l)}}}}}Xe(t){const n=t.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Un(r).toUint8Array()}catch(c){if(c instanceof bp)return _r("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new gl(o,s,i)}catch(c){return _r(c instanceof zr?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(t,n,r){return n.fe.count===r-this.rt(t,n.targetId)?0:2}rt(t,n){const r=this.Be.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Be.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;t.mightContain(a)||(this.We(n,i,null),s++)}),s}it(t){const n=new Map;this.ke.forEach((i,o)=>{const a=this.Ye(o);if(a){if(i.current&&Xa(a.target)){const c=new $(a.target.path);this.qe.get(c)!==null||this.st(o,c)||this.We(o,c,Qt.newNoDocument(c,t))}i.De&&(n.set(o,i.ve()),i.Fe())}});let r=nt();this.Qe.forEach((i,o)=>{let a=!0;o.forEachWhile(c=>{const l=this.Ye(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.qe.forEach((i,o)=>o.setReadTime(t));const s=new Vo(t,n,this.Ke,this.qe,r);return this.qe=We(),this.Qe=mh(),this.Ke=new At(ct),s}Ue(t,n){if(!this.je(t))return;const r=this.st(t,n.key)?2:0;this.ze(t).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(t))}We(t,n,r){if(!this.je(t))return;const s=this.ze(t);this.st(t,n)?s.Me(n,1):s.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(t)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(t){this.ke.delete(t)}Ze(t){const n=this.ze(t).ve();return this.Be.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Oe(t){this.ze(t).Oe()}ze(t){let n=this.ke.get(t);return n||(n=new ph,this.ke.set(t,n)),n}ot(t){let n=this.Qe.get(t);return n||(n=new Ht(ct),this.Qe=this.Qe.insert(t,n)),n}je(t){const n=this.Ye(t)!==null;return n||V("WatchChangeAggregator","Detected inactive target",t),n}Ye(t){const n=this.ke.get(t);return n&&n.be?null:this.Be._t(t)}He(t){this.ke.set(t,new ph),this.Be.getRemoteKeysForTarget(t).forEach(n=>{this.We(t,n,null)})}st(t,n){return this.Be.getRemoteKeysForTarget(t).has(n)}}function mh(){return new At($.comparator)}function gh(){return new At($.comparator)}const Cw=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),bw=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),Vw=(()=>({and:"AND",or:"OR"}))();class Dw{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function tc(e,t){return e.useProto3Json||Ro(t)?t:{value:t}}function Hi(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function tm(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function xw(e,t){return Hi(e,t.toTimestamp())}function Fe(e){return _t(!!e),W.fromTimestamp(function(n){const r=gn(n);return new Dt(r.seconds,r.nanos)}(e))}function _l(e,t){return ec(e,t).canonicalString()}function ec(e,t){const n=function(s){return new vt(["projects",s.projectId,"databases",s.database])}(e).child("documents");return t===void 0?n:n.child(t)}function em(e){const t=vt.fromString(e);return _t(om(t)),t}function nc(e,t){return _l(e.databaseId,t.path)}function ca(e,t){const n=em(t);if(n.get(1)!==e.databaseId.projectId)throw new O(E.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new O(E.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new $(rm(n))}function nm(e,t){return _l(e.databaseId,t)}function Nw(e){const t=em(e);return t.length===4?vt.emptyPath():rm(t)}function rc(e){return new vt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function rm(e){return _t(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function _h(e,t,n){return{name:nc(e,t),fields:n.value.mapValue.fields}}function Ow(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:K()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(l,u){return l.useProto3Json?(_t(u===void 0||typeof u=="string"),Zt.fromBase64String(u||"")):(_t(u===void 0||u instanceof Uint8Array),Zt.fromUint8Array(u||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const u=l.code===void 0?E.UNKNOWN:Xp(l.code);return new O(u,l.message||"")}(o);n=new Zp(r,s,i,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=ca(e,r.document.name),i=Fe(r.document.updateTime),o=r.document.createTime?Fe(r.document.createTime):W.min(),a=new se({mapValue:{fields:r.document.fields}}),c=Qt.newFoundDocument(s,i,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];n=new yi(l,u,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=ca(e,r.document),i=r.readTime?Fe(r.readTime):W.min(),o=Qt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new yi([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=ca(e,r.document),i=r.removedTargetIds||[];n=new yi([],i,s,null)}else{if(!("filter"in t))return K();{t.filter;const r=t.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new Iw(s,i),a=r.targetId;n=new Jp(a,o)}}return n}function Mw(e,t){let n;if(t instanceof Ks)n={update:_h(e,t.key,t.value)};else if(t instanceof pl)n={delete:nc(e,t.key)};else if(t instanceof En)n={update:_h(e,t.key,t.data),updateMask:Hw(t.fieldMask)};else{if(!(t instanceof Ew))return K();n={verify:nc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof ji)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof bs)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Vs)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof qi)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw K()}(0,r))),t.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:xw(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:K()}(e,t.precondition)),n}function kw(e,t){return e&&e.length>0?(_t(t!==void 0),e.map(n=>function(s,i){let o=s.updateTime?Fe(s.updateTime):Fe(i);return o.isEqual(W.min())&&(o=Fe(i)),new _w(o,s.transformResults||[])}(n,t))):[]}function Lw(e,t){return{documents:[nm(e,t.path)]}}function Fw(e,t){const n={structuredQuery:{}},r=t.path;let s;t.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=nm(e,s);const i=function(l){if(l.length!==0)return im(Se.create(l,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const o=function(l){if(l.length!==0)return l.map(u=>function(f){return{field:er(f.field),direction:$w(f.dir)}}(u))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=tc(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{ut:n,parent:s}}function Uw(e){let t=Nw(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){_t(r===1);const u=n.from[0];u.allDescendants?s=u.collectionId:t=t.child(u.collectionId)}let i=[];n.where&&(i=function(h){const f=sm(h);return f instanceof Se&&Np(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(_){return new Cs(nr(_.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,Ro(f)?null:f}(n.limit));let c=null;n.startAt&&(c=function(h){const f=!!h.before,p=h.values||[];return new $i(p,f)}(n.startAt));let l=null;return n.endAt&&(l=function(h){const f=!h.before,p=h.values||[];return new $i(p,f)}(n.endAt)),sw(t,s,o,i,a,"F",c,l)}function Bw(e,t){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function sm(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=nr(n.unaryFilter.field);return Ct.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=nr(n.unaryFilter.field);return Ct.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=nr(n.unaryFilter.field);return Ct.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=nr(n.unaryFilter.field);return Ct.create(o,"!=",{nullValue:"NULL_VALUE"});default:return K()}}(e):e.fieldFilter!==void 0?function(n){return Ct.create(nr(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return K()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Se.create(n.compositeFilter.filters.map(r=>sm(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return K()}}(n.compositeFilter.op))}(e):K()}function $w(e){return Cw[e]}function jw(e){return bw[e]}function qw(e){return Vw[e]}function er(e){return{fieldPath:e.canonicalString()}}function nr(e){return jt.fromServerFormat(e.fieldPath)}function im(e){return e instanceof Ct?function(n){if(n.op==="=="){if(rh(n.value))return{unaryFilter:{field:er(n.field),op:"IS_NAN"}};if(nh(n.value))return{unaryFilter:{field:er(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(rh(n.value))return{unaryFilter:{field:er(n.field),op:"IS_NOT_NAN"}};if(nh(n.value))return{unaryFilter:{field:er(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:er(n.field),op:jw(n.op),value:n.value}}}(e):e instanceof Se?function(n){const r=n.getFilters().map(s=>im(s));return r.length===1?r[0]:{compositeFilter:{op:qw(n.op),filters:r}}}(e):K()}function Hw(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function om(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(t,n,r,s,i=W.min(),o=W.min(),a=Zt.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(t){return new sn(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new sn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new sn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new sn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(t){this.ct=t}}function zw(e){const t=Uw({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Za(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(){this._n=new Ww}addToCollectionParentIndex(t,n){return this._n.add(n),w.resolve()}getCollectionParents(t,n){return w.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return w.resolve()}deleteFieldIndex(t,n){return w.resolve()}deleteAllFieldIndexes(t){return w.resolve()}createTargetIndexes(t,n){return w.resolve()}getDocumentsMatchingTarget(t,n){return w.resolve(null)}getIndexType(t,n){return w.resolve(0)}getFieldIndexes(t,n){return w.resolve([])}getNextCollectionGroupToUpdate(t){return w.resolve(null)}getMinOffset(t,n){return w.resolve(mn.min())}getMinOffsetFromCollectionGroup(t,n){return w.resolve(mn.min())}updateCollectionGroup(t,n,r){return w.resolve()}updateIndexEntries(t,n){return w.resolve()}}class Ww{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n]||new Ht(vt.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(t){return(this.index[t]||new Ht(vt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new Tr(0)}static Ln(){return new Tr(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(){this.changes=new Nr(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Qt.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?w.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(t,n,r,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(t,n))).next(s=>(r!==null&&os(r.mutation,s,fe.empty(),Dt.now()),s))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,nt()).next(()=>r))}getLocalViewOfDocuments(t,n,r=nt()){const s=xn();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,r).next(i=>{let o=Kr();return i.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=xn();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,nt()))}populateOverlays(t,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(t,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,s){let i=We();const o=is(),a=function(){return is()}();return n.forEach((c,l)=>{const u=r.get(l.key);s.has(l.key)&&(u===void 0||u.mutation instanceof En)?i=i.insert(l.key,l):u!==void 0?(o.set(l.key,u.mutation.getFieldMask()),os(u.mutation,l,u.mutation.getFieldMask(),Dt.now())):o.set(l.key,fe.empty())}),this.recalculateAndSaveOverlays(t,i).next(c=>(c.forEach((l,u)=>o.set(l,u)),n.forEach((l,u)=>{var h;return a.set(l,new Yw(u,(h=o.get(l))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(t,n){const r=is();let s=new At((o,a)=>o-a),i=nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const l=n.get(c);if(l===null)return;let u=r.get(c)||fe.empty();u=a.applyToLocalView(l,u),r.set(c,u);const h=(s.get(a.batchId)||nt()).add(c);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),l=c.key,u=c.value,h=jp();u.forEach(f=>{if(!i.has(f)){const p=Qp(n.get(f),r.get(f));p!==null&&h.set(f,p),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,h))}return w.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,s){return function(o){return $.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):Lp(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,s):this.getDocumentsMatchingCollectionQuery(t,n,r,s)}getNextDocuments(t,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,s-i.size):w.resolve(xn());let a=-1,c=i;return o.next(l=>w.forEach(l,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(u)?w.resolve():this.remoteDocumentCache.getEntry(t,u).next(f=>{c=c.insert(u,f)}))).next(()=>this.populateOverlays(t,l,i)).next(()=>this.computeViews(t,c,l,nt())).next(u=>({batchId:a,changes:$p(u)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new $(n)).next(r=>{let s=Kr();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(t,n,r,s){const i=n.collectionGroup;let o=Kr();return this.indexManager.getCollectionParents(t,i).next(a=>w.forEach(a,c=>{const l=function(h,f){return new xr(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(t,l,r,s).next(u=>{u.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,i,s))).next(o=>{i.forEach((c,l)=>{const u=l.getKey();o.get(u)===null&&(o=o.insert(u,Qt.newInvalidDocument(u)))});let a=Kr();return o.forEach((c,l)=>{const u=i.get(c);u!==void 0&&os(u.mutation,l,fe.empty(),Dt.now()),Po(n,l)&&(a=a.insert(c,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return w.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Fe(s.createTime)}}(n)),w.resolve()}getNamedQuery(t,n){return w.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(s){return{name:s.name,query:zw(s.bundledQuery),readTime:Fe(s.readTime)}}(n)),w.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(){this.overlays=new At($.comparator),this.hr=new Map}getOverlay(t,n){return w.resolve(this.overlays.get(n))}getOverlays(t,n){const r=xn();return w.forEach(n,s=>this.getOverlay(t,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((s,i)=>{this.ht(t,n,i)}),w.resolve()}removeOverlaysForBatchId(t,n,r){const s=this.hr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.hr.delete(r)),w.resolve()}getOverlaysForCollection(t,n,r){const s=xn(),i=n.length+1,o=new $(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return w.resolve(s)}getOverlaysForCollectionGroup(t,n,r,s){let i=new At((l,u)=>l-u);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let u=i.get(l.largestBatchId);u===null&&(u=xn(),i=i.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}const a=xn(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=s)););return w.resolve(a)}ht(t,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.hr.get(s.largestBatchId).delete(r.key);this.hr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new ww(n,r));let i=this.hr.get(n);i===void 0&&(i=nt(),this.hr.set(n,i)),this.hr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(){this.Pr=new Ht(Ot.Ir),this.Tr=new Ht(Ot.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){const r=new Ot(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new Ot(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){const n=new $(new vt([])),r=new Ot(n,t),s=new Ot(n,t+1),i=[];return this.Tr.forEachInRange([r,s],o=>{this.Ar(o),i.push(o.key)}),i}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const n=new $(new vt([])),r=new Ot(n,t),s=new Ot(n,t+1);let i=nt();return this.Tr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(t){const n=new Ot(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Ot{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return $.comparator(t.key,n.key)||ct(t.pr,n.pr)}static Er(t,n){return ct(t.pr,n.pr)||$.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Ht(Ot.Ir)}checkEmpty(t){return w.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,s){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Tw(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.wr=this.wr.add(new Ot(a.key,i)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return w.resolve(o)}lookupMutationBatch(t,n){return w.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,s=this.br(r),i=s<0?0:s;return w.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return w.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return w.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Ot(n,0),s=new Ot(n,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([r,s],o=>{const a=this.Sr(o.pr);i.push(a)}),w.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Ht(ct);return n.forEach(s=>{const i=new Ot(s,0),o=new Ot(s,Number.POSITIVE_INFINITY);this.wr.forEachInRange([i,o],a=>{r=r.add(a.pr)})}),w.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,s=r.length+1;let i=r;$.isDocumentKey(i)||(i=i.child(""));const o=new Ot(new $(i),0);let a=new Ht(ct);return this.wr.forEachWhile(c=>{const l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===s&&(a=a.add(c.pr)),!0)},o),w.resolve(this.Dr(a))}Dr(t){const n=[];return t.forEach(r=>{const s=this.Sr(r);s!==null&&n.push(s)}),n}removeMutationBatch(t,n){_t(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return w.forEach(n.mutations,s=>{const i=new Ot(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){const r=new Ot(n,0),s=this.wr.firstAfterOrEqual(r);return w.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,w.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(t){this.vr=t,this.docs=function(){return new At($.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return w.resolve(r?r.document.mutableCopy():Qt.newInvalidDocument(n))}getEntries(t,n){let r=We();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Qt.newInvalidDocument(s))}),w.resolve(r)}getDocumentsMatchingQuery(t,n,r,s){let i=We();const o=n.path,a=new $(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:l,value:{document:u}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||UT(FT(u),r)<=0||(s.has(u.key)||Po(n,u))&&(i=i.insert(u.key,u.mutableCopy()))}return w.resolve(i)}getAllFromCollectionGroup(t,n,r,s){K()}Fr(t,n){return w.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new nI(this)}getSize(t){return w.resolve(this.size)}}class nI extends Qw{constructor(t){super(),this.ar=t}applyChanges(t){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.ar.addEntry(t,s)):this.ar.removeEntry(r)}),w.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(t){this.persistence=t,this.Mr=new Nr(n=>hl(n),fl),this.lastRemoteSnapshotVersion=W.min(),this.highestTargetId=0,this.Or=0,this.Nr=new yl,this.targetCount=0,this.Lr=Tr.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,s)=>n(s)),w.resolve()}getLastRemoteSnapshotVersion(t){return w.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return w.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),w.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),w.resolve()}qn(t){this.Mr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Lr=new Tr(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,w.resolve()}updateTargetData(t,n){return this.qn(n),w.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,w.resolve()}removeTargets(t,n,r){let s=0;const i=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(t,a.targetId)),s++)}),w.waitFor(i).next(()=>s)}getTargetCount(t){return w.resolve(this.targetCount)}getTargetData(t,n){const r=this.Mr.get(n)||null;return w.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),w.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(t,o))}),w.waitFor(i)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),w.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Nr.gr(n);return w.resolve(r)}containsKey(t,n){return w.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(t,n){this.Br={},this.overlays={},this.kr=new al(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new rI(this),this.indexManager=new Gw,this.remoteDocumentCache=function(s){return new eI(s)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new Kw(n),this.$r=new Jw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new Zw,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new tI(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){V("MemoryPersistence","Starting transaction:",t);const s=new iI(this.kr.next());return this.referenceDelegate.Ur(),r(s).next(i=>this.referenceDelegate.Wr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Gr(t,n){return w.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class iI extends $T{constructor(t){super(),this.currentSequenceNumber=t}}class vl{constructor(t){this.persistence=t,this.zr=new yl,this.jr=null}static Hr(t){return new vl(t)}get Jr(){if(this.jr)return this.jr;throw K()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),w.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),w.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),w.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(s=>this.Jr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(s=>{s.forEach(i=>this.Jr.add(i.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return w.forEach(this.Jr,r=>{const s=$.fromPath(r);return this.Yr(t,s).next(i=>{i||n.removeEntry(s,W.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return w.or([()=>w.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(t,n,r,s){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=s}static Ki(t,n){let r=nt(),s=nt();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new El(t,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return lv()?8:Dn.v(Di())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,s){const i={result:null};return this.ji(t,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Hi(t,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new oI;return this.Ji(t,n,o).next(a=>{if(i.result=a,this.Ui)return this.Yi(t,n,o,a.size)})}).next(()=>i.result)}Yi(t,n,r,s){return r.documentReadCount<this.Wi?(Ur()<=it.DEBUG&&V("QueryEngine","SDK will not create cache indexes for query:",tr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),w.resolve()):(Ur()<=it.DEBUG&&V("QueryEngine","Query:",tr(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Gi*s?(Ur()<=it.DEBUG&&V("QueryEngine","The SDK decides to create cache indexes for query:",tr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Le(n))):w.resolve())}ji(t,n){if(ah(n))return w.resolve(null);let r=Le(n);return this.indexManager.getIndexType(t,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Za(n,null,"F"),r=Le(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(i=>{const o=nt(...i);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(c=>{const l=this.Zi(n,a);return this.Xi(n,l,o,c.readTime)?this.ji(t,Za(n,null,"F")):this.es(t,l,n,c)}))})))}Hi(t,n,r,s){return ah(n)||s.isEqual(W.min())?w.resolve(null):this.zi.getDocuments(t,r).next(i=>{const o=this.Zi(n,i);return this.Xi(n,o,r,s)?w.resolve(null):(Ur()<=it.DEBUG&&V("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),tr(n)),this.es(t,o,n,LT(s,-1)).next(a=>a))})}Zi(t,n){let r=new Ht(Up(t));return n.forEach((s,i)=>{Po(t,i)&&(r=r.add(i))}),r}Xi(t,n,r,s){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const i=t.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ji(t,n,r){return Ur()<=it.DEBUG&&V("QueryEngine","Using full collection scan to execute query:",tr(n)),this.zi.getDocumentsMatchingQuery(t,n,mn.min(),r)}es(t,n,r,s){return this.zi.getDocumentsMatchingQuery(t,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(t,n,r,s){this.persistence=t,this.ts=n,this.serializer=s,this.ns=new At(ct),this.rs=new Nr(i=>hl(i),fl),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Xw(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}}function lI(e,t,n,r){return new cI(e,t,n,r)}async function am(e,t){const n=Y(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let c=nt();for(const l of s){o.push(l.batchId);for(const u of l.mutations)c=c.add(u.key)}for(const l of i){a.push(l.batchId);for(const u of l.mutations)c=c.add(u.key)}return n.localDocuments.getDocuments(r,c).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})}function uI(e,t){const n=Y(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(a,c,l,u){const h=l.batch,f=h.keys();let p=w.resolve();return f.forEach(_=>{p=p.next(()=>u.getEntry(c,_)).next(A=>{const I=l.docVersions.get(_);_t(I!==null),A.version.compareTo(I)<0&&(h.applyToRemoteDocument(A,l),A.isValidDocument()&&(A.setReadTime(l.commitVersion),u.addEntry(A)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(c,h))}(n,r,t,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=nt();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(t))).next(()=>n.localDocuments.getDocuments(r,s))})}function cm(e){const t=Y(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function hI(e,t){const n=Y(e),r=t.snapshotVersion;let s=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.os.newChangeBuffer({trackRemovals:!0});s=n.ns;const a=[];t.targetChanges.forEach((u,h)=>{const f=s.get(h);if(!f)return;a.push(n.Qr.removeMatchingKeys(i,u.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(i,u.addedDocuments,h)));let p=f.withSequenceNumber(i.currentSequenceNumber);t.targetMismatches.get(h)!==null?p=p.withResumeToken(Zt.EMPTY_BYTE_STRING,W.min()).withLastLimboFreeSnapshotVersion(W.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,r)),s=s.insert(h,p),function(A,I,P){return A.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(f,p,u)&&a.push(n.Qr.updateTargetData(i,p))});let c=We(),l=nt();if(t.documentUpdates.forEach(u=>{t.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,u))}),a.push(fI(i,o,t.documentUpdates).next(u=>{c=u.cs,l=u.ls})),!r.isEqual(W.min())){const u=n.Qr.getLastRemoteSnapshotVersion(i).next(h=>n.Qr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(u)}return w.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,l)).next(()=>c)}).then(i=>(n.ns=s,i))}function fI(e,t,n){let r=nt(),s=nt();return n.forEach(i=>r=r.add(i)),t.getEntries(e,r).next(i=>{let o=We();return n.forEach((a,c)=>{const l=i.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(s=s.add(a)),c.isNoDocument()&&c.version.isEqual(W.min())?(t.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(c),o=o.insert(a,c)):V("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{cs:o,ls:s}})}function dI(e,t){const n=Y(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function pI(e,t){const n=Y(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Qr.getTargetData(r,t).next(i=>i?(s=i,w.resolve(s)):n.Qr.allocateTargetId(r).next(o=>(s=new sn(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.ns.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(t,r.targetId)),r})}async function sc(e,t,n){const r=Y(e),s=r.ns.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Hs(o))throw o;V("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ns=r.ns.remove(t),r.rs.delete(s.target)}function yh(e,t,n){const r=Y(e);let s=W.min(),i=nt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,u){const h=Y(c),f=h.rs.get(u);return f!==void 0?w.resolve(h.ns.get(f)):h.Qr.getTargetData(l,u)}(r,o,Le(t)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{i=c})}).next(()=>r.ts.getDocumentsMatchingQuery(o,t,n?s:W.min(),n?i:nt())).next(a=>(mI(r,ow(t),a),{documents:a,hs:i})))}function mI(e,t,n){let r=e.ss.get(t)||W.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),e.ss.set(t,r)}class vh{constructor(){this.activeTargetIds=fw()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class gI{constructor(){this.no=new vh,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new vh,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){V("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){V("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ui=null;function la(){return ui===null?ui=function(){return 268435456+Math.round(2147483648*Math.random())}():ui++,"0x"+ui.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}onMessage(t){this.Ao=t}close(){this.ho()}send(t){this.lo(t)}Ro(){this.Io()}Vo(t){this.Eo(t)}mo(t){this.Ao(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gt="WebChannelConnection";class EI extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${s}/databases/${i}`,this.yo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get wo(){return!1}So(n,r,s,i,o){const a=la(),c=this.bo(n,r.toUriEncodedString());V("RestConnection",`Sending RPC '${n}' ${a}:`,c,s);const l={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(l,i,o),this.Co(n,c,l,s).then(u=>(V("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw _r("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",c,"request:",s),u})}vo(n,r,s,i,o,a){return this.So(n,r,s,i,o)}Do(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Dr}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}bo(n,r){const s=yI[n];return`${this.fo}/v1/${r}:${s}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Co(t,n,r,s){const i=la();return new Promise((o,a)=>{const c=new ST;c.setWithCredentials(!0),c.listenOnce(AT.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case aa.NO_ERROR:const u=c.getResponseJson();V(Gt,`XHR for RPC '${t}' ${i} received:`,JSON.stringify(u)),o(u);break;case aa.TIMEOUT:V(Gt,`RPC '${t}' ${i} timed out`),a(new O(E.DEADLINE_EXCEEDED,"Request time out"));break;case aa.HTTP_ERROR:const h=c.getStatus();if(V(Gt,`RPC '${t}' ${i} failed with status:`,h,"response text:",c.getResponseText()),h>0){let f=c.getResponseJson();Array.isArray(f)&&(f=f[0]);const p=f==null?void 0:f.error;if(p&&p.status&&p.message){const _=function(I){const P=I.toLowerCase().replace(/_/g,"-");return Object.values(E).indexOf(P)>=0?P:E.UNKNOWN}(p.status);a(new O(_,p.message))}else a(new O(E.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new O(E.UNAVAILABLE,"Connection failed."));break;default:K()}}finally{V(Gt,`RPC '${t}' ${i} completed.`)}});const l=JSON.stringify(s);V(Gt,`RPC '${t}' ${i} sending request:`,s),c.send(n,"POST",l,r,15)})}Fo(t,n,r){const s=la(),i=[this.fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=wT(),a=IT(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const u=i.join("");V(Gt,`Creating RPC '${t}' stream ${s}: ${u}`,c);const h=o.createWebChannel(u,c);let f=!1,p=!1;const _=new vI({lo:I=>{p?V(Gt,`Not sending because RPC '${t}' stream ${s} is closed:`,I):(f||(V(Gt,`Opening RPC '${t}' stream ${s} transport.`),h.open(),f=!0),V(Gt,`RPC '${t}' stream ${s} sending:`,I),h.send(I))},ho:()=>h.close()}),A=(I,P,L)=>{I.listen(P,U=>{try{L(U)}catch(X){setTimeout(()=>{throw X},0)}})};return A(h,ai.EventType.OPEN,()=>{p||V(Gt,`RPC '${t}' stream ${s} transport opened.`)}),A(h,ai.EventType.CLOSE,()=>{p||(p=!0,V(Gt,`RPC '${t}' stream ${s} transport closed`),_.Vo())}),A(h,ai.EventType.ERROR,I=>{p||(p=!0,_r(Gt,`RPC '${t}' stream ${s} transport errored:`,I),_.Vo(new O(E.UNAVAILABLE,"The operation could not be completed")))}),A(h,ai.EventType.MESSAGE,I=>{var P;if(!p){const L=I.data[0];_t(!!L);const U=L,X=U.error||((P=U[0])===null||P===void 0?void 0:P.error);if(X){V(Gt,`RPC '${t}' stream ${s} received error:`,X);const J=X.status;let q=function(tt){const Tt=St[tt];if(Tt!==void 0)return Xp(Tt)}(J),mt=X.message;q===void 0&&(q=E.INTERNAL,mt="Unknown error status: "+J+" with message "+X.message),p=!0,_.Vo(new O(q,mt)),h.close()}else V(Gt,`RPC '${t}' stream ${s} received:`,L),_.mo(L)}}),A(a,RT.STAT_EVENT,I=>{I.stat===Qu.PROXY?V(Gt,`RPC '${t}' stream ${s} detected buffering proxy`):I.stat===Qu.NOPROXY&&V(Gt,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{_.Ro()},0),_}}function ua(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Do(e){return new Dw(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(t,n,r=1e3,s=1.5,i=6e4){this.oi=t,this.timerId=n,this.Mo=r,this.xo=s,this.Oo=i,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(t){this.cancel();const n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Bo),s=Math.max(0,n-r);s>0&&V("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,s,()=>(this.Bo=Date.now(),t())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(t,n,r,s,i,o,a,c){this.oi=t,this.$o=r,this.Uo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new lm(t,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(t){this.n_(),this.stream.send(t)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(t,n){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,t!==4?this.jo.reset():n&&n.code===E.RESOURCE_EXHAUSTED?($e(n.toString()),$e("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===E.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.To(n)}i_(){}auth(){this.state=1;const t=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Wo===n&&this.o_(r,s)},r=>{t(()=>{const s=new O(E.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(s)})})}o_(t,n){const r=this.s_(this.Wo);this.stream=this.a_(t,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(s=>{r(()=>this.__(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(t){return V("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}s_(t){return n=>{this.oi.enqueueAndForget(()=>this.Wo===t?n():(V("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class TI extends um{constructor(t,n,r,s,i,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}a_(t,n){return this.connection.Fo("Listen",t,n)}onMessage(t){this.jo.reset();const n=Ow(this.serializer,t),r=function(i){if(!("targetChange"in i))return W.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?W.min():o.readTime?Fe(o.readTime):W.min()}(t);return this.listener.u_(n,r)}c_(t){const n={};n.database=rc(this.serializer),n.addTarget=function(i,o){let a;const c=o.target;if(a=Xa(c)?{documents:Lw(i,c)}:{query:Fw(i,c).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=tm(i,o.resumeToken);const l=tc(i,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(W.min())>0){a.readTime=Hi(i,o.snapshotVersion.toTimestamp());const l=tc(i,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=Bw(this.serializer,t);r&&(n.labels=r),this.t_(n)}l_(t){const n={};n.database=rc(this.serializer),n.removeTarget=t,this.t_(n)}}class wI extends um{constructor(t,n,r,s,i,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(t,n){return this.connection.Fo("Write",t,n)}onMessage(t){if(_t(!!t.streamToken),this.lastStreamToken=t.streamToken,this.h_){this.jo.reset();const n=kw(t.writeResults,t.commitTime),r=Fe(t.commitTime);return this.listener.T_(r,n)}return _t(!t.writeResults||t.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){const t={};t.database=rc(this.serializer),this.t_(t)}I_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>Mw(this.serializer,r))};this.t_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II extends class{}{constructor(t,n,r,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.A_=!1}R_(){if(this.A_)throw new O(E.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,n,r,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.So(t,ec(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===E.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new O(E.UNKNOWN,i.toString())})}vo(t,n,r,s,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(t,ec(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===E.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new O(E.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class AI{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(t){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.y_("Offline")))}set(t){this.b_(),this.m_=0,t==="Online"&&(this.g_=!1),this.y_(t)}y_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}w_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?($e(n),this.g_=!1):V("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(t,n,r,s,i){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io(o=>{r.enqueueAndForget(async()=>{zn(this)&&(V("RemoteStore","Restarting streams for network reachability change."),await async function(c){const l=Y(c);l.v_.add(4),await Gs(l),l.x_.set("Unknown"),l.v_.delete(4),await xo(l)}(this))})}),this.x_=new AI(r,s)}}async function xo(e){if(zn(e))for(const t of e.F_)await t(!0)}async function Gs(e){for(const t of e.F_)await t(!1)}function hm(e,t){const n=Y(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),Al(n)?Il(n):Or(n).Jo()&&wl(n,t))}function Tl(e,t){const n=Y(e),r=Or(n);n.C_.delete(t),r.Jo()&&fm(n,t),n.C_.size===0&&(r.Jo()?r.Xo():zn(n)&&n.x_.set("Unknown"))}function wl(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(W.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Or(e).c_(t)}function fm(e,t){e.O_.Oe(t),Or(e).l_(t)}function Il(e){e.O_=new Pw({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.C_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),Or(e).start(),e.x_.p_()}function Al(e){return zn(e)&&!Or(e).Ho()&&e.C_.size>0}function zn(e){return Y(e).v_.size===0}function dm(e){e.O_=void 0}async function SI(e){e.C_.forEach((t,n)=>{wl(e,t)})}async function PI(e,t){dm(e),Al(e)?(e.x_.S_(t),Il(e)):e.x_.set("Unknown")}async function CI(e,t,n){if(e.x_.set("Online"),t instanceof Zp&&t.state===2&&t.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.C_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.C_.delete(a),s.O_.removeTarget(a))}(e,t)}catch(r){V("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Ki(e,r)}else if(t instanceof yi?e.O_.$e(t):t instanceof Jp?e.O_.Je(t):e.O_.Ge(t),!n.isEqual(W.min()))try{const r=await cm(e.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.O_.it(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){const u=i.C_.get(l);u&&i.C_.set(l,u.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{const u=i.C_.get(c);if(!u)return;i.C_.set(c,u.withResumeToken(Zt.EMPTY_BYTE_STRING,u.snapshotVersion)),fm(i,c);const h=new sn(u.target,c,l,u.sequenceNumber);wl(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){V("RemoteStore","Failed to raise snapshot:",r),await Ki(e,r)}}async function Ki(e,t,n){if(!Hs(t))throw t;e.v_.add(1),await Gs(e),e.x_.set("Offline"),n||(n=()=>cm(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{V("RemoteStore","Retrying IndexedDB access"),await n(),e.v_.delete(1),await xo(e)})}function pm(e,t){return t().catch(n=>Ki(e,n,t))}async function No(e){const t=Y(e),n=_n(t);let r=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;bI(t);)try{const s=await dI(t.localStore,r);if(s===null){t.D_.length===0&&n.Xo();break}r=s.batchId,VI(t,s)}catch(s){await Ki(t,s)}mm(t)&&gm(t)}function bI(e){return zn(e)&&e.D_.length<10}function VI(e,t){e.D_.push(t);const n=_n(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function mm(e){return zn(e)&&!_n(e).Ho()&&e.D_.length>0}function gm(e){_n(e).start()}async function DI(e){_n(e).d_()}async function xI(e){const t=_n(e);for(const n of e.D_)t.I_(n.mutations)}async function NI(e,t,n){const r=e.D_.shift(),s=ml.from(r,t,n);await pm(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await No(e)}async function OI(e,t){t&&_n(e).P_&&await async function(r,s){if(function(o){return Aw(o)&&o!==E.ABORTED}(s.code)){const i=r.D_.shift();_n(r).Zo(),await pm(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await No(r)}}(e,t),mm(e)&&gm(e)}async function Th(e,t){const n=Y(e);n.asyncQueue.verifyOperationInProgress(),V("RemoteStore","RemoteStore received new credentials");const r=zn(n);n.v_.add(3),await Gs(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.v_.delete(3),await xo(n)}async function MI(e,t){const n=Y(e);t?(n.v_.delete(2),await xo(n)):t||(n.v_.add(2),await Gs(n),n.x_.set("Unknown"))}function Or(e){return e.N_||(e.N_=function(n,r,s){const i=Y(n);return i.R_(),new TI(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(e.datastore,e.asyncQueue,{Po:SI.bind(null,e),To:PI.bind(null,e),u_:CI.bind(null,e)}),e.F_.push(async t=>{t?(e.N_.Zo(),Al(e)?Il(e):e.x_.set("Unknown")):(await e.N_.stop(),dm(e))})),e.N_}function _n(e){return e.L_||(e.L_=function(n,r,s){const i=Y(n);return i.R_(),new wI(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(e.datastore,e.asyncQueue,{Po:DI.bind(null,e),To:OI.bind(null,e),E_:xI.bind(null,e),T_:NI.bind(null,e)}),e.F_.push(async t=>{t?(e.L_.Zo(),await No(e)):(await e.L_.stop(),e.D_.length>0&&(V("RemoteStore",`Stopping write stream with ${e.D_.length} pending writes`),e.D_=[]))})),e.L_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(t,n,r,s,i){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new hn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,s,i){const o=Date.now()+r,a=new Rl(t,n,o,s,i);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new O(E.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Sl(e,t){if($e("AsyncQueue",`${t}: ${e}`),Hs(e))return new O(E.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(t){this.comparator=t?(n,r)=>t(n,r)||$.comparator(n.key,r.key):(n,r)=>$.comparator(n.key,r.key),this.keyedMap=Kr(),this.sortedSet=new At(this.comparator)}static emptySet(t){return new dr(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof dr)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new dr;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(){this.B_=new At($.comparator)}track(t){const n=t.doc.key,r=this.B_.get(n);r?t.type!==0&&r.type===3?this.B_=this.B_.insert(n,t):t.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.B_=this.B_.remove(n):t.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:t.doc}):K():this.B_=this.B_.insert(n,t)}k_(){const t=[];return this.B_.inorderTraversal((n,r)=>{t.push(r)}),t}}class wr{constructor(t,n,r,s,i,o,a,c,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new wr(t,n,dr.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&So(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(t=>t.U_())}}class LI{constructor(){this.queries=new Nr(t=>Fp(t),So),this.onlineState="Unknown",this.W_=new Set}}async function FI(e,t){const n=Y(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.K_()&&t.U_()&&(r=2):(i=new kI,r=t.U_()?0:1);try{switch(r){case 0:i.q_=await n.onListen(s,!0);break;case 1:i.q_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Sl(o,`Initialization of query '${tr(t.query)}' failed`);return void t.onError(a)}n.queries.set(s,i),i.Q_.push(t),t.G_(n.onlineState),i.q_&&t.z_(i.q_)&&Pl(n)}async function UI(e,t){const n=Y(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Q_.indexOf(t);o>=0&&(i.Q_.splice(o,1),i.Q_.length===0?s=t.U_()?0:1:!i.K_()&&t.U_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function BI(e,t){const n=Y(e);let r=!1;for(const s of t){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Q_)a.z_(s)&&(r=!0);o.q_=s}}r&&Pl(n)}function $I(e,t,n){const r=Y(e),s=r.queries.get(t);if(s)for(const i of s.Q_)i.onError(n);r.queries.delete(t)}function Pl(e){e.W_.forEach(t=>{t.next()})}var ic,Ih;(Ih=ic||(ic={})).j_="default",Ih.Cache="cache";class jI{constructor(t,n,r){this.query=t,this.H_=n,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=r||{}}z_(t){if(!this.options.includeMetadataChanges){const r=[];for(const s of t.docChanges)s.type!==3&&r.push(s);t=new wr(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.J_?this.Z_(t)&&(this.H_.next(t),n=!0):this.X_(t,this.onlineState)&&(this.ea(t),n=!0),this.Y_=t,n}onError(t){this.H_.error(t)}G_(t){this.onlineState=t;let n=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,t)&&(this.ea(this.Y_),n=!0),n}X_(t,n){if(!t.fromCache||!this.U_())return!0;const r=n!=="Offline";return(!this.options.ta||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Z_(t){if(t.docChanges.length>0)return!0;const n=this.Y_&&this.Y_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ea(t){t=wr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.J_=!0,this.H_.next(t)}U_(){return this.options.source!==ic.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(t){this.key=t}}class ym{constructor(t){this.key=t}}class qI{constructor(t,n){this.query=t,this.ua=n,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=nt(),this.mutatedKeys=nt(),this.ha=Up(t),this.Pa=new dr(this.ha)}get Ia(){return this.ua}Ta(t,n){const r=n?n.Ea:new wh,s=n?n.Pa:this.Pa;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,l=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((u,h)=>{const f=s.get(u),p=Po(this.query,h)?h:null,_=!!f&&this.mutatedKeys.has(f.key),A=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let I=!1;f&&p?f.data.isEqual(p.data)?_!==A&&(r.track({type:3,doc:p}),I=!0):this.da(f,p)||(r.track({type:2,doc:p}),I=!0,(c&&this.ha(p,c)>0||l&&this.ha(p,l)<0)&&(a=!0)):!f&&p?(r.track({type:0,doc:p}),I=!0):f&&!p&&(r.track({type:1,doc:f}),I=!0,(c||l)&&(a=!0)),I&&(p?(o=o.add(p),i=A?i.add(u):i.delete(u)):(o=o.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),i=i.delete(u.key),r.track({type:1,doc:u})}return{Pa:o,Ea:r,Xi:a,mutatedKeys:i}}da(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,s){const i=this.Pa;this.Pa=t.Pa,this.mutatedKeys=t.mutatedKeys;const o=t.Ea.k_();o.sort((u,h)=>function(p,_){const A=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K()}};return A(p)-A(_)}(u.type,h.type)||this.ha(u.doc,h.doc)),this.Aa(r),s=s!=null&&s;const a=n&&!s?this.Ra():[],c=this.la.size===0&&this.current&&!s?1:0,l=c!==this.ca;return this.ca=c,o.length!==0||l?{snapshot:new wr(this.query,t.Pa,i,o,t.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),Va:a}:{Va:a}}G_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new wh,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(t){return!this.ua.has(t)&&!!this.Pa.has(t)&&!this.Pa.get(t).hasLocalMutations}Aa(t){t&&(t.addedDocuments.forEach(n=>this.ua=this.ua.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.ua=this.ua.delete(n)),this.current=t.current)}Ra(){if(!this.current)return[];const t=this.la;this.la=nt(),this.Pa.forEach(r=>{this.ma(r.key)&&(this.la=this.la.add(r.key))});const n=[];return t.forEach(r=>{this.la.has(r)||n.push(new ym(r))}),this.la.forEach(r=>{t.has(r)||n.push(new _m(r))}),n}fa(t){this.ua=t.hs,this.la=nt();const n=this.Ta(t.documents);return this.applyChanges(n,!0)}ga(){return wr.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,this.ca===0,this.hasCachedResults)}}class HI{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class KI{constructor(t){this.key=t,this.pa=!1}}class zI{constructor(t,n,r,s,i,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.ya={},this.wa=new Nr(a=>Fp(a),So),this.Sa=new Map,this.ba=new Set,this.Da=new At($.comparator),this.Ca=new Map,this.va=new yl,this.Fa={},this.Ma=new Map,this.xa=Tr.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return this.Oa===!0}}async function GI(e,t,n=!0){const r=Am(e);let s;const i=r.wa.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.ga()):s=await vm(r,t,n,!0),s}async function WI(e,t){const n=Am(e);await vm(n,t,!0,!1)}async function vm(e,t,n,r){const s=await pI(e.localStore,Le(t)),i=s.targetId,o=n?e.sharedClientState.addLocalQueryTarget(i):"not-current";let a;return r&&(a=await QI(e,t,i,o==="current",s.resumeToken)),e.isPrimaryClient&&n&&hm(e.remoteStore,s),a}async function QI(e,t,n,r,s){e.Na=(h,f,p)=>async function(A,I,P,L){let U=I.view.Ta(P);U.Xi&&(U=await yh(A.localStore,I.query,!1).then(({documents:mt})=>I.view.Ta(mt,U)));const X=L&&L.targetChanges.get(I.targetId),J=L&&L.targetMismatches.get(I.targetId)!=null,q=I.view.applyChanges(U,A.isPrimaryClient,X,J);return Rh(A,I.targetId,q.Va),q.snapshot}(e,h,f,p);const i=await yh(e.localStore,t,!0),o=new qI(t,i.hs),a=o.Ta(i.documents),c=zs.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",s),l=o.applyChanges(a,e.isPrimaryClient,c);Rh(e,n,l.Va);const u=new HI(t,n,o);return e.wa.set(t,u),e.Sa.has(n)?e.Sa.get(n).push(t):e.Sa.set(n,[t]),l.snapshot}async function YI(e,t,n){const r=Y(e),s=r.wa.get(t),i=r.Sa.get(s.targetId);if(i.length>1)return r.Sa.set(s.targetId,i.filter(o=>!So(o,t))),void r.wa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await sc(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Tl(r.remoteStore,s.targetId),oc(r,s.targetId)}).catch(qs)):(oc(r,s.targetId),await sc(r.localStore,s.targetId,!0))}async function XI(e,t){const n=Y(e),r=n.wa.get(t),s=n.Sa.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Tl(n.remoteStore,r.targetId))}async function JI(e,t,n){const r=i0(e);try{const s=await function(o,a){const c=Y(o),l=Dt.now(),u=a.reduce((p,_)=>p.add(_.key),nt());let h,f;return c.persistence.runTransaction("Locally write mutations","readwrite",p=>{let _=We(),A=nt();return c.os.getEntries(p,u).next(I=>{_=I,_.forEach((P,L)=>{L.isValidDocument()||(A=A.add(P))})}).next(()=>c.localDocuments.getOverlayedDocuments(p,_)).next(I=>{h=I;const P=[];for(const L of a){const U=vw(L,h.get(L.key).overlayedDocument);U!=null&&P.push(new En(L.key,U,Vp(U.value.mapValue),Ie.exists(!0)))}return c.mutationQueue.addMutationBatch(p,l,P,a)}).next(I=>{f=I;const P=I.applyToLocalDocumentSet(h,A);return c.documentOverlayCache.saveOverlays(p,I.batchId,P)})}).then(()=>({batchId:f.batchId,changes:$p(h)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,c){let l=o.Fa[o.currentUser.toKey()];l||(l=new At(ct)),l=l.insert(a,c),o.Fa[o.currentUser.toKey()]=l}(r,s.batchId,n),await Ws(r,s.changes),await No(r.remoteStore)}catch(s){const i=Sl(s,"Failed to persist write");n.reject(i)}}async function Em(e,t){const n=Y(e);try{const r=await hI(n.localStore,t);t.targetChanges.forEach((s,i)=>{const o=n.Ca.get(i);o&&(_t(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.pa=!0:s.modifiedDocuments.size>0?_t(o.pa):s.removedDocuments.size>0&&(_t(o.pa),o.pa=!1))}),await Ws(n,r,t)}catch(r){await qs(r)}}function Ah(e,t,n){const r=Y(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.wa.forEach((i,o)=>{const a=o.view.G_(t);a.snapshot&&s.push(a.snapshot)}),function(o,a){const c=Y(o);c.onlineState=a;let l=!1;c.queries.forEach((u,h)=>{for(const f of h.Q_)f.G_(a)&&(l=!0)}),l&&Pl(c)}(r.eventManager,t),s.length&&r.ya.u_(s),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function ZI(e,t,n){const r=Y(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Ca.get(t),i=s&&s.key;if(i){let o=new At($.comparator);o=o.insert(i,Qt.newNoDocument(i,W.min()));const a=nt().add(i),c=new Vo(W.min(),new Map,new At(ct),o,a);await Em(r,c),r.Da=r.Da.remove(i),r.Ca.delete(t),Cl(r)}else await sc(r.localStore,t,!1).then(()=>oc(r,t,n)).catch(qs)}async function t0(e,t){const n=Y(e),r=t.batch.batchId;try{const s=await uI(n.localStore,t);wm(n,r,null),Tm(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ws(n,s)}catch(s){await qs(s)}}async function e0(e,t,n){const r=Y(e);try{const s=await function(o,a){const c=Y(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return c.mutationQueue.lookupMutationBatch(l,a).next(h=>(_t(h!==null),u=h.keys(),c.mutationQueue.removeMutationBatch(l,h))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,u,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>c.localDocuments.getDocuments(l,u))})}(r.localStore,t);wm(r,t,n),Tm(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Ws(r,s)}catch(s){await qs(s)}}function Tm(e,t){(e.Ma.get(t)||[]).forEach(n=>{n.resolve()}),e.Ma.delete(t)}function wm(e,t,n){const r=Y(e);let s=r.Fa[r.currentUser.toKey()];if(s){const i=s.get(t);i&&(n?i.reject(n):i.resolve(),s=s.remove(t)),r.Fa[r.currentUser.toKey()]=s}}function oc(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Sa.get(t))e.wa.delete(r),n&&e.ya.La(r,n);e.Sa.delete(t),e.isPrimaryClient&&e.va.Vr(t).forEach(r=>{e.va.containsKey(r)||Im(e,r)})}function Im(e,t){e.ba.delete(t.path.canonicalString());const n=e.Da.get(t);n!==null&&(Tl(e.remoteStore,n),e.Da=e.Da.remove(t),e.Ca.delete(n),Cl(e))}function Rh(e,t,n){for(const r of n)r instanceof _m?(e.va.addReference(r.key,t),n0(e,r)):r instanceof ym?(V("SyncEngine","Document no longer in limbo: "+r.key),e.va.removeReference(r.key,t),e.va.containsKey(r.key)||Im(e,r.key)):K()}function n0(e,t){const n=t.key,r=n.path.canonicalString();e.Da.get(n)||e.ba.has(r)||(V("SyncEngine","New document in limbo: "+n),e.ba.add(r),Cl(e))}function Cl(e){for(;e.ba.size>0&&e.Da.size<e.maxConcurrentLimboResolutions;){const t=e.ba.values().next().value;e.ba.delete(t);const n=new $(vt.fromString(t)),r=e.xa.next();e.Ca.set(r,new KI(n)),e.Da=e.Da.insert(n,r),hm(e.remoteStore,new sn(Le(dl(n.path)),r,"TargetPurposeLimboResolution",al._e))}}async function Ws(e,t,n){const r=Y(e),s=[],i=[],o=[];r.wa.isEmpty()||(r.wa.forEach((a,c)=>{o.push(r.Na(c,t,n).then(l=>{if((l||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,l!=null&&l.fromCache?"not-current":"current"),l){s.push(l);const u=El.Ki(c.targetId,l);i.push(u)}}))}),await Promise.all(o),r.ya.u_(s),await async function(c,l){const u=Y(c);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>w.forEach(l,f=>w.forEach(f.qi,p=>u.persistence.referenceDelegate.addReference(h,f.targetId,p)).next(()=>w.forEach(f.Qi,p=>u.persistence.referenceDelegate.removeReference(h,f.targetId,p)))))}catch(h){if(!Hs(h))throw h;V("LocalStore","Failed to update sequence numbers: "+h)}for(const h of l){const f=h.targetId;if(!h.fromCache){const p=u.ns.get(f),_=p.snapshotVersion,A=p.withLastLimboFreeSnapshotVersion(_);u.ns=u.ns.insert(f,A)}}}(r.localStore,i))}async function r0(e,t){const n=Y(e);if(!n.currentUser.isEqual(t)){V("SyncEngine","User change. New user:",t.toKey());const r=await am(n.localStore,t);n.currentUser=t,function(i,o){i.Ma.forEach(a=>{a.forEach(c=>{c.reject(new O(E.CANCELLED,o))})}),i.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Ws(n,r.us)}}function s0(e,t){const n=Y(e),r=n.Ca.get(t);if(r&&r.pa)return nt().add(r.key);{let s=nt();const i=n.Sa.get(t);if(!i)return s;for(const o of i){const a=n.wa.get(o);s=s.unionWith(a.view.Ia)}return s}}function Am(e){const t=Y(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Em.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=s0.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ZI.bind(null,t),t.ya.u_=BI.bind(null,t.eventManager),t.ya.La=$I.bind(null,t.eventManager),t}function i0(e){const t=Y(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=t0.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=e0.bind(null,t),t}class Sh{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=Do(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return lI(this.persistence,new aI,t.initialUser,this.serializer)}createPersistence(t){return new sI(vl.Hr,this.serializer)}createSharedClientState(t){return new gI}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class o0{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ah(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=r0.bind(null,this.syncEngine),await MI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new LI}()}createDatastore(t){const n=Do(t.databaseInfo.databaseId),r=function(i){return new EI(i)}(t.databaseInfo);return function(i,o,a,c){return new II(i,o,a,c)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,s,i,o,a){return new RI(r,s,i,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>Ah(this.syncEngine,n,0),function(){return Eh.D()?new Eh:new _I}())}createSyncEngine(t,n){return function(s,i,o,a,c,l,u){const h=new zI(s,i,o,a,c,l);return u&&(h.Oa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t;await async function(r){const s=Y(r);V("RemoteStore","RemoteStore shutting down."),s.v_.add(5),await Gs(s),s.M_.shutdown(),s.x_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.qa(this.observer.next,t)}error(t){this.observer.error?this.qa(this.observer.error,t):$e("Uncaught Error in snapshot listener:",t.toString())}Qa(){this.muted=!0}qa(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(t,n,r,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Wt.UNAUTHENTICATED,this.clientId=Pp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{V("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(V("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new O(E.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new hn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=Sl(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function ha(e,t){e.asyncQueue.verifyOperationInProgress(),V("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async s=>{r.isEqual(s)||(await am(t.localStore,s),r=s)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Ph(e,t){e.asyncQueue.verifyOperationInProgress();const n=await u0(e);V("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>Th(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,s)=>Th(t.remoteStore,s)),e._onlineComponents=t}function l0(e){return e.name==="FirebaseError"?e.code===E.FAILED_PRECONDITION||e.code===E.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function u0(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){V("FirestoreClient","Using user provided OfflineComponentProvider");try{await ha(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!l0(n))throw n;_r("Error using user provided cache. Falling back to memory cache: "+n),await ha(e,new Sh)}}else V("FirestoreClient","Using default OfflineComponentProvider"),await ha(e,new Sh);return e._offlineComponents}async function Rm(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(V("FirestoreClient","Using user provided OnlineComponentProvider"),await Ph(e,e._uninitializedComponentsProvider._online)):(V("FirestoreClient","Using default OnlineComponentProvider"),await Ph(e,new o0))),e._onlineComponents}function h0(e){return Rm(e).then(t=>t.syncEngine)}async function Ch(e){const t=await Rm(e),n=t.eventManager;return n.onListen=GI.bind(null,t.syncEngine),n.onUnlisten=YI.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=WI.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=XI.bind(null,t.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bh=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(e,t,n){if(!n)throw new O(E.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function f0(e,t,n,r){if(t===!0&&r===!0)throw new O(E.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Vh(e){if(!$.isDocumentKey(e))throw new O(E.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Dh(e){if($.isDocumentKey(e))throw new O(E.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Oo(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":K()}function fn(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new O(E.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Oo(e);throw new O(E.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new O(E.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new O(E.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}f0("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Sm((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new O(E.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new O(E.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new O(E.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Mo{constructor(t,n,r,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xh({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new O(E.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new O(E.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xh(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new CT;switch(r.type){case"firstParty":return new xT(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new O(E.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=bh.get(n);r&&(V("ComponentProvider","Removing Datastore"),bh.delete(n),r.terminate())}(this),Promise.resolve()}}function d0(e,t,n,r={}){var s;const i=(e=fn(e,Mo))._getSettings(),o=`${t}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&_r("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Wt.MOCK_USER;else{a=av(r.mockUserToken,(s=e._app)===null||s===void 0?void 0:s.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new O(E.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Wt(l)}e._authCredentials=new bT(new Sp(a,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Gn(this.firestore,t,this._query)}}class ie{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new dn(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ie(this.firestore,t,this._key)}}class dn extends Gn{constructor(t,n,r){super(t,n,dl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ie(this.firestore,null,new $(t))}withConverter(t){return new dn(this.firestore,t,this._path)}}function p0(e,t,...n){if(e=Be(e),Pm("collection","path",t),e instanceof Mo){const r=vt.fromString(t,...n);return Dh(r),new dn(e,null,r)}{if(!(e instanceof ie||e instanceof dn))throw new O(E.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(vt.fromString(t,...n));return Dh(r),new dn(e.firestore,null,r)}}function ac(e,t,...n){if(e=Be(e),arguments.length===1&&(t=Pp.newId()),Pm("doc","path",t),e instanceof Mo){const r=vt.fromString(t,...n);return Vh(r),new ie(e,null,new $(r))}{if(!(e instanceof ie||e instanceof dn))throw new O(E.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(vt.fromString(t,...n));return Vh(r),new ie(e.firestore,e instanceof dn?e.converter:null,new $(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new lm(this,"async_queue_retry"),this.cu=()=>{const n=ua();n&&V("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const t=ua();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.lu(),this.hu(t)}enterRestrictedMode(t){if(!this.iu){this.iu=!0,this.au=t||!1;const n=ua();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.cu)}}enqueue(t){if(this.lu(),this.iu)return new Promise(()=>{});const n=new hn;return this.hu(()=>this.iu&&this.au?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.ru.push(t),this.Pu()))}async Pu(){if(this.ru.length!==0){try{await this.ru[0](),this.ru.shift(),this.jo.reset()}catch(t){if(!Hs(t))throw t;V("AsyncQueue","Operation failed with retryable error: "+t)}this.ru.length>0&&this.jo.qo(()=>this.Pu())}}hu(t){const n=this.nu.then(()=>(this._u=!0,t().catch(r=>{this.ou=r,this._u=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw $e("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this._u=!1,r))));return this.nu=n,n}enqueueAfterDelay(t,n,r){this.lu(),this.uu.indexOf(t)>-1&&(n=0);const s=Rl.createAndSchedule(this,t,n,r,i=>this.Iu(i));return this.su.push(s),s}lu(){this.ou&&K()}verifyOperationInProgress(){}async Tu(){let t;do t=this.nu,await t;while(t!==this.nu)}Eu(t){for(const n of this.su)if(n.timerId===t)return!0;return!1}du(t){return this.Tu().then(()=>{this.su.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.su)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tu()})}Au(t){this.uu.push(t)}Iu(t){const n=this.su.indexOf(t);this.su.splice(n,1)}}function Nh(e){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(e,["next","error","complete"])}class Ir extends Mo{constructor(t,n,r,s){super(t,n,r,s),this.type="firestore",this._queue=function(){return new m0}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||bm(this),this._firestoreClient.terminate()}}function g0(e,t){const n=typeof e=="object"?e:fE(),r=typeof e=="string"?e:t||"(default)",s=cE(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=iv("firestore");i&&d0(s,...i)}return s}function Cm(e){return e._firestoreClient||bm(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function bm(e){var t,n,r;const s=e._freezeSettings(),i=function(a,c,l,u){return new zT(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,Sm(u.experimentalLongPollingOptions),u.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,s);e._firestoreClient=new c0(e._authCredentials,e._appCheckCredentials,e._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ar(Zt.fromBase64String(t))}catch(n){throw new O(E.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Ar(Zt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new O(E.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new O(E.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new O(E.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return ct(this._lat,t._lat)||ct(this._long,t._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0=/^__.*__$/;class y0{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new En(t,this.data,this.fieldMask,n,this.fieldTransforms):new Ks(t,this.data,n,this.fieldTransforms)}}class Vm{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new En(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function Dm(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K()}}class Dl{constructor(t,n,r,s,i,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ru(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(t){return new Dl(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.mu({path:r,gu:!1});return s.pu(t),s}yu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.mu({path:r,gu:!1});return s.Ru(),s}wu(t){return this.mu({path:void 0,gu:!0})}Su(t){return zi(t,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Ru(){if(this.path)for(let t=0;t<this.path.length;t++)this.pu(this.path.get(t))}pu(t){if(t.length===0)throw this.Su("Document fields must not be empty");if(Dm(this.Vu)&&_0.test(t))throw this.Su('Document fields cannot begin and end with "__"')}}class v0{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Do(t)}Cu(t,n,r,s=!1){return new Dl({Vu:t,methodName:n,Du:r,path:jt.emptyPath(),gu:!1,bu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xl(e){const t=e._freezeSettings(),n=Do(e._databaseId);return new v0(e._databaseId,!!t.ignoreUndefinedProperties,n)}function E0(e,t,n,r,s,i={}){const o=e.Cu(i.merge||i.mergeFields?2:0,t,n,s);Nl("Data must be an object, but it was:",o,r);const a=xm(r,o);let c,l;if(i.merge)c=new fe(o.fieldMask),l=o.fieldTransforms;else if(i.mergeFields){const u=[];for(const h of i.mergeFields){const f=cc(t,h,n);if(!o.contains(f))throw new O(E.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);Om(u,f)||u.push(f)}c=new fe(u),l=o.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,l=o.fieldTransforms;return new y0(new se(a),c,l)}class Lo extends bl{_toFieldTransform(t){if(t.Vu!==2)throw t.Vu===1?t.Su(`${this._methodName}() can only appear at the top level of your update data`):t.Su(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Lo}}function T0(e,t,n,r){const s=e.Cu(1,t,n);Nl("Data must be an object, but it was:",s,r);const i=[],o=se.empty();Kn(r,(c,l)=>{const u=Ol(t,c,n);l=Be(l);const h=s.yu(u);if(l instanceof Lo)i.push(u);else{const f=Qs(l,h);f!=null&&(i.push(u),o.set(u,f))}});const a=new fe(i);return new Vm(o,a,s.fieldTransforms)}function w0(e,t,n,r,s,i){const o=e.Cu(1,t,n),a=[cc(t,r,n)],c=[s];if(i.length%2!=0)throw new O(E.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<i.length;f+=2)a.push(cc(t,i[f])),c.push(i[f+1]);const l=[],u=se.empty();for(let f=a.length-1;f>=0;--f)if(!Om(l,a[f])){const p=a[f];let _=c[f];_=Be(_);const A=o.yu(p);if(_ instanceof Lo)l.push(p);else{const I=Qs(_,A);I!=null&&(l.push(p),u.set(p,I))}}const h=new fe(l);return new Vm(u,h,o.fieldTransforms)}function I0(e,t,n,r=!1){return Qs(n,e.Cu(r?4:3,t))}function Qs(e,t){if(Nm(e=Be(e)))return Nl("Unsupported field value:",t,e),xm(e,t);if(e instanceof bl)return function(r,s){if(!Dm(s.Vu))throw s.Su(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Su(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.gu&&t.Vu!==4)throw t.Su("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let c=Qs(a,s.wu(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(e,t)}return function(r,s){if((r=Be(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return dw(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Dt.fromDate(r);return{timestampValue:Hi(s.serializer,i)}}if(r instanceof Dt){const i=new Dt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Hi(s.serializer,i)}}if(r instanceof Vl)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ar)return{bytesValue:tm(s.serializer,r._byteString)};if(r instanceof ie){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Su(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:_l(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.Su(`Unsupported field value: ${Oo(r)}`)}(e,t)}function xm(e,t){const n={};return Cp(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Kn(e,(r,s)=>{const i=Qs(s,t.fu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Nm(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Dt||e instanceof Vl||e instanceof Ar||e instanceof ie||e instanceof bl)}function Nl(e,t,n){if(!Nm(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Oo(n);throw r==="an object"?t.Su(e+" a custom object"):t.Su(e+" "+r)}}function cc(e,t,n){if((t=Be(t))instanceof ko)return t._internalPath;if(typeof t=="string")return Ol(e,t);throw zi("Field path arguments must be of type string or ",e,!1,void 0,n)}const A0=new RegExp("[~\\*/\\[\\]]");function Ol(e,t,n){if(t.search(A0)>=0)throw zi(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new ko(...t.split("."))._internalPath}catch{throw zi(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function zi(e,t,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new O(E.INVALID_ARGUMENT,a+e+c)}function Om(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(t,n,r,s,i){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ie(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new R0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Ml("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class R0 extends Mm{data(){return super.data()}}function Ml(e,t){return typeof t=="string"?Ol(e,t):t instanceof ko?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S0(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new O(E.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class kl{}class km extends kl{}function P0(e,t,...n){let r=[];t instanceof kl&&r.push(t),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof Fl).length,a=i.filter(c=>c instanceof Ll).length;if(o>1||o>0&&a>0)throw new O(E.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)e=s._apply(e);return e}class Ll extends km{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new Ll(t,n,r)}_apply(t){const n=this._parse(t);return Lm(t._query,n),new Gn(t.firestore,t.converter,Ja(t._query,n))}_parse(t){const n=xl(t.firestore);return function(i,o,a,c,l,u,h){let f;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new O(E.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){Mh(h,u);const p=[];for(const _ of h)p.push(Oh(c,i,_));f={arrayValue:{values:p}}}else f=Oh(c,i,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||Mh(h,u),f=I0(a,o,h,u==="in"||u==="not-in");return Ct.create(l,u,f)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}class Fl extends kl{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Fl(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Se.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const c of a)Lm(o,c),o=Ja(o,c)}(t._query,n),new Gn(t.firestore,t.converter,Ja(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ul extends km{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Ul(t,n)}_apply(t){const n=function(s,i,o){if(s.startAt!==null)throw new O(E.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new O(E.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Cs(i,o)}(t._query,this._field,this._direction);return new Gn(t.firestore,t.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new xr(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(t._query,n))}}function C0(e,t="asc"){const n=t,r=Ml("orderBy",e);return Ul._create(r,n)}function Oh(e,t,n){if(typeof(n=Be(n))=="string"){if(n==="")throw new O(E.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Lp(t)&&n.indexOf("/")!==-1)throw new O(E.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(vt.fromString(n));if(!$.isDocumentKey(r))throw new O(E.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return eh(e,new $(r))}if(n instanceof ie)return eh(e,n._key);throw new O(E.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Oo(n)}.`)}function Mh(e,t){if(!Array.isArray(e)||e.length===0)throw new O(E.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Lm(e,t){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new O(E.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new O(E.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class b0{convertValue(t,n="none"){switch(Bn(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Pt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Un(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw K()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Kn(t,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(t){return new Vl(Pt(t.latitude),Pt(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=ll(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Rs(t));default:return null}}convertTimestamp(t){const n=gn(t);return new Dt(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=vt.fromString(t);_t(om(r));const s=new Ss(r.get(1),r.get(3)),i=new $(r.popFirst(5));return s.isEqual(n)||$e(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Fm extends Mm{constructor(t,n,r,s,i,o){super(t,n,r,s,o),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new vi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(Ml("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class vi extends Fm{data(t={}){return super.data(t)}}class D0{constructor(t,n,r,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new Gr(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new vi(this._firestore,this._userDataWriter,r.key,r,new Gr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new O(E.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const c=new vi(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Gr(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const c=new vi(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Gr(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let l=-1,u=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:x0(a.type),doc:c,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function x0(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K()}}class Um extends b0{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ar(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new ie(this.firestore,null,n)}}function N0(e,t,n,...r){e=fn(e,ie);const s=fn(e.firestore,Ir),i=xl(s);let o;return o=typeof(t=Be(t))=="string"||t instanceof ko?w0(i,"updateDoc",e._key,t,n,r):T0(i,"updateDoc",e._key,t),Bl(s,[o.toMutation(e._key,Ie.exists(!0))])}function O0(e){return Bl(fn(e.firestore,Ir),[new pl(e._key,Ie.none())])}function M0(e,t){const n=fn(e.firestore,Ir),r=ac(e),s=V0(e.converter,t);return Bl(n,[E0(xl(e.firestore),"addDoc",r._key,s,e.converter!==null,{}).toMutation(r._key,Ie.exists(!1))]).then(()=>r)}function k0(e,...t){var n,r,s;e=Be(e);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof t[o]!="object"||Nh(t[o])||(i=t[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Nh(t[o])){const h=t[o];t[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),t[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),t[o+2]=(s=h.complete)===null||s===void 0?void 0:s.bind(h)}let c,l,u;if(e instanceof ie)l=fn(e.firestore,Ir),u=dl(e._key.path),c={next:h=>{t[o]&&t[o](L0(l,e,h))},error:t[o+1],complete:t[o+2]};else{const h=fn(e,Gn);l=fn(h.firestore,Ir),u=h._query;const f=new Um(l);c={next:p=>{t[o]&&t[o](new D0(l,f,h,p))},error:t[o+1],complete:t[o+2]},S0(e._query)}return function(f,p,_,A){const I=new a0(A),P=new jI(p,I,_);return f.asyncQueue.enqueueAndForget(async()=>FI(await Ch(f),P)),()=>{I.Qa(),f.asyncQueue.enqueueAndForget(async()=>UI(await Ch(f),P))}}(Cm(l),u,a,c)}function Bl(e,t){return function(r,s){const i=new hn;return r.asyncQueue.enqueueAndForget(async()=>JI(await h0(r),s,i)),i.promise}(Cm(e),t)}function L0(e,t,n){const r=n.docs.get(t._key),s=new Um(e);return new Fm(e,s,t._key,r,new Gr(n.hasPendingWrites,n.fromCache),t.converter)}(function(t,n=!0){(function(s){Dr=s})(hE),Ni(new ps("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Ir(new VT(r.getProvider("auth-internal")),new OT(r.getProvider("app-check-internal")),function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new O(E.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ss(l.options.projectId,u)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),ur(Yu,"4.5.0",t),ur(Yu,"4.5.0","esm2017")})();var F0="firebase",U0="10.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ur(F0,U0,"app");const B0={apiKey:"AIzaSyBk6GybswesHF6U8t3WWDfA_QZj57Yuu_A",authDomain:"noteballs-1989f.firebaseapp.com",projectId:"noteballs-1989f",storageBucket:"noteballs-1989f.appspot.com",messagingSenderId:"25954924883",appId:"1:25954924883:web:5376fb3cf89a5e264809a6"},$0=Ed(B0),j0=g0($0),Ei=p0(j0,"notes"),q0=P0(Ei,C0("date","desc")),H0=by("notes",()=>{const e=ke([]),t=ke(!1);async function n(){k0(q0,l=>{t.value=!1;let u=[];l.forEach(h=>{u.push({id:h.id,content:h.data().content,date:h.data().date})}),setTimeout(()=>{this.notes=u,t.value=!0},5e3)})}function r(l){return e.value.filter(u=>u.id===l)[0].content}async function s(l){const u=new Date().getTime().toString();await M0(Ei,{content:l,date:u})}async function i(l,u){await N0(ac(Ei,l),{content:u})}async function o(l){await O0(ac(Ei,l))}function a(){return e.value.length}function c(){return e.value.reduce((l,u)=>l+u.content.length,0)}return{notesLoaded:t,notes:e,index:n,show:r,store:s,update:i,destroy:o,totalNotesCount:a,totalCharactersCount:c}});const K0={class:"container is-max-desktop px-2 py-4"},z0={__name:"App",setup(e){return $f(()=>{H0().index()}),(t,n)=>{const r=Mf("RouterView");return ro(),td(ge,null,[kt(Qy),_e("div",K0,[kt(r)])],64)}}},G0="modulepreload",W0=function(e){return"/"+e},kh={},hi=function(t,n,r){if(!n||n.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=W0(i),i in kh)return;kh[i]=!0;const o=i.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let u=s.length-1;u>=0;u--){const h=s[u];if(h.href===i&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${a}`))return;const l=document.createElement("link");if(l.rel=o?"stylesheet":G0,o||(l.as="script",l.crossOrigin=""),l.href=i,document.head.appendChild(l),o)return new Promise((u,h)=>{l.addEventListener("load",u),l.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})};/*!
  * vue-router v4.3.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const rr=typeof document<"u";function Q0(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const ht=Object.assign;function fa(e,t){const n={};for(const r in t){const s=t[r];n[r]=Pe(s)?s.map(e):e(s)}return n}const as=()=>{},Pe=Array.isArray,Bm=/#/g,Y0=/&/g,X0=/\//g,J0=/=/g,Z0=/\?/g,$m=/\+/g,tA=/%5B/g,eA=/%5D/g,jm=/%5E/g,nA=/%60/g,qm=/%7B/g,rA=/%7C/g,Hm=/%7D/g,sA=/%20/g;function $l(e){return encodeURI(""+e).replace(rA,"|").replace(tA,"[").replace(eA,"]")}function iA(e){return $l(e).replace(qm,"{").replace(Hm,"}").replace(jm,"^")}function lc(e){return $l(e).replace($m,"%2B").replace(sA,"+").replace(Bm,"%23").replace(Y0,"%26").replace(nA,"`").replace(qm,"{").replace(Hm,"}").replace(jm,"^")}function oA(e){return lc(e).replace(J0,"%3D")}function aA(e){return $l(e).replace(Bm,"%23").replace(Z0,"%3F")}function cA(e){return e==null?"":aA(e).replace(X0,"%2F")}function Ds(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const lA=/\/$/,uA=e=>e.replace(lA,"");function da(e,t,n="/"){let r,s={},i="",o="";const a=t.indexOf("#");let c=t.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(r=t.slice(0,c),i=t.slice(c+1,a>-1?a:t.length),s=e(i)),a>-1&&(r=r||t.slice(0,a),o=t.slice(a,t.length)),r=pA(r??t,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:Ds(o)}}function hA(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function Lh(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function fA(e,t,n){const r=t.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&Rr(t.matched[r],n.matched[s])&&Km(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Rr(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Km(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!dA(e[n],t[n]))return!1;return!0}function dA(e,t){return Pe(e)?Fh(e,t):Pe(t)?Fh(t,e):e===t}function Fh(e,t){return Pe(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function pA(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}var xs;(function(e){e.pop="pop",e.push="push"})(xs||(xs={}));var cs;(function(e){e.back="back",e.forward="forward",e.unknown=""})(cs||(cs={}));function mA(e){if(!e)if(rr){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),uA(e)}const gA=/^[^#]+#/;function _A(e,t){return e.replace(gA,"#")+t}function yA(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const Fo=()=>({left:window.scrollX,top:window.scrollY});function vA(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;t=yA(s,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Uh(e,t){return(history.state?history.state.position-t:-1)+e}const uc=new Map;function EA(e,t){uc.set(e,t)}function TA(e){const t=uc.get(e);return uc.delete(e),t}let wA=()=>location.protocol+"//"+location.host;function zm(e,t){const{pathname:n,search:r,hash:s}=t,i=e.indexOf("#");if(i>-1){let a=s.includes(e.slice(i))?e.slice(i).length:1,c=s.slice(a);return c[0]!=="/"&&(c="/"+c),Lh(c,"")}return Lh(n,e)+r+s}function IA(e,t,n,r){let s=[],i=[],o=null;const a=({state:f})=>{const p=zm(e,location),_=n.value,A=t.value;let I=0;if(f){if(n.value=p,t.value=f,o&&o===_){o=null;return}I=A?f.position-A.position:0}else r(p);s.forEach(P=>{P(n.value,_,{delta:I,type:xs.pop,direction:I?I>0?cs.forward:cs.back:cs.unknown})})};function c(){o=n.value}function l(f){s.push(f);const p=()=>{const _=s.indexOf(f);_>-1&&s.splice(_,1)};return i.push(p),p}function u(){const{history:f}=window;f.state&&f.replaceState(ht({},f.state,{scroll:Fo()}),"")}function h(){for(const f of i)f();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:c,listen:l,destroy:h}}function Bh(e,t,n,r=!1,s=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:s?Fo():null}}function AA(e){const{history:t,location:n}=window,r={value:zm(e,n)},s={value:t.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function i(c,l,u){const h=e.indexOf("#"),f=h>-1?(n.host&&document.querySelector("base")?e:e.slice(h))+c:wA()+e+c;try{t[u?"replaceState":"pushState"](l,"",f),s.value=l}catch(p){console.error(p),n[u?"replace":"assign"](f)}}function o(c,l){const u=ht({},t.state,Bh(s.value.back,c,s.value.forward,!0),l,{position:s.value.position});i(c,u,!0),r.value=c}function a(c,l){const u=ht({},s.value,t.state,{forward:c,scroll:Fo()});i(u.current,u,!0);const h=ht({},Bh(r.value,c,null),{position:u.position+1},l);i(c,h,!1),r.value=c}return{location:r,state:s,push:a,replace:o}}function RA(e){e=mA(e);const t=AA(e),n=IA(e,t.state,t.location,t.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=ht({location:"",base:e,go:r,createHref:_A.bind(null,e)},t,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>t.state.value}),s}function SA(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),RA(e)}function PA(e){return typeof e=="string"||e&&typeof e=="object"}function Gm(e){return typeof e=="string"||typeof e=="symbol"}const Je={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Wm=Symbol("");var $h;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})($h||($h={}));function Sr(e,t){return ht(new Error,{type:e,[Wm]:!0},t)}function He(e,t){return e instanceof Error&&Wm in e&&(t==null||!!(e.type&t))}const jh="[^/]+?",CA={sensitive:!1,strict:!1,start:!0,end:!0},bA=/[.+*?^${}()[\]/\\]/g;function VA(e,t){const n=ht({},CA,t),r=[];let s=n.start?"^":"";const i=[];for(const l of e){const u=l.length?[]:[90];n.strict&&!l.length&&(s+="/");for(let h=0;h<l.length;h++){const f=l[h];let p=40+(n.sensitive?.25:0);if(f.type===0)h||(s+="/"),s+=f.value.replace(bA,"\\$&"),p+=40;else if(f.type===1){const{value:_,repeatable:A,optional:I,regexp:P}=f;i.push({name:_,repeatable:A,optional:I});const L=P||jh;if(L!==jh){p+=10;try{new RegExp(`(${L})`)}catch(X){throw new Error(`Invalid custom RegExp for param "${_}" (${L}): `+X.message)}}let U=A?`((?:${L})(?:/(?:${L}))*)`:`(${L})`;h||(U=I&&l.length<2?`(?:/${U})`:"/"+U),I&&(U+="?"),s+=U,p+=20,I&&(p+=-8),A&&(p+=-20),L===".*"&&(p+=-50)}u.push(p)}r.push(u)}if(n.strict&&n.end){const l=r.length-1;r[l][r[l].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(l){const u=l.match(o),h={};if(!u)return null;for(let f=1;f<u.length;f++){const p=u[f]||"",_=i[f-1];h[_.name]=p&&_.repeatable?p.split("/"):p}return h}function c(l){let u="",h=!1;for(const f of e){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const p of f)if(p.type===0)u+=p.value;else if(p.type===1){const{value:_,repeatable:A,optional:I}=p,P=_ in l?l[_]:"";if(Pe(P)&&!A)throw new Error(`Provided param "${_}" is an array but it is not repeatable (* or + modifiers)`);const L=Pe(P)?P.join("/"):P;if(!L)if(I)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${_}"`);u+=L}}return u||"/"}return{re:o,score:r,keys:i,parse:a,stringify:c}}function DA(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function xA(e,t){let n=0;const r=e.score,s=t.score;for(;n<r.length&&n<s.length;){const i=DA(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(qh(r))return 1;if(qh(s))return-1}return s.length-r.length}function qh(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const NA={type:0,value:""},OA=/[a-zA-Z0-9_]/;function MA(e){if(!e)return[[]];if(e==="/")return[[NA]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(p){throw new Error(`ERR (${n})/"${l}": ${p}`)}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,c,l="",u="";function h(){l&&(n===0?i.push({type:0,value:l}):n===1||n===2||n===3?(i.length>1&&(c==="*"||c==="+")&&t(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:l,regexp:u,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):t("Invalid state to consume buffer"),l="")}function f(){l+=c}for(;a<e.length;){if(c=e[a++],c==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:c==="/"?(l&&h(),o()):c===":"?(h(),n=1):f();break;case 4:f(),n=r;break;case 1:c==="("?n=2:OA.test(c)?f():(h(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+c:n=3:u+=c;break;case 3:h(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,u="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${l}"`),h(),o(),s}function kA(e,t,n){const r=VA(MA(e.path),n),s=ht(r,{record:e,parent:t,children:[],alias:[]});return t&&!s.record.aliasOf==!t.record.aliasOf&&t.children.push(s),s}function LA(e,t){const n=[],r=new Map;t=zh({strict:!1,end:!0,sensitive:!1},t);function s(u){return r.get(u)}function i(u,h,f){const p=!f,_=FA(u);_.aliasOf=f&&f.record;const A=zh(t,u),I=[_];if("alias"in u){const U=typeof u.alias=="string"?[u.alias]:u.alias;for(const X of U)I.push(ht({},_,{components:f?f.record.components:_.components,path:X,aliasOf:f?f.record:_}))}let P,L;for(const U of I){const{path:X}=U;if(h&&X[0]!=="/"){const J=h.record.path,q=J[J.length-1]==="/"?"":"/";U.path=h.record.path+(X&&q+X)}if(P=kA(U,h,A),f?f.alias.push(P):(L=L||P,L!==P&&L.alias.push(P),p&&u.name&&!Kh(P)&&o(u.name)),_.children){const J=_.children;for(let q=0;q<J.length;q++)i(J[q],P,f&&f.children[q])}f=f||P,(P.record.components&&Object.keys(P.record.components).length||P.record.name||P.record.redirect)&&c(P)}return L?()=>{o(L)}:as}function o(u){if(Gm(u)){const h=r.get(u);h&&(r.delete(u),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(u);h>-1&&(n.splice(h,1),u.record.name&&r.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function c(u){let h=0;for(;h<n.length&&xA(u,n[h])>=0&&(u.record.path!==n[h].record.path||!Qm(u,n[h]));)h++;n.splice(h,0,u),u.record.name&&!Kh(u)&&r.set(u.record.name,u)}function l(u,h){let f,p={},_,A;if("name"in u&&u.name){if(f=r.get(u.name),!f)throw Sr(1,{location:u});A=f.record.name,p=ht(Hh(h.params,f.keys.filter(L=>!L.optional).concat(f.parent?f.parent.keys.filter(L=>L.optional):[]).map(L=>L.name)),u.params&&Hh(u.params,f.keys.map(L=>L.name))),_=f.stringify(p)}else if(u.path!=null)_=u.path,f=n.find(L=>L.re.test(_)),f&&(p=f.parse(_),A=f.record.name);else{if(f=h.name?r.get(h.name):n.find(L=>L.re.test(h.path)),!f)throw Sr(1,{location:u,currentLocation:h});A=f.record.name,p=ht({},h.params,u.params),_=f.stringify(p)}const I=[];let P=f;for(;P;)I.unshift(P.record),P=P.parent;return{name:A,path:_,params:p,matched:I,meta:BA(I)}}return e.forEach(u=>i(u)),{addRoute:i,resolve:l,removeRoute:o,getRoutes:a,getRecordMatcher:s}}function Hh(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function FA(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:UA(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function UA(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="object"?n[r]:n;return t}function Kh(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function BA(e){return e.reduce((t,n)=>ht(t,n.meta),{})}function zh(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function Qm(e,t){return t.children.some(n=>n===e||Qm(e,n))}function $A(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace($m," "),o=i.indexOf("="),a=Ds(o<0?i:i.slice(0,o)),c=o<0?null:Ds(i.slice(o+1));if(a in t){let l=t[a];Pe(l)||(l=t[a]=[l]),l.push(c)}else t[a]=c}return t}function Gh(e){let t="";for(let n in e){const r=e[n];if(n=oA(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(Pe(r)?r.map(i=>i&&lc(i)):[r&&lc(r)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+n,i!=null&&(t+="="+i))})}return t}function jA(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=Pe(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return t}const qA=Symbol(""),Wh=Symbol(""),Uo=Symbol(""),jl=Symbol(""),hc=Symbol("");function Br(){let e=[];function t(r){return e.push(r),()=>{const s=e.indexOf(r);s>-1&&e.splice(s,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function rn(e,t,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((a,c)=>{const l=f=>{f===!1?c(Sr(4,{from:n,to:t})):f instanceof Error?c(f):PA(f)?c(Sr(2,{from:t,to:f})):(o&&r.enterCallbacks[s]===o&&typeof f=="function"&&o.push(f),a())},u=i(()=>e.call(r&&r.instances[s],t,n,l));let h=Promise.resolve(u);e.length<3&&(h=h.then(l)),h.catch(f=>c(f))})}function pa(e,t,n,r,s=i=>i()){const i=[];for(const o of e)for(const a in o.components){let c=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(HA(c)){const u=(c.__vccOpts||c)[t];u&&i.push(rn(u,n,r,o,a,s))}else{let l=c();i.push(()=>l.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const h=Q0(u)?u.default:u;o.components[a]=h;const p=(h.__vccOpts||h)[t];return p&&rn(p,n,r,o,a,s)()}))}}return i}function HA(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Qh(e){const t=ve(Uo),n=ve(jl),r=ue(()=>t.resolve(Mn(e.to))),s=ue(()=>{const{matched:c}=r.value,{length:l}=c,u=c[l-1],h=n.matched;if(!u||!h.length)return-1;const f=h.findIndex(Rr.bind(null,u));if(f>-1)return f;const p=Yh(c[l-2]);return l>1&&Yh(u)===p&&h[h.length-1].path!==p?h.findIndex(Rr.bind(null,c[l-2])):f}),i=ue(()=>s.value>-1&&WA(n.params,r.value.params)),o=ue(()=>s.value>-1&&s.value===n.matched.length-1&&Km(n.params,r.value.params));function a(c={}){return GA(c)?t[Mn(e.replace)?"replace":"push"](Mn(e.to)).catch(as):Promise.resolve()}return{route:r,href:ue(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}const KA=Ff({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Qh,setup(e,{slots:t}){const n=Ns(Qh(e)),{options:r}=ve(Uo),s=ue(()=>({[Xh(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Xh(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=t.default&&t.default(n);return e.custom?i:id("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),zA=KA;function GA(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function WA(e,t){for(const n in t){const r=t[n],s=e[n];if(typeof r=="string"){if(r!==s)return!1}else if(!Pe(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function Yh(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Xh=(e,t,n)=>e??t??n,QA=Ff({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=ve(hc),s=ue(()=>e.route||r.value),i=ve(Wh,0),o=ue(()=>{let l=Mn(i);const{matched:u}=s.value;let h;for(;(h=u[l])&&!h.components;)l++;return l}),a=ue(()=>s.value.matched[o.value]);di(Wh,ue(()=>o.value+1)),di(qA,a),di(hc,s);const c=ke();return cr(()=>[c.value,a.value,e.name],([l,u,h],[f,p,_])=>{u&&(u.instances[h]=l,p&&p!==u&&l&&l===f&&(u.leaveGuards.size||(u.leaveGuards=p.leaveGuards),u.updateGuards.size||(u.updateGuards=p.updateGuards))),l&&u&&(!p||!Rr(u,p)||!f)&&(u.enterCallbacks[h]||[]).forEach(A=>A(l))},{flush:"post"}),()=>{const l=s.value,u=e.name,h=a.value,f=h&&h.components[u];if(!f)return Jh(n.default,{Component:f,route:l});const p=h.props[u],_=p?p===!0?l.params:typeof p=="function"?p(l):p:null,I=id(f,ht({},_,t,{onVnodeUnmounted:P=>{P.component.isUnmounted&&(h.instances[u]=null)},ref:c}));return Jh(n.default,{Component:I,route:l})||I}}});function Jh(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const YA=QA;function XA(e){const t=LA(e.routes,e),n=e.parseQuery||$A,r=e.stringifyQuery||Gh,s=e.history,i=Br(),o=Br(),a=Br(),c=bg(Je);let l=Je;rr&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=fa.bind(null,v=>""+v),h=fa.bind(null,cA),f=fa.bind(null,Ds);function p(v,M){let x,F;return Gm(v)?(x=t.getRecordMatcher(v),F=M):F=v,t.addRoute(F,x)}function _(v){const M=t.getRecordMatcher(v);M&&t.removeRoute(M)}function A(){return t.getRoutes().map(v=>v.record)}function I(v){return!!t.getRecordMatcher(v)}function P(v,M){if(M=ht({},M||c.value),typeof v=="string"){const m=da(n,v,M.path),g=t.resolve({path:m.path},M),T=s.createHref(m.fullPath);return ht(m,g,{params:f(g.params),hash:Ds(m.hash),redirectedFrom:void 0,href:T})}let x;if(v.path!=null)x=ht({},v,{path:da(n,v.path,M.path).path});else{const m=ht({},v.params);for(const g in m)m[g]==null&&delete m[g];x=ht({},v,{params:h(m)}),M.params=h(M.params)}const F=t.resolve(x,M),ut=v.hash||"";F.params=u(f(F.params));const wt=hA(r,ht({},v,{hash:iA(ut),path:F.path})),d=s.createHref(wt);return ht({fullPath:wt,hash:ut,query:r===Gh?jA(v.query):v.query||{}},F,{redirectedFrom:void 0,href:d})}function L(v){return typeof v=="string"?da(n,v,c.value.path):ht({},v)}function U(v,M){if(l!==v)return Sr(8,{from:M,to:v})}function X(v){return mt(v)}function J(v){return X(ht(L(v),{replace:!0}))}function q(v){const M=v.matched[v.matched.length-1];if(M&&M.redirect){const{redirect:x}=M;let F=typeof x=="function"?x(v):x;return typeof F=="string"&&(F=F.includes("?")||F.includes("#")?F=L(F):{path:F},F.params={}),ht({query:v.query,hash:v.hash,params:F.path!=null?{}:v.params},F)}}function mt(v,M){const x=l=P(v),F=c.value,ut=v.state,wt=v.force,d=v.replace===!0,m=q(x);if(m)return mt(ht(L(m),{state:typeof m=="object"?ht({},ut,m.state):ut,force:wt,replace:d}),M||x);const g=x;g.redirectedFrom=M;let T;return!wt&&fA(r,F,x)&&(T=Sr(16,{to:g,from:F}),Ce(F,F,!0,!1)),(T?Promise.resolve(T):Tt(g,F)).catch(y=>He(y)?He(y,2)?y:Ye(y):lt(y,g,F)).then(y=>{if(y){if(He(y,2))return mt(ht({replace:d},L(y.to),{state:typeof y.to=="object"?ht({},ut,y.to.state):ut,force:wt}),M||g)}else y=ae(g,F,!0,d,ut);return Kt(g,F,y),y})}function Z(v,M){const x=U(v,M);return x?Promise.reject(x):Promise.resolve()}function tt(v){const M=Qn.values().next().value;return M&&typeof M.runWithContext=="function"?M.runWithContext(v):v()}function Tt(v,M){let x;const[F,ut,wt]=JA(v,M);x=pa(F.reverse(),"beforeRouteLeave",v,M);for(const m of F)m.leaveGuards.forEach(g=>{x.push(rn(g,v,M))});const d=Z.bind(null,v,M);return x.push(d),zt(x).then(()=>{x=[];for(const m of i.list())x.push(rn(m,v,M));return x.push(d),zt(x)}).then(()=>{x=pa(ut,"beforeRouteUpdate",v,M);for(const m of ut)m.updateGuards.forEach(g=>{x.push(rn(g,v,M))});return x.push(d),zt(x)}).then(()=>{x=[];for(const m of wt)if(m.beforeEnter)if(Pe(m.beforeEnter))for(const g of m.beforeEnter)x.push(rn(g,v,M));else x.push(rn(m.beforeEnter,v,M));return x.push(d),zt(x)}).then(()=>(v.matched.forEach(m=>m.enterCallbacks={}),x=pa(wt,"beforeRouteEnter",v,M,tt),x.push(d),zt(x))).then(()=>{x=[];for(const m of o.list())x.push(rn(m,v,M));return x.push(d),zt(x)}).catch(m=>He(m,8)?m:Promise.reject(m))}function Kt(v,M,x){a.list().forEach(F=>tt(()=>F(v,M,x)))}function ae(v,M,x,F,ut){const wt=U(v,M);if(wt)return wt;const d=M===Je,m=rr?history.state:{};x&&(F||d?s.replace(v.fullPath,ht({scroll:d&&m&&m.scroll},ut)):s.push(v.fullPath,ut)),c.value=v,Ce(v,M,x,d),Ye()}let pe;function Tn(){pe||(pe=s.listen((v,M,x)=>{if(!Ys.listening)return;const F=P(v),ut=q(F);if(ut){mt(ht(ut,{replace:!0}),F).catch(as);return}l=F;const wt=c.value;rr&&EA(Uh(wt.fullPath,x.delta),Fo()),Tt(F,wt).catch(d=>He(d,12)?d:He(d,2)?(mt(d.to,F).then(m=>{He(m,20)&&!x.delta&&x.type===xs.pop&&s.go(-1,!1)}).catch(as),Promise.reject()):(x.delta&&s.go(-x.delta,!1),lt(d,F,wt))).then(d=>{d=d||ae(F,wt,!1),d&&(x.delta&&!He(d,8)?s.go(-x.delta,!1):x.type===xs.pop&&He(d,20)&&s.go(-1,!1)),Kt(F,wt,d)}).catch(as)}))}let me=Br(),at=Br(),dt;function lt(v,M,x){Ye(v);const F=at.list();return F.length?F.forEach(ut=>ut(v,M,x)):console.error(v),Promise.reject(v)}function qe(){return dt&&c.value!==Je?Promise.resolve():new Promise((v,M)=>{me.add([v,M])})}function Ye(v){return dt||(dt=!v,Tn(),me.list().forEach(([M,x])=>v?x(v):M()),me.reset()),v}function Ce(v,M,x,F){const{scrollBehavior:ut}=e;if(!rr||!ut)return Promise.resolve();const wt=!x&&TA(Uh(v.fullPath,0))||(F||!x)&&history.state&&history.state.scroll||null;return Cc().then(()=>ut(v,M,wt)).then(d=>d&&vA(d)).catch(d=>lt(d,v,M))}const ne=v=>s.go(v);let Wn;const Qn=new Set,Ys={currentRoute:c,listening:!0,addRoute:p,removeRoute:_,hasRoute:I,getRoutes:A,resolve:P,options:e,push:X,replace:J,go:ne,back:()=>ne(-1),forward:()=>ne(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:at.add,isReady:qe,install(v){const M=this;v.component("RouterLink",zA),v.component("RouterView",YA),v.config.globalProperties.$router=M,Object.defineProperty(v.config.globalProperties,"$route",{enumerable:!0,get:()=>Mn(c)}),rr&&!Wn&&c.value===Je&&(Wn=!0,X(s.location).catch(ut=>{}));const x={};for(const ut in Je)Object.defineProperty(x,ut,{get:()=>c.value[ut],enumerable:!0});v.provide(Uo,M),v.provide(jl,Tf(x)),v.provide(hc,c);const F=v.unmount;Qn.add(v),v.unmount=function(){Qn.delete(v),Qn.size<1&&(l=Je,pe&&pe(),pe=null,c.value=Je,Wn=!1,dt=!1),F()}}};function zt(v){return v.reduce((M,x)=>M.then(()=>tt(x)),Promise.resolve())}return Ys}function JA(e,t){const n=[],r=[],s=[],i=Math.max(t.matched.length,e.matched.length);for(let o=0;o<i;o++){const a=t.matched[o];a&&(e.matched.find(l=>Rr(l,a))?r.push(a):n.push(a));const c=e.matched[o];c&&(t.matched.find(l=>Rr(l,c))||s.push(c))}return[n,r,s]}function yR(){return ve(Uo)}function vR(){return ve(jl)}const ZA=[{path:"/notes",name:"notes.index",component:()=>hi(()=>import("./Index-fb13307d.js"),["assets/Index-fb13307d.js","assets/AddEditNote-57d44f23.js","assets/useWatchCharacters-f5a5ea67.js"])},{path:"/notes/update/:id",name:"notes.update",component:()=>hi(()=>import("./Update-e4600a8d.js"),["assets/Update-e4600a8d.js","assets/AddEditNote-57d44f23.js"])},{path:"/stats",name:"stats",component:()=>hi(()=>import("./Stats-81e3fa1a.js"),["assets/Stats-81e3fa1a.js","assets/useWatchCharacters-f5a5ea67.js"])},{path:"/auth",name:"auth",component:()=>hi(()=>import("./Auth-26f1689b.js"),["assets/Auth-26f1689b.js","assets/Auth-9699fd88.css"])}],tR=XA({history:SA(),routes:ZA}),eR={mounted(e){e.focus()}},ql=vy(z0),nR=Iy();ql.directive("autofocus",eR);ql.use(nR).use(tR);ql.mount("#app");export{Ea as A,gy as B,ed as C,lR as D,oR as E,ge as F,vR as G,yR as H,sR as I,aR as J,ls as K,hR as L,xy as a,Vy as b,dR as c,fR as d,ue as e,ud as f,ro as g,td as h,Ny as i,iR as j,Mn as k,_e as l,cR as m,ts as n,$f as o,H0 as p,pR as q,ke as r,Ns as s,bi as t,uR as u,Mf as v,cr as w,Sa as x,rR as y,kt as z};
